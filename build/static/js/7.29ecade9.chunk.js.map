{"version":3,"sources":["styles/jss/material-kit-react.js","app/const/api-const/dataset-url.const.ts","api/dataset-api.ts","styles/jss/material-kit-react/components/buttonStyle.js","dataworld/parts/button/custom-button.component.js","styles/jss/material-kit-react/components/footerStyle.js","dataworld/blocks/footer/footer.component.jsx","app/modules/dataset/_common/common.const.ts","styles/jss/material-kit-react/tooltipsStyle.js","styles/jss/material-kit-react/components/headerLinksStyle.js","app/modules/introduce/components/header-links.component.jsx","styles/jss/material-kit-react/components/headerStyle.js","app/modules/introduce/components/header.component.jsx","utils/handle-common.ts","app/const/api-const/profile-url.const.ts","api/profile-api.ts","dataworld/blocks/not-found-page/not-found-page.tsx","app/const/api-const/common-url.const.ts","api/common-api.ts","routes/private-route.tsx","dataworld/blocks/confirm-dialog/confirm-dialog.component.tsx","dataworld/blocks/dataset-item/dataset-item.component.tsx","dataworld/blocks/crop-image/crop-image.component.tsx","app/modules/dataset/dataset-list/components/dataset-post.component.tsx","dataworld/blocks/search-bar/filter-popover/filter-popover.component.tsx","dataworld/blocks/search-bar/search-bar.component.tsx","app/modules/dataset/dataset-list/pages/dataset-list.template.tsx","app/modules/dataset/dataset-list/pages/dataset-list.component.tsx","dataworld/blocks/tinymce-editor/tinymce-editor.component.tsx","app/modules/dataset/dataset-create/components/dataset-select-visibility.component.tsx","app/modules/dataset/_common/dataset-upload/dataset-upload.component.tsx","app/modules/dataset/dataset-create/pages/dataset-create.component.tsx","app/modules/dataset/dataset-search/pages/dataset-search.template.tsx","app/modules/dataset/dataset-search/pages/dataset-search.component.tsx","app/const/api-const/comment-url.const.ts","api/comment-api.ts","app/const/api-const/file-url.const.ts","api/file-api.ts","app/modules/dataset/dataset-view/pages/context.component.tsx","app/modules/dataset/dataset-view/components/dataset-header/dataset-header.component.tsx","app/modules/dataset/_common/column-type.const.ts","app/modules/dataset/_common/column-icons.const.tsx","app/modules/dataset/dataset-view/components/menu-type-column/menu-type-column.component.tsx","app/modules/dataset/dataset-view/components/edit-file-description/edit-file-description.component.tsx","app/modules/dataset/dataset-view/components/file-info-tab/file-info-tab.component.tsx","app/modules/dataset/dataset-view/components/statistic-tab/column-chart.component.tsx","app/modules/dataset/dataset-view/components/statistic-tab/statistic-tab.component.tsx","app/modules/dataset/dataset-view/components/preview-files/preview-files.component.tsx","app/modules/dataset/dataset-view/components/tags-dialog/tags-dialog.component.tsx","app/modules/dataset/dataset-view/components/data-tab/data-tab.template.tsx","app/modules/dataset/dataset-view/components/data-tab/data-tab.component.tsx","app/modules/dataset/dataset-view/components/settings-tab/settings-tab.component.tsx","dataworld/blocks/comment-post/comment-post.component.tsx","app/modules/dataset/dataset-view/components/comment-tab/comment-tab.component.tsx","app/modules/dataset/dataset-view/components/history-tab/history-tab.component.tsx","app/modules/dataset/dataset-view/components/dataset-tab/dataset-tab.component.tsx","dataworld/blocks/recommend/recommend-post/recommend-post.component.tsx","dataworld/blocks/recommend/recommend-list/recommend-list.component.tsx","app/modules/dataset/dataset-view/pages/dataset-view.template.tsx","app/modules/dataset/router.tsx"],"names":["drawerWidth","transition","container","paddingRight","paddingLeft","marginRight","marginLeft","width","maxWidth","boxShadow","defaultFont","fontFamily","fontWeight","lineHeight","primaryColor","warningColor","dangerColor","successColor","infoColor","roseColor","grayColor","color","background","margin","paddingTop","borderTop","height","textDecoration","marginTop","UPLOAD_DATASET","method","URL","process","SEARCH_DATASET","UPLOAD_DATASET_IMAGE","GET_DATASET","UPDATE_DATASET_DESCRIPTION","UPDATE_DATASET_VISIBILITY","UPDATE_DATASET_TITLE_SUBTITLE","LIKE_OR_UNLIKE_DATASET","UPDATE_DATASET_TAGS","DOWNLOAD_DATASET","CREATE_NEW_VERSION","DELETE_DATASET","datasetDefaultValues","avatar","name","email","username","accountId","dataset","_id","title","subtitle","url","size","description","visibility","path","downloads","views","banner","fileTypes","like","countLike","files","tags","versions","thumbnail","createdDate","lastUpdate","tagsDefaultValues","datasetsLength","datasets","Array","fill","searchListDefault","countDatasets","DatasetAPI","uploadDataset","datasetFormData","a","fetchLogin","store","dispatch","addToast","message","type","window","location","href","axios","post","headers","localStorage","getItem","result","createResult","getDataset","datasetUrl","requestAPI","updateDescription","datasetId","data","updateVisibility","updateTitleAndSubtitle","subTitle","uploadImage","thumbnailForm","updateTags","oldTags","newTags","filterDataset","query","page","limit","likeOrUnLikeDataset","downloadDatasetByPath","pathDataset","request","responseType","createNewVersion","newVersionForm","deleteDataset","buttonStyle","button","minHeight","minWidth","backgroundColor","border","borderRadius","position","padding","fontSize","textTransform","letterSpacing","willChange","textAlign","whiteSpace","verticalAlign","touchAction","cursor","display","top","transform","left","fullWidth","primary","info","success","warning","danger","rose","white","simple","transparent","disabled","opacity","pointerEvents","lg","sm","round","block","link","justIcon","makeComponentStyles","makeStyles","RegularButton","React","forwardRef","props","ref","children","className","rest","classes","btnClasses","classNames","Button","footerStyle","float","right","footer","zIndex","footerWhiteFont","list","marginBottom","inlineBlock","icon","useStyles","styles","Footer","List","ListItem","target","style","Date","getYear","DatasetVisibility","FILE_STATUS","IMAGE_TYPE","AccountMode","tooltipsStyle","tooltip","fontStyle","textShadow","wordBreak","wordSpacing","wordWrap","lineBreak","headerLinksStyle","theme","listStyle","paddingBottom","listItem","breakpoints","down","content","listItemText","navLink","justifyContent","notificationNavLink","registerNavLink","navLinkActive","icons","socialIcons","marginRight5","HeaderLinks","headerStyle","appBar","alignItems","flexFlow","absolute","fixed","flex","flexWrap","appResponsive","dark","drawerPaper","bottom","transitionProperty","transitionDuration","transitionTimingFunction","overflowY","Header","rightLinks","leftLinks","brand","appBarClasses","brandComponent","AppBar","Toolbar","undefined","Hidden","smDown","implementation","defaultProp","HandleCommon","handleDateOfBirth","date","moment","format","formatBytes","bytes","decimals","k","dm","sizes","i","Math","floor","log","parseFloat","pow","toFixed","GET_PROFILE","UPDATE_PROFILE","UPDATE_AVATAR","FILTER_DATASET_IN_PROFILE","UPDATE_ACCOUNT_MODE","DELETE_ACCOUNT","UPDATE_RECOMMEND","defaultProfileValues","bio","dateOfBirth","company","website","github","accountMode","recommend","ProfileAPI","getProfile","updateProfile","newProfile","profile","updateAvatar","avatarForm","userId","fileType","sort","updateAccountMode","mode","deleteAccount","updateRecommend","oldRecommend","newRecommend","NotFoundPage","user","useSelector","state","auth","src","alt","GET_ALL_TAGS_DATASET","GET_RECOMMEND_LIST","GET_TRENDING_DATASET_TAGS","GET_RECOMMEND_ARRAY","CommonAPI","getAllTags","getRecommendList","getTrending","getRecommendArray","PrivateRoute","Component","component","useState","isLoading","setIsLoading","useAppDispatch","useEffect","fetLoginAPI","useAppSelector","render","to","ConfirmDialog","open","onClose","onAccept","acceptTheme","dialogTheme","onClick","event","stopPropagation","handleClick","aria-labelledby","aria-describedby","id","variant","handleClose","handleAccept","DatasetItem","datasetValues","handleChangeLike","isHiddenDatasetVisibility","setLike","history","useHistory","changeLike","isLike","gotoDataset","push","index","findIndex","item","animation","aria-label","PRIVATE_DATASET","fromNow","length","CropImage","setCropper","viewMode","guides","initialAspectRatio","responsive","autoCropArea","checkOrientation","onInitialized","instance","DatasetPost","self","gotoProfileOwner","Card","CardHeader","Skeleton","Avatar","action","IconButton","ThumbUp","ThumbUpOutlined","Tooltip","Typography","subheader","CardActionArea","CardMedia","image","CardContent","gutterBottom","map","FilterPopover","anchorEl","applyFilter","setFileType","allTags","setAllTags","selectedTags","setSelectedTags","useForm","defaultValues","minSize","maxSize","typeSizeMin","typeSizeMax","register","errors","handleSubmit","control","reset","watch","calculateMinSizeAndMaxSizeKB","minSizeKB","maxSizeKB","Boolean","getTags","Popover","keepMounted","anchorOrigin","vertical","horizontal","transformOrigin","onSubmit","queryString","toString","Autocomplete","multiple","value","onChange","newValue","handleSelectTags","options","getOptionLabel","option","renderInput","params","TextField","placeholder","InputProps","startAdornment","InputAdornment","Search","inputRef","min","as","Select","MenuItem","validate","ToggleButtonGroup","exclusive","newFileType","ToggleButton","checkDisableButton","SearchBar","setAnchorEl","filter","setFilter","getSeachString","search","stringify","arrayFormat","searchQueryString","endAdornment","preventDefault","currentTarget","startIcon","FilterList","DatasetListTemplate","handleSearchAlls","handleCreateDataset","Container","Add","datasetValuesList","tagsDatasets","clsx","TrendingUp","Grid","spacing","topDatasets","xs","FiberNewOutlined","StarsOutlined","tagsIndex","datasetsIndex","DatasetList","newDatasets","componentDidMount","document","setState","stringified","tempTagsDatasets","tempTopDatasets","setArrayLikeOrUnlike","tempNewDatasets","tempRecommend","forEach","prev","targetArray","newDataset","this","TinyMCEEditor","setValues","values","apiKey","init","menubar","plugins","toolbar","onEditorChange","currentContent","editor","DatasetSelectVisibility","RadioGroup","FormControlLabel","PUBLIC_DATASET","Radio","label","PublicOutlined","defaultChecked","LockOutlined","DatasetUpload","setCreatable","creatable","getUploadParams","inputWithFilesContent","onChangeStatus","file","status","allFiles","setFiles","setTimeout","includes","handleControlledDropzonChangeStatus","accept","inputContent","dropzone","maxHeight","inputLabelWithFiles","DatasetCreate","setDescription","apiResult","useRef","formData","FormData","append","trim","UploadFileAPI","STATUS_OK","current","innerHTML","InputLabelProps","shrink","asterisk","autoFocus","required","minLength","maxLength","el","createElement","setAttribute","body","appendChild","select","execCommand","removeChild","Link","pattern","DatasetSearchTemplate","handleChangeCurrentPage","FormatListNumbered","Pagination","count","ceil","currentPage","DatasetSearch","previousSearchString","getValueByQueryString","componentDidUpdate","parseQuery","parse","Object","keys","tempDatasets","GET_ALL_COMMENT_IN_DATASET","POST_COMMENT","COUNT_COMMENT_IN_DATASET","LIKE_OR_UNLIKE_COMMENT","UPDATE_COMMENT","DELETE_COMMENT","commentDefault","commentator","parent","CommentAPI","getAllCommentInDataset","postComment","countCommentInDataset","likeOrUnLikeComment","commentId","updateComment","deleteComment","GET_ALL_FILES_DATASET","GET_FILE_CONTENT","UPDATE_FILE_DESCRIPTION","UPDATE_FILE_COLUMNS","DOWNLOAD_FILE","FileAPI","getAllFilesInfoInDataset","getOneFileInDataset","updateFileDescription","fileId","updateFileColumns","columns","filePath","downloadFileByPath","DatasetViewContext","createContext","countComment","isLoadingData","ownerDataset","setDatasetDescription","handleChangeComment","comment","setFileInfo","fileDescription","setVisibilityDataset","setTitleAndSubtitle","setBannerDataset","setThumbnailDataset","setDatasetTags","DatasetViewProvider","match","useRouteMatch","Promise","all","getDatasetValues","Provider","prevState","newFiles","DescriptionUpdate","locale","DatasetHeader","useContext","backgroundImage","VisibilityOffOutlined","VisibilityOutlined","arrow","EventNoteOutlined","CloudDownloadOutlined","COLUMN_TYPE","ID","STRING","NUMBER","BOOLEAN","DATE_TIME","EMAIL","VpnKey","TextFormat","Filter1","Check","CalendarToday","MailOutline","MenuTypeColumn","columnInfo","setColumnsType","columnsType","indexColumn","selectedIndex","setSelectedIndex","handleClickListItem","ArrowDropDown","Menu","PaperProps","ITEM_HEIGHT","selected","newArrayType","handleMenuItemClick","defaultValue","EditFileDescription","fileInfo","setFileDescription","newColumns","column","analysis","Dialog","DialogTitle","Close","DialogContent","DialogActions","FileInfoTab","rowsData","isLoadingFile","openFileDescription","setOpenFileDescription","rows","useMemo","field","headerName","hidden","EditOutlined","Parser","hideFooterSelectedRowCount","ColumnChart","numberOfColumn","setNumberOfColumn","typeChart","setTypeChart","isHidden","timeValueAppearChunk","replaceValue","_","replace","chartConfig","categories","key","columnData","labels","chart","show","xaxis","series","validChartConfig","valid","missing","wrongType","colors","convertFloatToPercentage","number","unique","mostFrequently","percentageMostFrequently","variance","standardDeviation","max","mean","quartile","q1","q2","q3","AnalysisTab","PreviewFile","setCurrentFileAndContent","setValue","filesFilter","setFilesFilter","downloadFile","currentFile","createObjectURL","download","click","placeHolder","toLowerCase","GridOn","currentFileName","fileName","GetApp","Tabs","Tab","LabelTags","followersLength","TagsDialog","checkedTags","setCheckedTags","searchTags","setSearchTags","validationSchema","yup","shape","tagsName","matches","resolver","yupResolver","setError","isCheckedTag","saveTags","FormControl","FormGroup","Checkbox","checked","newState","handleSelect","AddCircle","Chip","onDelete","tagsDelete","differentTags","id1","some","disableButton","DataTabTemplate","changeVisibility","handleCloseConfirmVisibility","handleOpenTags","handleCloseTags","handleSave","handleEdit","handleClickTags","setChangeDescription","handleAcceptChangeVisibility","isPrivate","privateDialogTitle","privateDialogContent","LocalOfferOutlined","openTags","Accordion","AccordionSummary","ExpandMore","openConfirmVisibility","AccordionDetails","easyUse","expandIcon","DescriptionOutlined","isEdit","changeDescription","summary","DataTab","contents","fileContent","getFileContent","firstFileContent","searchString","change","SettingsTab","setBanner","setThumbnail","cropperThumbnail","setCropperThumbnail","cropperBanner","setCropperBanner","deleteConfirm","setDeleteConfirm","currentOption","setCurrentOption","inputFileRef","changeDefaultValues","openDeleteConfirm","isOpen","acceptDelete","imageType","BANNER","cropperImage","getCroppedCanvas","toBlob","blob","onFilechange","reader","FileReader","readAsDataURL","onload","Delete","THUMBNAIL","AddAPhoto","CommentPost","authorId","handleUpdateComment","setReply","handleDeleteComment","setIsEdit","setDeleteComment","currentCommentContent","setCurrentCommentContent","gotoProfile","handleOptions","handleEditComment","handleDeleteDialog","acceptDeleteComment","MoreHoriz","disableScrollLock","ButtonGroup","orientation","Reply","input","querySelector","timeout","scrollIntoView","clearTimeout","Edit","DeleteOutline","CommentTabTemplate","setComment","reply","listComment","setListComment","tempComment","handeUpdateComment","tempContent","now","indexItem","getComments","iconStatus","AddBox","TrackChanges","Remove","HistoryTab","currentVersion","setCurrentVersion","updatable","setUpdatable","previousFiles","setPreviousFiles","lengthVersions","version","JSON","reload","countChanges","add","remove","fileChanges","changeDetails","totalAdd","totalRemove","InsertDriveFileOutlined","deleteIndex","History","DatasetTab","downloadDataset","Blob","StorageRounded","InsertCommentOutlined","Timeline","SettingsOutlined","MoreVert","RecommendPost","CheckCircle","RecommendList","recommendList","setRecommendList","handleViewAllRecommend","recommendArray","expanded","DatasetViewTemplate","DataSetRouter","exact","DatasetFilter","DatasetView"],"mappings":"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","file":"static/js/7.29ecade9.chunk.js","sourcesContent":["/*!\r\n\r\n =========================================================\r\n * Material Kit React - v1.9.0 based on Material Kit - v2.0.2\r\n =========================================================\r\n\r\n * Product Page: https://www.creative-tim.com/product/material-kit-react\r\n * Copyright 2020 Creative Tim (https://www.creative-tim.com)\r\n * Licensed under MIT (https://github.com/creativetimofficial/material-kit-react/blob/master/LICENSE.md)\r\n\r\n =========================================================\r\n\r\n * The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\r\n\r\n */\r\n\r\n// ##############################\r\n// // // Variables - Styles that are used on more than one component\r\n// #############################\r\n\r\nconst drawerWidth = 260;\r\n\r\nconst transition = {\r\n  transition: \"all 0.33s cubic-bezier(0.685, 0.0473, 0.346, 1)\"\r\n};\r\n\r\nconst containerFluid = {\r\n  paddingRight: \"15px\",\r\n  paddingLeft: \"15px\",\r\n  marginRight: \"auto\",\r\n  marginLeft: \"auto\",\r\n  width: \"100%\"\r\n};\r\nconst container = {\r\n  ...containerFluid,\r\n  \"@media (min-width: 576px)\": {\r\n    maxWidth: \"540px\"\r\n  },\r\n  \"@media (min-width: 768px)\": {\r\n    maxWidth: \"720px\"\r\n  },\r\n  \"@media (min-width: 992px)\": {\r\n    maxWidth: \"960px\"\r\n  },\r\n  \"@media (min-width: 1200px)\": {\r\n    maxWidth: \"1140px\"\r\n  }\r\n};\r\n\r\nconst boxShadow = {\r\n  boxShadow:\r\n    \"0 10px 30px -12px rgba(0, 0, 0, 0.42), 0 4px 25px 0px rgba(0, 0, 0, 0.12), 0 8px 10px -5px rgba(0, 0, 0, 0.2)\"\r\n};\r\n\r\nconst card = {\r\n  display: \"inline-block\",\r\n  position: \"relative\",\r\n  width: \"100%\",\r\n  margin: \"25px 0\",\r\n  boxShadow: \"0 1px 4px 0 rgba(0, 0, 0, 0.14)\",\r\n  borderRadius: \"3px\",\r\n  color: \"rgba(0, 0, 0, 0.87)\",\r\n  background: \"#fff\"\r\n};\r\n\r\nconst defaultFont = {\r\n  fontFamily: '\"Roboto\", \"Helvetica\", \"Arial\", sans-serif',\r\n  fontWeight: \"300\",\r\n  lineHeight: \"1.5em\"\r\n};\r\n\r\nconst primaryColor = \"#9c27b0\";\r\nconst warningColor = \"#ff9800\";\r\nconst dangerColor = \"#f44336\";\r\nconst successColor = \"#4caf50\";\r\nconst infoColor = \"#00acc1\";\r\nconst roseColor = \"#e91e63\";\r\nconst grayColor = \"#999999\";\r\n\r\nconst primaryBoxShadow = {\r\n  boxShadow:\r\n    \"0 12px 20px -10px rgba(156, 39, 176, 0.28), 0 4px 20px 0px rgba(0, 0, 0, 0.12), 0 7px 8px -5px rgba(156, 39, 176, 0.2)\"\r\n};\r\nconst infoBoxShadow = {\r\n  boxShadow:\r\n    \"0 12px 20px -10px rgba(0, 188, 212, 0.28), 0 4px 20px 0px rgba(0, 0, 0, 0.12), 0 7px 8px -5px rgba(0, 188, 212, 0.2)\"\r\n};\r\nconst successBoxShadow = {\r\n  boxShadow:\r\n    \"0 12px 20px -10px rgba(76, 175, 80, 0.28), 0 4px 20px 0px rgba(0, 0, 0, 0.12), 0 7px 8px -5px rgba(76, 175, 80, 0.2)\"\r\n};\r\nconst warningBoxShadow = {\r\n  boxShadow:\r\n    \"0 12px 20px -10px rgba(255, 152, 0, 0.28), 0 4px 20px 0px rgba(0, 0, 0, 0.12), 0 7px 8px -5px rgba(255, 152, 0, 0.2)\"\r\n};\r\nconst dangerBoxShadow = {\r\n  boxShadow:\r\n    \"0 12px 20px -10px rgba(244, 67, 54, 0.28), 0 4px 20px 0px rgba(0, 0, 0, 0.12), 0 7px 8px -5px rgba(244, 67, 54, 0.2)\"\r\n};\r\nconst roseBoxShadow = {\r\n  boxShadow:\r\n    \"0 4px 20px 0px rgba(0, 0, 0, 0.14), 0 7px 10px -5px rgba(233, 30, 99, 0.4)\"\r\n};\r\n\r\nconst warningCardHeader = {\r\n  color: \"#fff\",\r\n  background: \"linear-gradient(60deg, #ffa726, #fb8c00)\",\r\n  ...warningBoxShadow\r\n};\r\nconst successCardHeader = {\r\n  color: \"#fff\",\r\n  background: \"linear-gradient(60deg, #66bb6a, #43a047)\",\r\n  ...successBoxShadow\r\n};\r\nconst dangerCardHeader = {\r\n  color: \"#fff\",\r\n  background: \"linear-gradient(60deg, #ef5350, #e53935)\",\r\n  ...dangerBoxShadow\r\n};\r\nconst infoCardHeader = {\r\n  color: \"#fff\",\r\n  background: \"linear-gradient(60deg, #26c6da, #00acc1)\",\r\n  ...infoBoxShadow\r\n};\r\nconst primaryCardHeader = {\r\n  color: \"#fff\",\r\n  background: \"linear-gradient(60deg, #ab47bc, #8e24aa)\",\r\n  ...primaryBoxShadow\r\n};\r\nconst roseCardHeader = {\r\n  color: \"#fff\",\r\n  background: \"linear-gradient(60deg, #ec407a, #d81b60)\",\r\n  ...roseBoxShadow\r\n};\r\nconst cardActions = {\r\n  margin: \"0 20px 10px\",\r\n  paddingTop: \"10px\",\r\n  borderTop: \"1px solid #eeeeee\",\r\n  height: \"auto\",\r\n  ...defaultFont\r\n};\r\n\r\nconst cardHeader = {\r\n  margin: \"-30px 15px 0\",\r\n  borderRadius: \"3px\",\r\n  padding: \"15px\"\r\n};\r\n\r\nconst defaultBoxShadow = {\r\n  border: \"0\",\r\n  borderRadius: \"3px\",\r\n  boxShadow:\r\n    \"0 10px 20px -12px rgba(0, 0, 0, 0.42), 0 3px 20px 0px rgba(0, 0, 0, 0.12), 0 8px 10px -5px rgba(0, 0, 0, 0.2)\",\r\n  padding: \"10px 0\",\r\n  transition: \"all 150ms ease 0s\"\r\n};\r\n\r\nconst title = {\r\n  color: \"#3C4858\",\r\n  margin: \"1.75rem 0 0.875rem\",\r\n  textDecoration: \"none\",\r\n  fontWeight: \"700\",\r\n  fontFamily: `\"Roboto Slab\", \"Times New Roman\", serif`\r\n};\r\n\r\nconst cardTitle = {\r\n  ...title,\r\n  marginTop: \".625rem\"\r\n};\r\n\r\nconst cardLink = {\r\n  \"& + $cardLink\": {\r\n    marginLeft: \"1.25rem\"\r\n  }\r\n};\r\n\r\nconst cardSubtitle = {\r\n  marginBottom: \"0\",\r\n  marginTop: \"-.375rem\"\r\n};\r\n\r\nexport {\r\n  //variables\r\n  drawerWidth,\r\n  transition,\r\n  container,\r\n  containerFluid,\r\n  boxShadow,\r\n  card,\r\n  defaultFont,\r\n  primaryColor,\r\n  warningColor,\r\n  dangerColor,\r\n  successColor,\r\n  infoColor,\r\n  roseColor,\r\n  grayColor,\r\n  primaryBoxShadow,\r\n  infoBoxShadow,\r\n  successBoxShadow,\r\n  warningBoxShadow,\r\n  dangerBoxShadow,\r\n  roseBoxShadow,\r\n  warningCardHeader,\r\n  successCardHeader,\r\n  dangerCardHeader,\r\n  infoCardHeader,\r\n  primaryCardHeader,\r\n  roseCardHeader,\r\n  cardActions,\r\n  cardHeader,\r\n  defaultBoxShadow,\r\n  title,\r\n  cardTitle,\r\n  cardLink,\r\n  cardSubtitle\r\n};\r\n","import { ApiTemplate } from 'services/axios/common-services.const'\r\n\r\nconst UPLOAD_DATASET: ApiTemplate = {\r\n  method: \"POST\",\r\n  URL: `${process.env.REACT_APP_BASE_URL_API}dataset/new-dataset`\r\n}\r\n\r\nconst SEARCH_DATASET: ApiTemplate = {\r\n  method: \"POST\",\r\n  URL: `dataset/search`\r\n}\r\n\r\nconst UPLOAD_DATASET_IMAGE: ApiTemplate = {\r\n  method: \"POST\",\r\n  URL: `${process.env.REACT_APP_BASE_URL_API}dataset/update/image`\r\n}\r\n\r\nconst GET_DATASET: ApiTemplate = {\r\n  method: \"GET\",\r\n  URL: \"\"\r\n}\r\n\r\nconst UPDATE_DATASET_DESCRIPTION: ApiTemplate = {\r\n  method: \"POST\",\r\n  URL: \"dataset/update/description\"\r\n}\r\n\r\nconst UPDATE_DATASET_VISIBILITY: ApiTemplate = {\r\n  method: \"POST\",\r\n  URL: \"dataset/update/visibility\"\r\n}\r\n\r\nconst UPDATE_DATASET_TITLE_SUBTITLE: ApiTemplate = {\r\n  method: \"POST\",\r\n  URL: \"dataset/update/title-subtitle\"\r\n}\r\n\r\nconst LIKE_OR_UNLIKE_DATASET: ApiTemplate = {\r\n  method: \"POST\",\r\n  URL: \"dataset/like\"\r\n}\r\n\r\nconst UPDATE_DATASET_TAGS: ApiTemplate = {\r\n  method: \"POST\",\r\n  URL: \"dataset/update/tags\"\r\n}\r\n\r\nconst DOWNLOAD_DATASET: ApiTemplate = {\r\n  method: \"POST\",\r\n  URL: `${process.env.REACT_APP_BASE_URL_API}dataset/download`\r\n}\r\n\r\nconst CREATE_NEW_VERSION: ApiTemplate = {\r\n  method: \"POST\",\r\n  URL: `${process.env.REACT_APP_BASE_URL_API}dataset/new-version`\r\n}\r\n\r\nconst DELETE_DATASET: ApiTemplate = {\r\n  method: \"POST\",\r\n  URL: `dataset/delete`\r\n}\r\n\r\nexport {\r\n  UPLOAD_DATASET,\r\n  UPLOAD_DATASET_IMAGE,\r\n  GET_DATASET,\r\n  UPDATE_DATASET_DESCRIPTION,\r\n  UPDATE_DATASET_VISIBILITY,\r\n  UPDATE_DATASET_TITLE_SUBTITLE,\r\n  UPDATE_DATASET_TAGS,\r\n  SEARCH_DATASET,\r\n  LIKE_OR_UNLIKE_DATASET,\r\n  DOWNLOAD_DATASET,\r\n  CREATE_NEW_VERSION,\r\n  DELETE_DATASET\r\n};","import {\r\n  CREATE_NEW_VERSION,\r\n  DELETE_DATASET, DOWNLOAD_DATASET, GET_DATASET,\r\n  LIKE_OR_UNLIKE_DATASET, SEARCH_DATASET, UPDATE_DATASET_DESCRIPTION,\r\n  UPDATE_DATASET_TAGS, UPDATE_DATASET_TITLE_SUBTITLE, UPDATE_DATASET_VISIBILITY,\r\n  UPLOAD_DATASET_IMAGE, UPLOAD_DATASET,\r\n} from 'app/const/api-const/dataset-url.const';\r\nimport axios from 'axios';\r\nimport { createResult, requestAPI } from 'services/axios/handle-api.const';\r\nimport { fetchLogin } from 'redux/authentication-slice';\r\nimport store from 'store';\r\nimport addToast from 'dataworld/parts/toast/add-toast.component';\r\nexport interface DatasetValuesList {\r\n  topDatasets: Array<DatasetValues>,\r\n  newDatasets: Array<DatasetValues>,\r\n  recommend: Array<DatasetValues>,\r\n  tagsDatasets: Array<Tags>\r\n}\r\nexport interface DatasetValues {\r\n  avatar: string,\r\n  name: string,\r\n  email: string,\r\n  username: string,\r\n  accountId: string,\r\n  dataset: Dataset,\r\n}\r\n\r\nexport interface Dataset {\r\n  _id: string,\r\n  title: string,\r\n  subtitle: string,\r\n  url: string,\r\n  size: number,\r\n  description: string,\r\n  visibility: number,\r\n  path: string,\r\n  downloads: number,\r\n  views: number,\r\n  files: Array<string>,\r\n  fileTypes: Array<string>,\r\n  like: Array<string>,\r\n  countLike: number,\r\n  tags: Array<Tags>,\r\n  thumbnail: string,\r\n  banner: string,\r\n  versions: Array<Version>,\r\n  createdDate: Date | string,\r\n  lastUpdate: Date | string,\r\n}\r\n\r\nexport interface Version {\r\n  version: string,\r\n  fileChanges: Array<FileVersion>,\r\n  createdDate: Date | string | number,\r\n}\r\n\r\nexport interface FileVersion {\r\n  fileName: string,\r\n  status: number,\r\n  changeDetails: {\r\n    add: any,\r\n    remove: any\r\n  },\r\n}\r\nexport interface Tags {\r\n  _id?: string,\r\n  datasetsLength?: number,\r\n  datasets?: Array<DatasetValues>,\r\n  followers?: Array<any>,\r\n  followersLength?: number,\r\n  name: string,\r\n  createdDate?: Date | string,\r\n}\r\n\r\nexport interface QueryString {\r\n  title?: string,\r\n  like?: 'asc' | 'desc',\r\n  tags?: Array<string>,\r\n  fileType?: string,\r\n  minSize?: string,\r\n  maxSize?: string,\r\n  date?: string,\r\n}\r\n\r\nexport interface DatasetSearchList {\r\n  countDatasets: number,\r\n  datasets: Array<DatasetValues>\r\n}\r\n\r\nexport const datasetDefaultValues: DatasetValues = {\r\n  avatar: '',\r\n  name: '',\r\n  email: '',\r\n  username: '',\r\n  accountId: '',\r\n  dataset: {\r\n    _id: '',\r\n    title: '',\r\n    subtitle: '',\r\n    url: '',\r\n    size: 0,\r\n    description: '',\r\n    visibility: 0,\r\n    path: '',\r\n    downloads: 0,\r\n    views: 0,\r\n    banner: '',\r\n    fileTypes: [],\r\n    like: [],\r\n    countLike: 0,\r\n    files: [],\r\n    tags: [],\r\n    versions: [],\r\n    thumbnail: '',\r\n    createdDate: '',\r\n    lastUpdate: '',\r\n  }\r\n}\r\n\r\nexport const tagsDefaultValues: Tags = {\r\n  _id: '',\r\n  datasetsLength: 0,\r\n  datasets: Array(4).fill(datasetDefaultValues),\r\n  name: '',\r\n  createdDate: ''\r\n}\r\n\r\nexport const searchListDefault: DatasetSearchList = {\r\n  countDatasets: 0,\r\n  datasets: Array(10).fill(datasetDefaultValues)\r\n}\r\n\r\nexport default class DatasetAPI {\r\n  /* Upload dataset */\r\n  static uploadDataset = async (datasetFormData: FormData) => {\r\n    try {\r\n      const isLogin = await fetchLogin(store.dispatch)\r\n      if (!isLogin) {\r\n        addToast({ message: 'Phiên đăng nhập đã hết hạn, hãy đăng nhập lại', type: 'error' })\r\n        window.location.href = '/auth/login'\r\n      }\r\n      const result = await axios.post(UPLOAD_DATASET.URL, datasetFormData, {\r\n        headers: {\r\n          'Content-Type': 'multipart/form-data',\r\n          \"auth-token\": localStorage.getItem(\"auth-token\"),\r\n        }\r\n      })\r\n      return createResult(result)\r\n    } catch (error) {\r\n      return createResult(null, error)\r\n    }\r\n  }\r\n\r\n  /* Get data set info without file content */\r\n  static getDataset = async (username: string, datasetUrl: string) => {\r\n    GET_DATASET.URL = `dataset/${username}/${datasetUrl}`\r\n    return await requestAPI<DatasetValues>(GET_DATASET)\r\n  }\r\n\r\n  /* update dataset description */\r\n  static updateDescription = async (datasetId: string, description: string | undefined) => {\r\n    const data = {\r\n      datasetId: datasetId,\r\n      description: description\r\n    }\r\n    return await requestAPI(UPDATE_DATASET_DESCRIPTION, data)\r\n  }\r\n\r\n  /* update dataset visibility */\r\n  static updateVisibility = async (datasetId: string, visibility: number) => {\r\n    const data = {\r\n      datasetId: datasetId,\r\n      visibility: visibility\r\n    }\r\n    return await requestAPI(UPDATE_DATASET_VISIBILITY, data)\r\n  }\r\n\r\n  /* update dataset title and subtitle */\r\n  static updateTitleAndSubtitle = async (datasetId: string, title: string, subtitle: string) => {\r\n    const data = {\r\n      datasetId: datasetId,\r\n      title: title,\r\n      subTitle: subtitle\r\n    }\r\n    return await requestAPI(UPDATE_DATASET_TITLE_SUBTITLE, data)\r\n  }\r\n\r\n  /* update dataset banner, thumbnail */\r\n  static uploadImage = async (thumbnailForm: FormData) => {\r\n    try {\r\n      const result = await axios.post(UPLOAD_DATASET_IMAGE.URL, thumbnailForm, {\r\n        headers: {\r\n          'Content-Type': 'multipart/form-data',\r\n          \"auth-token\": localStorage.getItem(\"auth-token\"),\r\n        }\r\n      })\r\n      return createResult(result)\r\n    } catch (error) {\r\n      return createResult(null, error)\r\n    }\r\n  }\r\n\r\n  /* update dataset tags */\r\n  static updateTags = async (datasetId: string, oldTags: Array<Tags> | undefined, newTags: Array<Tags>) => {\r\n    const data = {\r\n      datasetId: datasetId,\r\n      oldTags: oldTags,\r\n      newTags: newTags,\r\n    }\r\n    return await requestAPI(UPDATE_DATASET_TAGS, data)\r\n  }\r\n\r\n  /* get trending dataset and tags dataset */\r\n  static filterDataset = async (query: QueryString, page: number, limit: number) => {\r\n    const data = {\r\n      ...query,\r\n      page: page,\r\n      limit: limit\r\n    }\r\n    return await requestAPI<DatasetSearchList>(SEARCH_DATASET, data)\r\n  }\r\n\r\n  /* Like or unlike dataset */\r\n  static likeOrUnLikeDataset = async (datasetId: string) => {\r\n    const data = {\r\n      datasetId: datasetId\r\n    }\r\n    return await requestAPI(LIKE_OR_UNLIKE_DATASET, data)\r\n  }\r\n\r\n  /* Download dataset by path */\r\n  static downloadDatasetByPath = async (path: string, datasetId: string) => {\r\n    const data = {\r\n      pathDataset: path,\r\n      datasetId: datasetId,\r\n    }\r\n    return await axios.request({\r\n      method: 'POST',\r\n      url: DOWNLOAD_DATASET.URL,\r\n      headers: {\r\n        \"auth-token\": localStorage.getItem(\"auth-token\"),\r\n      },\r\n      data: data,\r\n      responseType: 'arraybuffer',\r\n    })\r\n  }\r\n\r\n  /* create new version */\r\n  static createNewVersion = async (newVersionForm: FormData) => {\r\n    try {\r\n      const result = await axios.post(CREATE_NEW_VERSION.URL, newVersionForm, {\r\n        headers: {\r\n          'Content-Type': 'multipart/form-data',\r\n          \"auth-token\": localStorage.getItem(\"auth-token\"),\r\n        }\r\n      })\r\n      return createResult(result)\r\n    } catch (error) {\r\n      return createResult(null, error)\r\n    }\r\n  }\r\n\r\n  /* Delete dataset */\r\n  static deleteDataset = async (datasetId: string) => {\r\n    const data = {\r\n      datasetId: datasetId\r\n    }\r\n    return await requestAPI(DELETE_DATASET, data)\r\n  }\r\n}","import {\r\n  grayColor,\r\n  roseColor,\r\n  primaryColor,\r\n  infoColor,\r\n  successColor,\r\n  warningColor,\r\n  dangerColor\r\n} from \"../../material-kit-react\";\r\n\r\nconst buttonStyle = {\r\n  button: {\r\n    minHeight: \"auto\",\r\n    minWidth: \"auto\",\r\n    backgroundColor: grayColor,\r\n    color: \"#FFFFFF\",\r\n    boxShadow:\r\n      \"0 2px 2px 0 rgba(153, 153, 153, 0.14), 0 3px 1px -2px rgba(153, 153, 153, 0.2), 0 1px 5px 0 rgba(153, 153, 153, 0.12)\",\r\n    border: \"none\",\r\n    borderRadius: \"3px\",\r\n    position: \"relative\",\r\n    padding: \"12px 30px\",\r\n    margin: \".3125rem 1px\",\r\n    fontSize: \"12px\",\r\n    fontWeight: \"400\",\r\n    textTransform: \"uppercase\",\r\n    letterSpacing: \"0\",\r\n    willChange: \"box-shadow, transform\",\r\n    transition:\r\n      \"box-shadow 0.2s cubic-bezier(0.4, 0, 1, 1), background-color 0.2s cubic-bezier(0.4, 0, 0.2, 1)\",\r\n    lineHeight: \"1.42857143\",\r\n    textAlign: \"center\",\r\n    whiteSpace: \"nowrap\",\r\n    verticalAlign: \"middle\",\r\n    touchAction: \"manipulation\",\r\n    cursor: \"pointer\",\r\n    \"&:hover,&:focus\": {\r\n      color: \"#FFFFFF\",\r\n      backgroundColor: grayColor,\r\n      boxShadow:\r\n        \"0 14px 26px -12px rgba(153, 153, 153, 0.42), 0 4px 23px 0px rgba(0, 0, 0, 0.12), 0 8px 10px -5px rgba(153, 153, 153, 0.2)\"\r\n    },\r\n    \"& .fab,& .fas,& .far,& .fal,& .material-icons\": {\r\n      position: \"relative\",\r\n      display: \"inline-block\",\r\n      top: \"0\",\r\n      fontSize: \"1.1rem\",\r\n      marginRight: \"4px\",\r\n      verticalAlign: \"middle\"\r\n    },\r\n    \"& svg\": {\r\n      position: \"relative\",\r\n      display: \"inline-block\",\r\n      top: \"0\",\r\n      width: \"18px\",\r\n      height: \"18px\",\r\n      marginRight: \"4px\",\r\n      verticalAlign: \"middle\"\r\n    },\r\n    \"&$justIcon\": {\r\n      \"& .fab,& .fas,& .far,& .fal,& .material-icons\": {\r\n        marginRight: \"0px\",\r\n        position: \"absolute\",\r\n        width: \"100%\",\r\n        transform: \"none\",\r\n        left: \"0px\",\r\n        top: \"0px\",\r\n        height: \"100%\",\r\n        lineHeight: \"41px\",\r\n        fontSize: \"20px\"\r\n      }\r\n    }\r\n  },\r\n  fullWidth: {\r\n    width: \"100%\"\r\n  },\r\n  primary: {\r\n    backgroundColor: primaryColor,\r\n    boxShadow:\r\n      \"0 2px 2px 0 rgba(156, 39, 176, 0.14), 0 3px 1px -2px rgba(156, 39, 176, 0.2), 0 1px 5px 0 rgba(156, 39, 176, 0.12)\",\r\n    \"&:hover,&:focus\": {\r\n      backgroundColor: primaryColor,\r\n      boxShadow:\r\n        \"0 14px 26px -12px rgba(156, 39, 176, 0.42), 0 4px 23px 0px rgba(0, 0, 0, 0.12), 0 8px 10px -5px rgba(156, 39, 176, 0.2)\"\r\n    }\r\n  },\r\n  info: {\r\n    backgroundColor: infoColor,\r\n    boxShadow:\r\n      \"0 2px 2px 0 rgba(0, 188, 212, 0.14), 0 3px 1px -2px rgba(0, 188, 212, 0.2), 0 1px 5px 0 rgba(0, 188, 212, 0.12)\",\r\n    \"&:hover,&:focus\": {\r\n      backgroundColor: infoColor,\r\n      boxShadow:\r\n        \"0 14px 26px -12px rgba(0, 188, 212, 0.42), 0 4px 23px 0px rgba(0, 0, 0, 0.12), 0 8px 10px -5px rgba(0, 188, 212, 0.2)\"\r\n    }\r\n  },\r\n  success: {\r\n    backgroundColor: successColor,\r\n    boxShadow:\r\n      \"0 2px 2px 0 rgba(76, 175, 80, 0.14), 0 3px 1px -2px rgba(76, 175, 80, 0.2), 0 1px 5px 0 rgba(76, 175, 80, 0.12)\",\r\n    \"&:hover,&:focus\": {\r\n      backgroundColor: successColor,\r\n      boxShadow:\r\n        \"0 14px 26px -12px rgba(76, 175, 80, 0.42), 0 4px 23px 0px rgba(0, 0, 0, 0.12), 0 8px 10px -5px rgba(76, 175, 80, 0.2)\"\r\n    }\r\n  },\r\n  warning: {\r\n    backgroundColor: warningColor,\r\n    boxShadow:\r\n      \"0 2px 2px 0 rgba(255, 152, 0, 0.14), 0 3px 1px -2px rgba(255, 152, 0, 0.2), 0 1px 5px 0 rgba(255, 152, 0, 0.12)\",\r\n    \"&:hover,&:focus\": {\r\n      backgroundColor: warningColor,\r\n      boxShadow:\r\n        \"0 14px 26px -12px rgba(255, 152, 0, 0.42), 0 4px 23px 0px rgba(0, 0, 0, 0.12), 0 8px 10px -5px rgba(255, 152, 0, 0.2)\"\r\n    }\r\n  },\r\n  danger: {\r\n    backgroundColor: dangerColor,\r\n    boxShadow:\r\n      \"0 2px 2px 0 rgba(244, 67, 54, 0.14), 0 3px 1px -2px rgba(244, 67, 54, 0.2), 0 1px 5px 0 rgba(244, 67, 54, 0.12)\",\r\n    \"&:hover,&:focus\": {\r\n      backgroundColor: dangerColor,\r\n      boxShadow:\r\n        \"0 14px 26px -12px rgba(244, 67, 54, 0.42), 0 4px 23px 0px rgba(0, 0, 0, 0.12), 0 8px 10px -5px rgba(244, 67, 54, 0.2)\"\r\n    }\r\n  },\r\n  rose: {\r\n    backgroundColor: roseColor,\r\n    boxShadow:\r\n      \"0 2px 2px 0 rgba(233, 30, 99, 0.14), 0 3px 1px -2px rgba(233, 30, 99, 0.2), 0 1px 5px 0 rgba(233, 30, 99, 0.12)\",\r\n    \"&:hover,&:focus\": {\r\n      backgroundColor: roseColor,\r\n      boxShadow:\r\n        \"0 14px 26px -12px rgba(233, 30, 99, 0.42), 0 4px 23px 0px rgba(0, 0, 0, 0.12), 0 8px 10px -5px rgba(233, 30, 99, 0.2)\"\r\n    }\r\n  },\r\n  white: {\r\n    \"&,&:focus,&:hover,&:visited\": {\r\n      backgroundColor: \"#FFFFFF\",\r\n      color: grayColor\r\n    }\r\n  },\r\n  simple: {\r\n    \"&,&:focus,&:hover,&:visited\": {\r\n      color: \"#FFFFFF\",\r\n      background: \"transparent\",\r\n      boxShadow: \"none\"\r\n    },\r\n    \"&$primary\": {\r\n      \"&,&:focus,&:hover,&:visited\": {\r\n        color: primaryColor\r\n      }\r\n    },\r\n    \"&$info\": {\r\n      \"&,&:focus,&:hover,&:visited\": {\r\n        color: infoColor\r\n      }\r\n    },\r\n    \"&$success\": {\r\n      \"&,&:focus,&:hover,&:visited\": {\r\n        color: successColor\r\n      }\r\n    },\r\n    \"&$warning\": {\r\n      \"&,&:focus,&:hover,&:visited\": {\r\n        color: warningColor\r\n      }\r\n    },\r\n    \"&$rose\": {\r\n      \"&,&:focus,&:hover,&:visited\": {\r\n        color: roseColor\r\n      }\r\n    },\r\n    \"&$danger\": {\r\n      \"&,&:focus,&:hover,&:visited\": {\r\n        color: dangerColor\r\n      }\r\n    }\r\n  },\r\n  transparent: {\r\n    \"&,&:focus,&:hover,&:visited\": {\r\n      color: \"inherit\",\r\n      background: \"transparent\",\r\n      boxShadow: \"none\"\r\n    }\r\n  },\r\n  disabled: {\r\n    opacity: \"0.65\",\r\n    pointerEvents: \"none\"\r\n  },\r\n  lg: {\r\n    padding: \"1.125rem 2.25rem\",\r\n    fontSize: \"0.875rem\",\r\n    lineHeight: \"1.333333\",\r\n    borderRadius: \"0.2rem\"\r\n  },\r\n  sm: {\r\n    padding: \"0.40625rem 1.25rem\",\r\n    fontSize: \"0.6875rem\",\r\n    lineHeight: \"1.5\",\r\n    borderRadius: \"0.2rem\"\r\n  },\r\n  round: {\r\n    borderRadius: \"30px\"\r\n  },\r\n  block: {\r\n    width: \"100% !important\"\r\n  },\r\n  link: {\r\n    \"&,&:hover,&:focus\": {\r\n      backgroundColor: \"transparent\",\r\n      color: \"#999999\",\r\n      boxShadow: \"none\"\r\n    }\r\n  },\r\n  justIcon: {\r\n    paddingLeft: \"12px\",\r\n    paddingRight: \"12px\",\r\n    fontSize: \"20px\",\r\n    height: \"41px\",\r\n    minWidth: \"41px\",\r\n    width: \"41px\",\r\n    \"& .fab,& .fas,& .far,& .fal,& svg,& .material-icons\": {\r\n      marginRight: \"0px\"\r\n    },\r\n    \"&$lg\": {\r\n      height: \"57px\",\r\n      minWidth: \"57px\",\r\n      width: \"57px\",\r\n      lineHeight: \"56px\",\r\n      \"& .fab,& .fas,& .far,& .fal,& .material-icons\": {\r\n        fontSize: \"32px\",\r\n        lineHeight: \"56px\"\r\n      },\r\n      \"& svg\": {\r\n        width: \"32px\",\r\n        height: \"32px\"\r\n      }\r\n    },\r\n    \"&$sm\": {\r\n      height: \"30px\",\r\n      minWidth: \"30px\",\r\n      width: \"30px\",\r\n      \"& .fab,& .fas,& .far,& .fal,& .material-icons\": {\r\n        fontSize: \"17px\",\r\n        lineHeight: \"29px\"\r\n      },\r\n      \"& svg\": {\r\n        width: \"17px\",\r\n        height: \"17px\"\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\nexport default buttonStyle;\r\n","import React from \"react\";\r\n// nodejs library to set properties for components\r\nimport PropTypes from \"prop-types\";\r\n// nodejs library that concatenates classes\r\nimport classNames from \"classnames\";\r\n// @material-ui/core components\r\nimport makeStyles from \"@material-ui/core/styles/makeStyles\";\r\nimport Button from \"@material-ui/core/Button\";\r\n// core components\r\nimport buttonStyle from \"../../../styles/jss/material-kit-react/components/buttonStyle\";\r\n\r\nconst makeComponentStyles = makeStyles(() => ({\r\n  ...buttonStyle\r\n}));\r\n\r\nconst RegularButton = React.forwardRef((props, ref) => {\r\n  const {\r\n    color,\r\n    round,\r\n    children,\r\n    fullWidth,\r\n    disabled,\r\n    simple,\r\n    size,\r\n    block,\r\n    link,\r\n    justIcon,\r\n    className,\r\n    ...rest\r\n  } = props;\r\n\r\n  const classes = makeComponentStyles();\r\n\r\n  const btnClasses = classNames({\r\n    [classes.button]: true,\r\n    [classes[size]]: size,\r\n    [classes[color]]: color,\r\n    [classes.round]: round,\r\n    [classes.fullWidth]: fullWidth,\r\n    [classes.disabled]: disabled,\r\n    [classes.simple]: simple,\r\n    [classes.block]: block,\r\n    [classes.link]: link,\r\n    [classes.justIcon]: justIcon,\r\n    [className]: className\r\n  });\r\n  return (\r\n    <Button {...rest} ref={ref} className={btnClasses}>\r\n      {children}\r\n    </Button>\r\n  );\r\n});\r\n\r\nRegularButton.propTypes = {\r\n  color: PropTypes.oneOf([\r\n    \"primary\",\r\n    \"info\",\r\n    \"success\",\r\n    \"warning\",\r\n    \"danger\",\r\n    \"rose\",\r\n    \"white\",\r\n    \"transparent\"\r\n  ]),\r\n  size: PropTypes.oneOf([\"sm\", \"lg\"]),\r\n  simple: PropTypes.bool,\r\n  round: PropTypes.bool,\r\n  fullWidth: PropTypes.bool,\r\n  disabled: PropTypes.bool,\r\n  block: PropTypes.bool,\r\n  link: PropTypes.bool,\r\n  justIcon: PropTypes.bool,\r\n  children: PropTypes.node,\r\n  className: PropTypes.string\r\n};\r\n\r\nexport default RegularButton;\r\n","import { container, primaryColor } from '../../material-kit-react';\r\n\r\nconst footerStyle = {\r\n  block: {\r\n    color: '#0366d6',\r\n    padding: '0.9375rem',\r\n    fontWeight: '500',\r\n    fontSize: '12px',\r\n    borderRadius: '3px',\r\n    textDecoration: 'none',\r\n    position: 'relative',\r\n    display: 'block',\r\n  },\r\n  left: {\r\n    float: 'left!important',\r\n    display: 'block',\r\n  },\r\n  right: {\r\n    padding: '15px 0',\r\n    margin: '0',\r\n    float: 'right!important',\r\n  },\r\n  footer: {\r\n    padding: '0.9375rem 0',\r\n    textAlign: 'center',\r\n    display: 'flex',\r\n    zIndex: '2',\r\n    position: 'relative',\r\n  },\r\n  a: {\r\n    color: primaryColor,\r\n    textDecoration: 'none',\r\n    backgroundColor: 'transparent',\r\n  },\r\n  footerWhiteFont: {\r\n    '&,&:hover,&:focus': {\r\n      color: '#FFFFFF',\r\n    },\r\n  },\r\n  container,\r\n  list: {\r\n    marginBottom: '0',\r\n    padding: '0',\r\n    marginTop: '0',\r\n  },\r\n  inlineBlock: {\r\n    display: 'inline-block',\r\n    padding: '0px',\r\n    width: 'auto',\r\n  },\r\n  icon: {\r\n    width: '18px',\r\n    height: '18px',\r\n    position: 'relative',\r\n    top: '3px',\r\n  },\r\n};\r\nexport default footerStyle;\r\n","/*eslint-disable*/\r\nimport React from 'react';\r\n// nodejs library to set properties for components\r\nimport PropTypes from 'prop-types';\r\n// nodejs library that concatenates classes\r\nimport classNames from 'classnames';\r\n// material-ui core components\r\nimport { List, ListItem } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n// @material-ui/icons\r\nimport styles from 'styles/jss/material-kit-react/components/footerStyle';\r\nimport './footer.scss';\r\n\r\nconst useStyles = makeStyles(styles);\r\n\r\nexport default function Footer() {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <footer className='b-footer'>\r\n      <div className={classes.container}>\r\n        <div className={classes.left}>\r\n          <List className={classes.list}>\r\n            <ListItem className={classes.inlineBlock}>\r\n              <a\r\n                href='https://github.com/thann1999'\r\n                className={classes.block}\r\n                target='_blank'\r\n              >\r\n                Về chúng tôi\r\n              </a>\r\n            </ListItem>\r\n\r\n            <ListItem className={classes.inlineBlock}>\r\n              <a\r\n                href='http://blog.creative-tim.com/?ref=mkr-footer'\r\n                className={classes.block}\r\n                target='_blank'\r\n              >\r\n                Mục tiêu\r\n              </a>\r\n            </ListItem>\r\n\r\n            <ListItem className={classes.inlineBlock}>\r\n              <a\r\n                href='https://www.creative-tim.com/license?ref=mkr-footer'\r\n                className={classes.block}\r\n                target='_blank'\r\n              >\r\n                Licenses\r\n              </a>\r\n            </ListItem>\r\n\r\n            <ListItem className={classes.inlineBlock}>\r\n              <a\r\n                href='https://www.creative-tim.com/license?ref=mkr-footer'\r\n                className={classes.block}\r\n                target='_blank'\r\n              >\r\n                Liên hệ\r\n              </a>\r\n            </ListItem>\r\n          </List>\r\n        </div>\r\n\r\n        <div className={classes.right} style={{ paddingTop: '8px' }}>\r\n          <List className='h-d_flex list'>\r\n            <ListItem className='item'>\r\n              <span>&copy; {1900 + new Date().getYear()}</span>\r\n\r\n              <span className='h-ml-6'>DataWord</span>\r\n            </ListItem>\r\n          </List>\r\n        </div>\r\n      </div>\r\n    </footer>\r\n  );\r\n}\r\n\r\nFooter.propTypes = {\r\n  whiteFont: PropTypes.bool,\r\n};\r\n","export enum DatasetVisibility {\r\n  /*Create dataset */\r\n  PUBLIC_DATASET = 1,\r\n\r\n  /*Update dataset */\r\n  PRIVATE_DATASET = 0\r\n}\r\n\r\nexport enum FILE_STATUS {\r\n  ADD = 0,\r\n  MODIFIED = 1,\r\n  DELETE = 2,\r\n};\r\n\r\nexport enum IMAGE_TYPE {\r\n  BANNER = 0,\r\n  THUMBNAIL = 1,\r\n}\r\n\r\nexport enum AccountMode {\r\n  /*Create dataset */\r\n  PUBLIC_ACCOUNT = 1,\r\n\r\n  /*Update dataset */\r\n  PRIVATE_ACCOUNT = 0\r\n}","const tooltipsStyle = {\r\n  tooltip: {\r\n    padding: \"10px 15px\",\r\n    minWidth: \"130px\",\r\n    color: \"#555555\",\r\n    lineHeight: \"1.7em\",\r\n    background: \"#FFFFFF\",\r\n    border: \"none\",\r\n    borderRadius: \"3px\",\r\n    boxShadow:\r\n      \"0 8px 10px 1px rgba(0, 0, 0, 0.14), 0 3px 14px 2px rgba(0, 0, 0, 0.12), 0 5px 5px -3px rgba(0, 0, 0, 0.2)\",\r\n    maxWidth: \"200px\",\r\n    textAlign: \"center\",\r\n    fontFamily: '\"Helvetica Neue\",Helvetica,Arial,sans-serif',\r\n    fontSize: \"0.875em\",\r\n    fontStyle: \"normal\",\r\n    fontWeight: \"400\",\r\n    textShadow: \"none\",\r\n    textTransform: \"none\",\r\n    letterSpacing: \"normal\",\r\n    wordBreak: \"normal\",\r\n    wordSpacing: \"normal\",\r\n    wordWrap: \"normal\",\r\n    whiteSpace: \"normal\",\r\n    lineBreak: \"auto\"\r\n  }\r\n};\r\n\r\nexport default tooltipsStyle;\r\n","import { defaultFont } from \"../../material-kit-react\";\r\n\r\nimport tooltip from \"../tooltipsStyle\";\r\n\r\nconst headerLinksStyle = theme => ({\r\n  list: {\r\n    ...defaultFont,\r\n    fontSize: \"14px\",\r\n    margin: 0,\r\n    paddingLeft: \"0\",\r\n    listStyle: \"none\",\r\n    paddingTop: \"0\",\r\n    paddingBottom: \"0\",\r\n    color: \"inherit\"\r\n  },\r\n  listItem: {\r\n    float: \"left\",\r\n    color: \"inherit\",\r\n    position: \"relative\",\r\n    display: \"block\",\r\n    width: \"auto\",\r\n    margin: \"0\",\r\n    padding: \"0\",\r\n    [theme.breakpoints.down(\"sm\")]: {\r\n      width: \"100%\",\r\n      \"&:after\": {\r\n        width: \"calc(100% - 30px)\",\r\n        content: '\"\"',\r\n        display: \"block\",\r\n        height: \"1px\",\r\n        marginLeft: \"15px\",\r\n        backgroundColor: \"#e5e5e5\"\r\n      }\r\n    }\r\n  },\r\n  listItemText: {\r\n    padding: \"0 !important\"\r\n  },\r\n  navLink: {\r\n    color: \"inherit\",\r\n    position: \"relative\",\r\n    padding: \"0.9375rem\",\r\n    fontWeight: \"400\",\r\n    fontSize: \"12px\",\r\n    textTransform: \"uppercase\",\r\n    borderRadius: \"3px\",\r\n    lineHeight: \"20px\",\r\n    textDecoration: \"none\",\r\n    margin: \"0px\",\r\n    display: \"inline-flex\",\r\n    \"&:hover,&:focus\": {\r\n      color: \"inherit\",\r\n      background: \"rgba(200, 200, 200, 0.2)\"\r\n    },\r\n    [theme.breakpoints.down(\"sm\")]: {\r\n      width: \"calc(100% - 30px)\",\r\n      marginLeft: \"15px\",\r\n      marginBottom: \"8px\",\r\n      marginTop: \"8px\",\r\n      textAlign: \"left\",\r\n      \"& > span:first-child\": {\r\n        justifyContent: \"flex-start\"\r\n      }\r\n    }\r\n  },\r\n  notificationNavLink: {\r\n    color: \"inherit\",\r\n    padding: \"0.9375rem\",\r\n    fontWeight: \"400\",\r\n    fontSize: \"12px\",\r\n    textTransform: \"uppercase\",\r\n    lineHeight: \"20px\",\r\n    textDecoration: \"none\",\r\n    margin: \"0px\",\r\n    display: \"inline-flex\",\r\n    top: \"4px\"\r\n  },\r\n  registerNavLink: {\r\n    top: \"3px\",\r\n    position: \"relative\",\r\n    fontWeight: \"400\",\r\n    fontSize: \"12px\",\r\n    textTransform: \"uppercase\",\r\n    lineHeight: \"20px\",\r\n    textDecoration: \"none\",\r\n    margin: \"0px\",\r\n    display: \"inline-flex\"\r\n  },\r\n  navLinkActive: {\r\n    color: \"inherit\",\r\n    backgroundColor: \"rgba(255, 255, 255, 0.1)\"\r\n  },\r\n  icons: {\r\n    width: \"20px\",\r\n    height: \"20px\",\r\n    marginRight: \"3px\"\r\n  },\r\n  socialIcons: {\r\n    position: \"relative\",\r\n    fontSize: \"20px !important\",\r\n    marginRight: \"4px\"\r\n  },\r\n  ...tooltip,\r\n  marginRight5: {\r\n    marginRight: \"5px\"\r\n  }\r\n});\r\n\r\nexport default headerLinksStyle;\r\n","/*eslint-disable*/\r\nimport React from 'react';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\n// @material-ui/core components\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport styles from 'styles/jss/material-kit-react/components/headerLinksStyle';\r\nimport CustomButton from 'dataworld/parts/button/custom-button.component';\r\n\r\nconst useStyles = makeStyles(styles);\r\n\r\nexport default function HeaderLinks(props) {\r\n  const classes = useStyles();\r\n  return (\r\n    <List className={classes.list}>\r\n      <ListItem className={classes.listItem}>\r\n        <CustomButton\r\n          href='/auth/login'\r\n          color='transparent'\r\n          className={classes.navLink}\r\n        >\r\n          Đăng nhập\r\n        </CustomButton>\r\n      </ListItem>\r\n      <ListItem className={classes.listItem}>\r\n        <CustomButton\r\n          href='/auth/register'\r\n          color='transparent'\r\n          className={classes.navLink}\r\n        >\r\n          Đăng ký\r\n        </CustomButton>\r\n      </ListItem>\r\n    </List>\r\n  );\r\n}\r\n","import {\r\n  container,\r\n  defaultFont,\r\n  primaryColor,\r\n  infoColor,\r\n  successColor,\r\n  warningColor,\r\n  dangerColor,\r\n  roseColor,\r\n  transition,\r\n  boxShadow,\r\n  drawerWidth\r\n} from \"../../material-kit-react\";\r\n\r\nconst headerStyle = {\r\n  appBar: {\r\n    display: \"flex\",\r\n    border: \"0\",\r\n    borderRadius: \"3px\",\r\n    padding: \"0.625rem 0\",\r\n    marginBottom: \"20px\",\r\n    color: \"#555\",\r\n    width: \"100%\",\r\n    backgroundColor: \"#fff\",\r\n    boxShadow:\r\n      \"0 4px 18px 0px rgba(0, 0, 0, 0.12), 0 7px 10px -5px rgba(0, 0, 0, 0.15)\",\r\n    transition: \"all 150ms ease 0s\",\r\n    alignItems: \"center\",\r\n    flexFlow: \"row nowrap\",\r\n    justifyContent: \"flex-start\",\r\n    position: \"relative\",\r\n    zIndex: \"unset\"\r\n  },\r\n  absolute: {\r\n    position: \"absolute\",\r\n    zIndex: \"1100\"\r\n  },\r\n  fixed: {\r\n    position: \"fixed\",\r\n    zIndex: \"1100\"\r\n  },\r\n  container: {\r\n    ...container,\r\n    minHeight: \"50px\",\r\n    flex: \"1\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"space-between\",\r\n    display: \"flex\",\r\n    flexWrap: \"nowrap\"\r\n  },\r\n  flex: {\r\n    flex: 1\r\n  },\r\n  title: {\r\n    ...defaultFont,\r\n    lineHeight: \"30px\",\r\n    fontSize: \"18px\",\r\n    borderRadius: \"3px\",\r\n    textTransform: \"none\",\r\n    color: \"inherit\",\r\n    padding: \"8px 16px\",\r\n    letterSpacing: \"unset\",\r\n    \"&:hover,&:focus\": {\r\n      color: \"inherit\",\r\n      background: \"transparent\"\r\n    }\r\n  },\r\n  appResponsive: {\r\n    margin: \"20px 10px\"\r\n  },\r\n  primary: {\r\n    backgroundColor: primaryColor,\r\n    color: \"#FFFFFF\",\r\n    boxShadow:\r\n      \"0 4px 20px 0px rgba(0, 0, 0, 0.14), 0 7px 12px -5px rgba(156, 39, 176, 0.46)\"\r\n  },\r\n  info: {\r\n    backgroundColor: infoColor,\r\n    color: \"#FFFFFF\",\r\n    boxShadow:\r\n      \"0 4px 20px 0px rgba(0, 0, 0, 0.14), 0 7px 12px -5px rgba(0, 188, 212, 0.46)\"\r\n  },\r\n  success: {\r\n    backgroundColor: successColor,\r\n    color: \"#FFFFFF\",\r\n    boxShadow:\r\n      \"0 4px 20px 0px rgba(0, 0, 0, 0.14), 0 7px 12px -5px rgba(76, 175, 80, 0.46)\"\r\n  },\r\n  warning: {\r\n    backgroundColor: warningColor,\r\n    color: \"#FFFFFF\",\r\n    boxShadow:\r\n      \"0 4px 20px 0px rgba(0, 0, 0, 0.14), 0 7px 12px -5px rgba(255, 152, 0, 0.46)\"\r\n  },\r\n  danger: {\r\n    backgroundColor: dangerColor,\r\n    color: \"#FFFFFF\",\r\n    boxShadow:\r\n      \"0 4px 20px 0px rgba(0, 0, 0, 0.14), 0 7px 12px -5px rgba(244, 67, 54, 0.46)\"\r\n  },\r\n  rose: {\r\n    backgroundColor: roseColor,\r\n    color: \"#FFFFFF\",\r\n    boxShadow:\r\n      \"0 4px 20px 0px rgba(0, 0, 0, 0.14), 0 7px 12px -5px rgba(233, 30, 99, 0.46)\"\r\n  },\r\n  transparent: {\r\n    backgroundColor: \"transparent !important\",\r\n    boxShadow: \"none\",\r\n    paddingTop: \"25px\",\r\n    color: \"#FFFFFF\"\r\n  },\r\n  dark: {\r\n    color: \"#FFFFFF\",\r\n    backgroundColor: \"#212121 !important\",\r\n    boxShadow:\r\n      \"0 4px 20px 0px rgba(0, 0, 0, 0.14), 0 7px 12px -5px rgba(33, 33, 33, 0.46)\"\r\n  },\r\n  white: {\r\n    border: \"0\",\r\n    padding: \"0.625rem 0\",\r\n    marginBottom: \"20px\",\r\n    color: \"#555\",\r\n    backgroundColor: \"#fff !important\",\r\n    boxShadow:\r\n      \"0 4px 18px 0px rgba(0, 0, 0, 0.12), 0 7px 10px -5px rgba(0, 0, 0, 0.15)\"\r\n  },\r\n  drawerPaper: {\r\n    border: \"none\",\r\n    bottom: \"0\",\r\n    transitionProperty: \"top, bottom, width\",\r\n    transitionDuration: \".2s, .2s, .35s\",\r\n    transitionTimingFunction: \"linear, linear, ease\",\r\n    width: drawerWidth,\r\n    ...boxShadow,\r\n    position: \"fixed\",\r\n    display: \"block\",\r\n    top: \"0\",\r\n    height: \"100vh\",\r\n    right: \"0\",\r\n    left: \"auto\",\r\n    visibility: \"visible\",\r\n    overflowY: \"visible\",\r\n    borderTop: \"none\",\r\n    textAlign: \"left\",\r\n    paddingRight: \"0px\",\r\n    paddingLeft: \"0\",\r\n    ...transition\r\n  }\r\n};\r\n\r\nexport default headerStyle;\r\n","import AppBar from \"@material-ui/core/AppBar\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Hidden from \"@material-ui/core/Hidden\";\r\n// @material-ui/core components\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\n// nodejs library that concatenates classes\r\nimport classNames from \"classnames\";\r\n// nodejs library to set properties for components\r\nimport PropTypes from \"prop-types\";\r\nimport React from \"react\";\r\n// core components\r\nimport styles from \"../../../../styles/jss/material-kit-react/components/headerStyle\";\r\n\r\nconst useStyles = makeStyles(styles);\r\n\r\nexport default function Header(props) {\r\n  const classes = useStyles();\r\n  \r\n  const { color, rightLinks, leftLinks, brand, fixed, absolute } = props;\r\n  const appBarClasses = classNames({\r\n    [classes.appBar]: true,\r\n    [classes[color]]: color,\r\n    [classes.absolute]: absolute,\r\n    [classes.fixed]: fixed\r\n  });\r\n  const brandComponent = <Button className={classes.title}>{brand}</Button>;\r\n  return (\r\n    <AppBar className={appBarClasses}>\r\n      <Toolbar className={classes.container}>\r\n        {leftLinks !== undefined ? brandComponent : null}\r\n        <div className={classes.flex}>\r\n          {leftLinks !== undefined ? (\r\n            <Hidden smDown implementation=\"css\">\r\n              {leftLinks}\r\n            </Hidden>\r\n          ) : (\r\n            brandComponent\r\n          )}\r\n        </div>\r\n        <Hidden smDown implementation=\"css\">\r\n          {rightLinks}\r\n        </Hidden>\r\n      </Toolbar>\r\n    </AppBar>\r\n  );\r\n}\r\n\r\nHeader.defaultProp = {\r\n  color: \"white\"\r\n};\r\n\r\nHeader.propTypes = {\r\n  color: PropTypes.oneOf([\r\n    \"primary\",\r\n    \"info\",\r\n    \"success\",\r\n    \"warning\",\r\n    \"danger\",\r\n    \"transparent\",\r\n    \"white\",\r\n    \"rose\",\r\n    \"dark\"\r\n  ]),\r\n  rightLinks: PropTypes.node,\r\n  leftLinks: PropTypes.node,\r\n  brand: PropTypes.string,\r\n  fixed: PropTypes.bool,\r\n  absolute: PropTypes.bool,\r\n  // this will cause the sidebar to change the color from\r\n  // props.color (see above) to changeColorOnScroll.color\r\n  // when the window.pageYOffset is heigher or equal to\r\n  // changeColorOnScroll.height and then when it is smaller than\r\n  // changeColorOnScroll.height change it back to\r\n  // props.color (see above)\r\n  changeColorOnScroll: PropTypes.shape({\r\n    height: PropTypes.number.isRequired,\r\n    color: PropTypes.oneOf([\r\n      \"primary\",\r\n      \"info\",\r\n      \"success\",\r\n      \"warning\",\r\n      \"danger\",\r\n      \"transparent\",\r\n      \"white\",\r\n      \"rose\",\r\n      \"dark\"\r\n    ]).isRequired\r\n  })\r\n};\r\n","import moment from 'moment'\r\n\r\nexport default class HandleCommon {\r\n  /* Handle date time */\r\n  static handleDateOfBirth = (date: Date | string) => {\r\n    const dateOfBirth = `${moment(date).format('M')}\r\n            / ${moment(date).format('D')}\r\n            / ${moment(date).format('YYYY')}`\r\n    return dateOfBirth;\r\n  }\r\n\r\n  /* Convert Bytes */\r\n  static formatBytes = (bytes: number, decimals = 2) => {\r\n    if (bytes === 0) return '0 Bytes';\r\n\r\n    const k = 1024;\r\n    const dm = decimals < 0 ? 0 : decimals;\r\n    const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\r\n\r\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n\r\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + ' ' + sizes[i];\r\n  }\r\n}","import { ApiTemplate } from 'services/axios/common-services.const'\r\n\r\nconst GET_PROFILE: ApiTemplate = {\r\n  method: \"GET\",\r\n  URL: ''\r\n}\r\n\r\nconst UPDATE_PROFILE: ApiTemplate = {\r\n  method: \"POST\",\r\n  URL: \"profile/update-info\"\r\n}\r\n\r\nconst UPDATE_AVATAR: ApiTemplate = {\r\n  method: \"POST\",\r\n  URL: `${process.env.REACT_APP_BASE_URL_API}profile/update-avatar`\r\n}\r\n\r\nconst FILTER_DATASET_IN_PROFILE: ApiTemplate = {\r\n  method: \"POST\",\r\n  URL: \"profile/filter-dataset\"\r\n}\r\n\r\nconst UPDATE_ACCOUNT_MODE: ApiTemplate = {\r\n  method: 'GET',\r\n  URL: 'profile/update-mode'\r\n}\r\n\r\nconst DELETE_ACCOUNT: ApiTemplate = {\r\n  method: 'GET',\r\n  URL: 'profile/delete'\r\n}\r\n\r\nconst UPDATE_RECOMMEND: ApiTemplate = {\r\n  method: 'POST',\r\n  URL: 'profile/update-recommend'\r\n}\r\n\r\nexport {\r\n  GET_PROFILE,\r\n  UPDATE_PROFILE,\r\n  UPDATE_AVATAR,\r\n  FILTER_DATASET_IN_PROFILE,\r\n  UPDATE_ACCOUNT_MODE,\r\n  DELETE_ACCOUNT,\r\n  UPDATE_RECOMMEND,\r\n};","import { ApiTemplate } from './../services/axios/common-services.const';\r\nimport {\r\n  GET_PROFILE, UPDATE_AVATAR,\r\n  UPDATE_PROFILE,\r\n  FILTER_DATASET_IN_PROFILE,\r\n  UPDATE_ACCOUNT_MODE, DELETE_ACCOUNT, UPDATE_RECOMMEND\r\n} from 'app/const/api-const/profile-url.const';\r\nimport axios from 'axios';\r\nimport { createResult, requestAPI } from 'services/axios/handle-api.const';\r\nimport { DatasetValues, datasetDefaultValues, Tags, tagsDefaultValues } from './dataset-api';\r\n\r\nexport interface ProfileValues {\r\n  _id: string,\r\n  avatar: string,\r\n  name: string,\r\n  username: any,\r\n  bio: string,\r\n  dateOfBirth: Date | string,\r\n  company: string,\r\n  location: string,\r\n  website: string,\r\n  github: string,\r\n  accountMode: number,\r\n  recommend: Array<Tags>,\r\n  datasets: Array<DatasetValues>,\r\n  createdDate: string | Date,\r\n}\r\n\r\ninterface Filter {\r\n  userId: string,\r\n  visibility: number | string,\r\n  fileType: string,\r\n  sort: number,\r\n}\r\n\r\nexport const defaultProfileValues: ProfileValues = {\r\n  _id: '',\r\n  avatar: '',\r\n  name: '',\r\n  username: '',\r\n  bio: '',\r\n  dateOfBirth: new Date(),\r\n  company: '',\r\n  location: '',\r\n  website: '',\r\n  github: '',\r\n  accountMode: 0,\r\n  datasets: Array(5).fill(datasetDefaultValues),\r\n  recommend: Array(5).fill(tagsDefaultValues),\r\n  createdDate: new Date(),\r\n}\r\n\r\nexport default class ProfileAPI {\r\n  /* Get profile */\r\n  static getProfile = async (username: string) => {\r\n    GET_PROFILE.URL = `profile/${username}`\r\n    return await requestAPI<ProfileValues>(GET_PROFILE)\r\n  }\r\n\r\n  /* Update profile */\r\n  static updateProfile = async (newProfile: ProfileValues) => {\r\n    const data = {\r\n      profile: newProfile\r\n    }\r\n    return await requestAPI(UPDATE_PROFILE, data)\r\n  }\r\n\r\n  /* Update avatar */\r\n  static updateAvatar = async (avatarForm: FormData) => {\r\n    try {\r\n      const result = await axios.post(UPDATE_AVATAR.URL, avatarForm, {\r\n        headers: {\r\n          'Content-Type': 'multipart/form-data',\r\n          \"auth-token\": localStorage.getItem(\"auth-token\"),\r\n        }\r\n      })\r\n      return createResult(result)\r\n    } catch (error) {\r\n      return createResult(null, error)\r\n    }\r\n  }\r\n\r\n  static filterDataset = async (userId: string, visibility: number | string, fileType: string, sort: number) => {\r\n    const data: Filter = {\r\n      userId: userId,\r\n      visibility: visibility,\r\n      fileType: fileType,\r\n      sort: sort\r\n    }\r\n    return await requestAPI(FILTER_DATASET_IN_PROFILE, data)\r\n  }\r\n\r\n  static updateAccountMode = async (mode: number) => {\r\n    const data = {\r\n      mode: mode\r\n    }\r\n    const request: ApiTemplate = {\r\n      method: UPDATE_ACCOUNT_MODE.method,\r\n      URL: `${UPDATE_ACCOUNT_MODE.URL}/${mode}`\r\n    }\r\n    return await requestAPI(request, data)\r\n  }\r\n\r\n  static deleteAccount = async () => {\r\n    return await requestAPI(DELETE_ACCOUNT)\r\n  }\r\n\r\n  static updateRecommend = async (oldRecommend: Array<Tags>, newRecommend: Array<Tags>) => {\r\n    const data = {\r\n      oldRecommend,\r\n      newRecommend\r\n    }\r\n    return await requestAPI(UPDATE_RECOMMEND, data)\r\n  }\r\n}\r\n\r\n","import HeaderLinks from 'app/modules/introduce/components/header-links.component'\r\nimport Header from 'app/modules/introduce/components/header.component'\r\nimport React from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport { RootState } from 'store'\r\nimport Footer from '../footer/footer.component'\r\nimport './not-found-page.scss'\r\n\r\nexport default function NotFoundPage() {\r\n  const user = useSelector((state: RootState) => state.auth.user)\r\n  return (\r\n    <>\r\n      {user.accountId === '' && (\r\n        <Header\r\n          brand='Data world'\r\n          rightLinks={<HeaderLinks />}\r\n          fixed\r\n          color='dark'\r\n        />\r\n      )}\r\n      <img\r\n        className='h-mt-100 img-not-found'\r\n        src={`${process.env.PUBLIC_URL}/images/not-found-page.jpg`}\r\n        alt='Not found'\r\n      />\r\n      <Footer />\r\n    </>\r\n\r\n\r\n  )\r\n}","import { ApiTemplate } from \"services/axios/common-services.const\";\r\n\r\nconst GET_ALL_TAGS_DATASET: ApiTemplate = {\r\n  method: \"GET\",\r\n  URL: `common/all-tags`\r\n}\r\n\r\nconst GET_RECOMMEND_LIST: ApiTemplate = {\r\n  method: \"GET\",\r\n  URL: `common/recommend-list`\r\n}\r\n\r\n\r\nconst GET_TRENDING_DATASET_TAGS: ApiTemplate = {\r\n  method: \"GET\",\r\n  URL: `common/trending`\r\n}\r\n\r\nconst GET_RECOMMEND_ARRAY: ApiTemplate = {\r\n  method: \"GET\",\r\n  URL: `common/my-recommend`\r\n}\r\n\r\nexport {\r\n  GET_ALL_TAGS_DATASET,\r\n  GET_RECOMMEND_LIST,\r\n  GET_TRENDING_DATASET_TAGS,\r\n  GET_RECOMMEND_ARRAY\r\n};\r\n","import {\r\n  GET_ALL_TAGS_DATASET, GET_RECOMMEND_LIST,\r\n  GET_TRENDING_DATASET_TAGS, GET_RECOMMEND_ARRAY\r\n}\r\n  from 'app/const/api-const/common-url.const';\r\nimport { requestAPI } from 'services/axios/handle-api.const';\r\nimport { DatasetValues, DatasetValuesList, Tags } from './dataset-api';\r\n\r\nexport default class CommonAPI {\r\n  /* Get all tags from database */\r\n  static getAllTags = async () => {\r\n    return await requestAPI<Array<Tags>>(GET_ALL_TAGS_DATASET)\r\n  }\r\n\r\n  /* Get recommend list from database */\r\n  static getRecommendList = async () => {\r\n    return await requestAPI<Array<DatasetValues>>(GET_RECOMMEND_LIST)\r\n  }\r\n\r\n  /* get trending dataset and tags dataset */\r\n  static getTrending = async () => {\r\n    return await requestAPI<DatasetValuesList>(GET_TRENDING_DATASET_TAGS)\r\n  }\r\n\r\n  /* get recommend array */\r\n  static getRecommendArray = async () => {\r\n    return await requestAPI<Array<string>>(GET_RECOMMEND_ARRAY)\r\n  }\r\n}","import { useEffect, useState } from 'react';\r\nimport { Redirect, Route, RouteProps } from 'react-router-dom';\r\nimport { useAppDispatch, useAppSelector } from 'redux/hooks';\r\nimport { fetchLogin } from '../redux/authentication-slice';\r\n\r\ninterface PrivateRouteProps extends RouteProps {\r\n  component: any,\r\n}\r\n\r\nfunction PrivateRoute(props: PrivateRouteProps) {\r\n  const { component: Component, ...rest } = props\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const dispatch = useAppDispatch()\r\n\r\n  useEffect(() => {\r\n    async function fetLoginAPI() {\r\n      await fetchLogin(dispatch)\r\n      setIsLoading(false)\r\n    }\r\n    fetLoginAPI()\r\n  }, [dispatch])\r\n\r\n  const user = useAppSelector((state) => state.auth.user);\r\n  return (\r\n    <>\r\n      {!isLoading && (\r\n        <Route\r\n          {...rest}\r\n          render={(props) =>\r\n            user.accountId !== '' ? (\r\n              <Component {...props}></Component>\r\n            ) : (\r\n              <Redirect to='/auth/login'></Redirect>\r\n            )\r\n          }\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default PrivateRoute;\r\n","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport { ReportProblemOutlined } from '@material-ui/icons';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport { Typography } from '@material-ui/core';\r\n\r\ninterface ConfirmDialogProps {\r\n  title: string,\r\n  content: string,\r\n  open: boolean,\r\n  onClose: () => void,\r\n  onAccept: () => void,\r\n  acceptTheme?: 'primary' | 'secondary',\r\n  dialogTheme?: 'warning' | 'confirm'\r\n}\r\nexport default function ConfirmDialog({\r\n  title,\r\n  content,\r\n  open,\r\n  onClose,\r\n  onAccept,\r\n  acceptTheme = 'primary',\r\n  dialogTheme = 'confirm',\r\n}: ConfirmDialogProps) {\r\n  const warning: boolean = dialogTheme === 'warning'\r\n\r\n  const handleClose = (event: React.MouseEvent<HTMLButtonElement, MouseEvent>) => {\r\n    event.stopPropagation()\r\n    onClose()\r\n  };\r\n\r\n  const handleAccept = (event: React.MouseEvent<HTMLButtonElement, MouseEvent>) => {\r\n    event.stopPropagation()\r\n    onAccept()\r\n    onClose()\r\n  }\r\n\r\n  const handleClick = (event: React.MouseEvent<HTMLDivElement, MouseEvent>) => {\r\n    event.stopPropagation()\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Dialog\r\n        open={open}\r\n        onClick={(event) => handleClick(event)}\r\n        aria-labelledby=\"alert-dialog-title\"\r\n        aria-describedby=\"alert-dialog-description\"\r\n      >\r\n        <DialogTitle id=\"alert-dialog-title\" >\r\n          <div className='h-d_flex -align-center'>\r\n            {warning && <ReportProblemOutlined fontSize='large' color='secondary' />}\r\n\r\n            <Typography variant='h6' className='f-weight-700 h-ml-10'>\r\n              {title}\r\n            </Typography>\r\n          </div>\r\n\r\n        </DialogTitle>\r\n\r\n        <DialogContent>\r\n          <DialogContentText id=\"alert-dialog-description\">\r\n            {content}\r\n          </DialogContentText>\r\n        </DialogContent>\r\n\r\n        <DialogActions className='-top-line'>\r\n          <Button\r\n            onClick={(event) => handleClose(event)}\r\n            variant='outlined'\r\n            size='small'\r\n            className='p-round-button'\r\n          >\r\n            Hủy\r\n          </Button>\r\n\r\n          <Button\r\n            onClick={(event) => handleAccept(event)}\r\n            size='small'\r\n            color={acceptTheme}\r\n            variant='contained'\r\n            className='p-round-button'>\r\n            Xác nhận\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}","import React, { useEffect, useState } from 'react'\r\nimport { Avatar, IconButton, Typography } from '@material-ui/core'\r\nimport moment from 'moment'\r\nimport {\r\n  ThumbUpAlt,\r\n  ThumbUpAltOutlined,\r\n  LockOutlined, Public\r\n} from '@material-ui/icons';\r\nimport { Skeleton } from '@material-ui/lab'\r\nimport DatasetAPI, { DatasetValues } from 'api/dataset-api'\r\nimport HandleCommon from 'utils/handle-common';\r\nimport { useHistory } from 'react-router';\r\nimport { useSelector } from 'react-redux';\r\nimport { RootState } from 'store';\r\nimport './dataset-item.scss'\r\nimport { DatasetVisibility } from 'app/modules/dataset/_common/common.const';\r\n\r\n\r\ninterface DatasetItemProps {\r\n  isLoading: boolean,\r\n  handleChangeLike: (position: number, accountId: string, isLike: boolean) => {},\r\n  datasetValues: DatasetValues,\r\n  position: number,\r\n  isHiddenDatasetVisibility?: boolean,\r\n}\r\n\r\nexport default function DatasetItem({\r\n  datasetValues,\r\n  position,\r\n  isLoading,\r\n  handleChangeLike,\r\n  isHiddenDatasetVisibility = true,\r\n}: DatasetItemProps) {\r\n\r\n  const [like, setLike] = useState<boolean>(false)\r\n  const user = useSelector((state: RootState) => (state.auth.user))\r\n  const history = useHistory()\r\n\r\n  const changeLike = async (isLike: boolean) => {\r\n    await DatasetAPI.likeOrUnLikeDataset(datasetValues.dataset._id)\r\n    handleChangeLike(position, user.accountId, isLike)\r\n  }\r\n\r\n  const gotoDataset = () => {\r\n    history.push(`/dataset/${datasetValues.username}/${datasetValues.dataset.url}`)\r\n  }\r\n\r\n  useEffect(() => {\r\n    const index = datasetValues.dataset.like.findIndex(item => item === user.accountId)\r\n    setLike(index >= 0 ? true : false)\r\n\r\n  }, [datasetValues.dataset.like, user.accountId])\r\n\r\n  return (\r\n    <div className='b-dataset-item'>\r\n      <div className='b-info'>\r\n        {isLoading ?\r\n          <Skeleton animation=\"wave\" variant=\"rect\" className='p-avatar' /> :\r\n          <Avatar\r\n            aria-label=\"avatar\"\r\n            variant='square'\r\n            className='p-avatar -align-self-center'\r\n            src={datasetValues.dataset.thumbnail}\r\n            onClick={gotoDataset}\r\n          />\r\n        }\r\n\r\n        <div className='p-info-text h-ml-14'>\r\n          <div className='h-d_flex -align-center h-mb-6'>\r\n            {isLoading ?\r\n              <>\r\n                <Skeleton height={20} width={150} />\r\n                <Skeleton variant='rect' height={30} width={30} className='h-ml-10' />\r\n              </>\r\n              :\r\n              <>\r\n                <Typography\r\n                  onClick={gotoDataset}\r\n                  variant=\"body1\"\r\n                  className='f-weight-700 -cursor-pointer h-mr-4'\r\n                >\r\n                  {datasetValues.dataset.title}\r\n                </Typography>\r\n                {!isHiddenDatasetVisibility &&\r\n                  <>\r\n                    {datasetValues.dataset.visibility === DatasetVisibility.PRIVATE_DATASET ?\r\n                      <LockOutlined color='action' fontSize='small' /> :\r\n                      <Public color='action' fontSize='small' />\r\n                    }\r\n                  </>\r\n                }\r\n              </>\r\n            }\r\n          </div>\r\n\r\n          <div className='h-d_flex'>\r\n            {isLoading ?\r\n              <>\r\n                <Skeleton width={50} height={10} />\r\n                <Skeleton height={10} width={100} className='h-ml-8' />\r\n              </>\r\n              :\r\n              <>\r\n                <Typography variant=\"body2\" className='p-gray-color-typography'>\r\n                  <a href={`/profile/${datasetValues.username}`}>{datasetValues.name}</a>\r\n                </Typography>\r\n                <Typography variant=\"body2\" className='p-gray-color-typography h-ml-6'>\r\n                  <span className='h-mr-6'>•</span>\r\n                  Cập nhật {moment(datasetValues.dataset.lastUpdate).fromNow()}\r\n                </Typography>\r\n              </>\r\n\r\n            }\r\n          </div>\r\n\r\n          <div className='h-d_flex'>\r\n            {isLoading ?\r\n              <>\r\n                <Skeleton width={50} height={10} />\r\n                <Skeleton height={10} width={100} className='h-ml-8' />\r\n              </>\r\n              :\r\n              <>\r\n                <Typography variant=\"body2\" className='p-gray-color-typography'>\r\n                  Số lượng file: {datasetValues.dataset.files.length}\r\n                </Typography>\r\n                <Typography variant=\"body2\" className='p-gray-color-typography h-ml-6'>\r\n                  <span className='h-mr-6'>•</span>\r\n                  Dung lượng: {HandleCommon.formatBytes(datasetValues.dataset.size)}\r\n                </Typography>\r\n              </>\r\n\r\n            }\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div>\r\n        {!isLoading &&\r\n          <>\r\n            {like ?\r\n              <IconButton\r\n                onClick={() => changeLike(false)}\r\n              >\r\n                <ThumbUpAlt color='primary' />\r\n              </IconButton> :\r\n              <IconButton\r\n                onClick={() => changeLike(true)}\r\n              >\r\n                <ThumbUpAltOutlined />\r\n              </IconButton>\r\n            }\r\n          </>\r\n        }\r\n\r\n        {isLoading ?\r\n          <Skeleton animation=\"wave\" height={10} width={100} className='h-ml-10' /> :\r\n          <Typography variant=\"body2\" className='p-gray-color-typography'>\r\n            Lượt thích: {datasetValues.dataset.countLike}\r\n          </Typography>\r\n        }\r\n      </div>\r\n    </div>\r\n  )\r\n}","import {Cropper} from \"react-cropper\";\r\nimport \"cropperjs/dist/cropper.css\";\r\nimport './crop-image.scss'\r\n\r\ninterface CropImageProps {\r\n  src: string,\r\n  setCropper: any\r\n}\r\nexport default function CropImage(props: CropImageProps) {\r\n  const {src, setCropper} = props\r\n  return (\r\n    <Cropper\r\n      className='crop-image'\r\n      src={src}\r\n      viewMode={1}\r\n      guides={true}\r\n      initialAspectRatio={11 / 2}\r\n      background={false}\r\n      responsive={true}\r\n      autoCropArea={1}\r\n      checkOrientation={false}\r\n      onInitialized={(instance) => {\r\n        setCropper(instance);\r\n      }}\r\n    />\r\n  )\r\n}","import React, { useEffect, useState } from 'react';\r\nimport {\r\n  Avatar,\r\n  Card,\r\n  CardActionArea,\r\n  CardContent,\r\n  CardHeader,\r\n  CardMedia,\r\n  IconButton,\r\n  Tooltip,\r\n  Typography\r\n} from '@material-ui/core';\r\nimport {\r\n  ThumbUp, ThumbUpOutlined\r\n} from '@material-ui/icons';\r\nimport { useHistory } from 'react-router';\r\nimport 'app/modules/dataset/dataset-list/css/dataset-post.scss';\r\nimport moment from 'moment'\r\nimport DatasetAPI, { DatasetValues } from 'api/dataset-api';\r\nimport HandleCommon from 'utils/handle-common';\r\nimport { Skeleton } from '@material-ui/lab';\r\nimport { useSelector } from 'react-redux';\r\nimport { RootState } from 'store';\r\nimport { DatasetListProps } from '../pages/dataset-list.template';\r\ninterface DatasetPostProps extends DatasetListProps {\r\n  datasetValues: DatasetValues\r\n}\r\n\r\nexport default function DatasetPost(props: DatasetPostProps) {\r\n  const { datasetValues, self } = props\r\n  const { state, handleChangeLike } = self\r\n  const [like, setLike] = useState<boolean>(false)\r\n  const history = useHistory()\r\n  const user = useSelector((state: RootState) => (state.auth.user))\r\n\r\n  const changeLike = async (isLike: boolean) => {\r\n    handleChangeLike(datasetValues.dataset._id, isLike, user.accountId)\r\n    await DatasetAPI.likeOrUnLikeDataset(datasetValues.dataset._id)\r\n  }\r\n\r\n  const gotoProfileOwner = () => {\r\n    history.push(`/profile/${datasetValues.username}`)\r\n  }\r\n\r\n  const gotoDataset = () => {\r\n    history.push(`/dataset/${datasetValues.username}/${datasetValues.dataset.url}`)\r\n  }\r\n\r\n  useEffect(() => {\r\n    const index = datasetValues.dataset.like.findIndex(item => item === user.accountId)\r\n    setLike(index >= 0 ? true : false)\r\n\r\n  }, [datasetValues.dataset.like, user.accountId])\r\n\r\n  return (\r\n    <Card className='b-card-post'>\r\n      <CardHeader\r\n        avatar={state.isLoading ?\r\n          <Skeleton animation=\"wave\" variant=\"circle\" width={40} height={40} /> :\r\n          <Avatar\r\n            aria-label=\"avatar\"\r\n            src={datasetValues.avatar}\r\n            onClick={gotoProfileOwner}\r\n          />}\r\n        action={!state.isLoading &&\r\n          <>\r\n            {like ?\r\n              <IconButton\r\n                onClick={() => changeLike(false)}\r\n                className='p-button-action h-mt-14 h-mr-8'\r\n              >\r\n                <ThumbUp color='primary' />\r\n              </IconButton> :\r\n              <IconButton\r\n                onClick={() => changeLike(true)}\r\n                className='p-button-action h-mt-14 h-mr-8'\r\n              >\r\n                <ThumbUpOutlined />\r\n              </IconButton>\r\n            }\r\n          </>\r\n        }\r\n        title={state.isLoading ?\r\n          <Skeleton animation=\"wave\" height={10} width=\"75%\" /> :\r\n          <Tooltip title={datasetValues.name}>\r\n            <Typography\r\n              onClick={gotoProfileOwner}\r\n              className='p-account-name'>\r\n              {datasetValues.name}\r\n            </Typography>\r\n          </Tooltip>\r\n        }\r\n        subheader={state.isLoading ?\r\n          <Skeleton animation=\"wave\" height={10} width=\"45%\" /> :\r\n          `Cập nhật ${moment(datasetValues.dataset.lastUpdate).fromNow()}`\r\n        }\r\n      />\r\n      <CardActionArea onClick={gotoDataset} className='b-content'>\r\n        {state.isLoading ?\r\n          <Skeleton className='p-banner' /> :\r\n          <CardMedia\r\n            className='p-banner'\r\n            image={datasetValues.dataset.banner}\r\n          />\r\n        }\r\n\r\n        <CardContent>\r\n          {state.isLoading ?\r\n            <Skeleton height={20} width=\"50%\" /> :\r\n            <Tooltip title={datasetValues.dataset.title}>\r\n              <Typography\r\n                gutterBottom\r\n                variant=\"body1\"\r\n                className='f-weight-700 p-title'\r\n              >\r\n                {datasetValues.dataset.title}\r\n              </Typography>\r\n            </Tooltip>\r\n          }\r\n\r\n          {state.isLoading ?\r\n            <Skeleton height={10} width=\"40%\" /> :\r\n            <Typography variant=\"body2\" className='p-color-content'>\r\n              {datasetValues.dataset.countLike} lượt thích\r\n              • {datasetValues.dataset.downloads} lượt tải về\r\n            </Typography>\r\n          }\r\n\r\n          {state.isLoading ?\r\n            <Skeleton height={10} width=\"45%\" /> :\r\n            <div className='h-d_flex -align-center'>\r\n              <Typography variant=\"body2\" className='p-color-content'>\r\n                Số lượng file: {datasetValues.dataset.files.length}\r\n              </Typography>\r\n\r\n              <Typography variant='body2' className='h-ml-4'>\r\n                ({datasetValues.dataset.fileTypes.map((item, index) =>\r\n                <span key={index}>{item}</span>)\r\n                })\r\n              </Typography>\r\n            </div>\r\n\r\n          }\r\n\r\n          {state.isLoading ?\r\n            <Skeleton height={10} width=\"70%\" /> :\r\n            <Typography variant=\"body2\" className='p-color-content'>\r\n              Dung lượng: {HandleCommon.formatBytes(datasetValues.dataset.size)}\r\n            </Typography>\r\n          }\r\n        </CardContent>\r\n      </CardActionArea>\r\n    </Card>\r\n  )\r\n}","import {\r\n  Button,\r\n  InputAdornment,\r\n  MenuItem,\r\n  Popover,\r\n  Select,\r\n  TextField,\r\n  Typography\r\n} from '@material-ui/core';\r\nimport { Search } from '@material-ui/icons';\r\nimport { Autocomplete, ToggleButton, ToggleButtonGroup } from '@material-ui/lab';\r\nimport CommonAPI from 'api/common-api';\r\nimport { QueryString, Tags } from 'api/dataset-api';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { Controller, useForm } from 'react-hook-form';\r\nimport './filter-popover.scss';\r\n\r\ninterface FilterPopoverProps {\r\n  anchorEl: HTMLButtonElement | null,\r\n  onClose: () => void,\r\n  applyFilter: (filter: QueryString) => void\r\n}\r\n\r\nexport interface FilterForm {\r\n  minSize: number,\r\n  maxSize: number,\r\n  typeSizeMin: number,\r\n  typeSizeMax: number\r\n}\r\n\r\nexport default function FilterPopover({ anchorEl, onClose, applyFilter }: FilterPopoverProps) {\r\n  const [fileType, setFileType] = useState<string>('');\r\n  const [allTags, setAllTags] = useState<Array<Tags>>([])\r\n  const [selectedTags, setSelectedTags] = useState<Array<Tags>>([])\r\n  const defaultValues: FilterForm = {\r\n    minSize: 0,\r\n    maxSize: 0,\r\n    typeSizeMin: 0,\r\n    typeSizeMax: 0\r\n  }\r\n  const { register, errors, handleSubmit, control, reset, watch } =\r\n    useForm<FilterForm>({ defaultValues: defaultValues })\r\n\r\n  const handleSetFileType = (event: React.MouseEvent<HTMLElement>, newFileType: string) => {\r\n    setFileType(newFileType);\r\n  };\r\n\r\n  const handleSelectTags = (newValue: any) => {\r\n    setSelectedTags(newValue)\r\n  }\r\n\r\n  const handleApply = (data: FilterForm) => {\r\n    reset(data)\r\n    const { minSizeKB, maxSizeKB } = calculateMinSizeAndMaxSizeKB()\r\n    let queryString: QueryString = {}\r\n\r\n    if (selectedTags.length > 0) queryString.tags = selectedTags.map(tags => tags.name)\r\n    if (fileType) queryString.fileType = fileType\r\n    if (maxSizeKB !== 0 || minSizeKB !== 0) {\r\n      queryString = {\r\n        ...queryString,\r\n        minSize: minSizeKB.toString(),\r\n        maxSize: maxSizeKB.toString()\r\n      }\r\n    }\r\n\r\n    applyFilter(queryString)\r\n    onClose()\r\n  }\r\n\r\n  const calculateMinSizeAndMaxSizeKB = () => {\r\n    return {\r\n      minSizeKB: watch('minSize') * Math.pow(1024, watch('typeSizeMin')),\r\n      maxSizeKB: watch('maxSize') * Math.pow(1024, watch('typeSizeMax'))\r\n    }\r\n  }\r\n\r\n  const checkDisableButton = () => {\r\n    const { minSizeKB, maxSizeKB } = calculateMinSizeAndMaxSizeKB()\r\n    return (maxSizeKB === 0 && minSizeKB === 0)\r\n  }\r\n\r\n  const checkMaxBiggerThanMin = () => {\r\n    const { minSizeKB, maxSizeKB } = calculateMinSizeAndMaxSizeKB()\r\n    return (minSizeKB < maxSizeKB)\r\n      || (maxSizeKB === 0 && minSizeKB === 0)\r\n      || 'Max size phải lớn hơn min size'\r\n  }\r\n\r\n  useEffect(() => {\r\n    const getTags = async () => {\r\n      if (Boolean(anchorEl)) {\r\n        const result = await CommonAPI.getAllTags()\r\n        setAllTags(result.data)\r\n      }\r\n    }\r\n    getTags()\r\n  }, [anchorEl])\r\n\r\n  return (\r\n    <Popover\r\n      open={Boolean(anchorEl)}\r\n      anchorEl={anchorEl}\r\n      keepMounted\r\n      className='b-filter-popover'\r\n      onClose={onClose}\r\n      anchorOrigin={{\r\n        vertical: 'bottom',\r\n        horizontal: 'left',\r\n      }}\r\n      transformOrigin={{\r\n        vertical: 'top',\r\n        horizontal: 'right',\r\n      }}\r\n    >\r\n      <form onSubmit={handleSubmit(handleApply)}>\r\n        <div className='b-content'>\r\n          <div className='p-field-item'>\r\n            <Typography>Tags</Typography>\r\n\r\n            <Autocomplete\r\n              multiple\r\n              className='h-mt-6 p-search-tags'\r\n              fullWidth\r\n              value={selectedTags}\r\n              size='small'\r\n              onChange={(event, newValue) => handleSelectTags(newValue)}\r\n              options={allTags ? allTags : []}\r\n              getOptionLabel={(option) => option.name}\r\n              renderInput={(params) =>\r\n                <TextField\r\n                  {...params}\r\n                  placeholder=\"Tìm Tags..\"\r\n                  variant=\"outlined\"\r\n                  InputProps={{\r\n                    ...params.InputProps,\r\n                    startAdornment: (\r\n                      <>\r\n                        <InputAdornment position=\"start\">\r\n                          <Search />\r\n                        </InputAdornment>\r\n                        {params.InputProps.startAdornment}\r\n                      </>\r\n                    ),\r\n                  }}\r\n                />\r\n              }\r\n            />\r\n          </div>\r\n\r\n          <div className='p-field-item h-mt-20'>\r\n            <Typography>Dung lượng</Typography>\r\n            <div className='p-item h-mt-6'>\r\n              <TextField\r\n                variant='outlined'\r\n                size='small'\r\n                name='minSize'\r\n                type='number'\r\n                className='p-text-field'\r\n                inputRef={register({ min: 0 })}\r\n              />\r\n              <Controller\r\n                control={control}\r\n                name='typeSizeMin'\r\n                as={\r\n                  <Select\r\n                    variant='outlined'\r\n                    className='p-select h-ml-10'\r\n                  >\r\n                    <MenuItem value={0}>Bytes</MenuItem>\r\n                    <MenuItem value={1}>KB</MenuItem>\r\n                    <MenuItem value={2}>MB</MenuItem>\r\n                    <MenuItem value={3}>GB</MenuItem>\r\n                  </Select>\r\n                }\r\n              />\r\n\r\n              <Typography className='p-text h-ml-10 h-mr-10'>Đến</Typography>\r\n\r\n              <TextField\r\n                variant='outlined'\r\n                name='maxSize'\r\n                type='number'\r\n                size='small'\r\n                inputRef={register({ validate: checkMaxBiggerThanMin })}\r\n                className='p-text-field'\r\n              />\r\n\r\n              <Controller\r\n                control={control}\r\n                name='typeSizeMax'\r\n                as={\r\n                  <Select\r\n                    variant='outlined'\r\n                    className='p-select h-ml-10'\r\n                  >\r\n                    <MenuItem value={0}>Bytes</MenuItem>\r\n                    <MenuItem value={1}>KB</MenuItem>\r\n                    <MenuItem value={2}>MB</MenuItem>\r\n                    <MenuItem value={3}>GB</MenuItem>\r\n                  </Select>\r\n                }\r\n              />\r\n            </div>\r\n            {errors.minSize &&\r\n              <Typography className='p-validate-error'>Dung lượng không được nhỏ hơn 0</Typography>\r\n            }\r\n\r\n            {errors.maxSize &&\r\n              <Typography className='p-validate-error'>{errors.maxSize.message}</Typography>\r\n            }\r\n          </div>\r\n\r\n          <div className='p-field-item h-mt-20'>\r\n            <Typography>Kiểu file</Typography>\r\n            <ToggleButtonGroup\r\n              value={fileType}\r\n              className='h-mt-6'\r\n              exclusive\r\n              onChange={handleSetFileType}\r\n            >\r\n              <ToggleButton size='small' value=\"csv\">\r\n                CSV\r\n            </ToggleButton>\r\n              <ToggleButton size='small' value=\"json\">\r\n                JSON\r\n            </ToggleButton>\r\n            </ToggleButtonGroup>\r\n          </div>\r\n        </div>\r\n\r\n        <div className='p-action'>\r\n          <Button\r\n            disabled={selectedTags.length === 0 && !fileType && checkDisableButton()}\r\n            variant='contained'\r\n            className='p-button-save-color'\r\n            type='submit'\r\n          >\r\n            Áp dụng\r\n          </Button>\r\n        </div>\r\n      </form>\r\n    </Popover>\r\n  )\r\n}","import {\r\n  Button,\r\n  InputAdornment,\r\n  TextField\r\n} from '@material-ui/core';\r\nimport {\r\n  FilterList, Search\r\n} from '@material-ui/icons';\r\nimport { QueryString } from 'api/dataset-api';\r\nimport './search-bar.scss';\r\nimport React, { useState } from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport queryString from 'query-string'\r\nimport FilterPopover from './filter-popover/filter-popover.component';\r\nimport { useHistory } from 'react-router';\r\n\r\ninterface SearchForm {\r\n  title: string,\r\n}\r\n\r\n\r\nexport default function SearchBar() {\r\n  const [anchorEl, setAnchorEl] = useState<HTMLButtonElement | null>(null)\r\n  const [filter, setFilter] = useState<QueryString>()\r\n  const history = useHistory()\r\n  const { register, handleSubmit, watch } = useForm<SearchForm>({\r\n    defaultValues: {\r\n      title: '',\r\n    }\r\n  })\r\n\r\n  const openFilterPopover = (event: React.MouseEvent<HTMLButtonElement>) => {\r\n    event.preventDefault()\r\n    setAnchorEl(event.currentTarget)\r\n  }\r\n\r\n  const onCloseFilterPopover = () => {\r\n    setAnchorEl(null)\r\n  }\r\n\r\n  const getSeachString = () => {\r\n    let search: QueryString = { ...filter }\r\n    const title = watch('title')\r\n    if (title) {\r\n      search = { ...filter, title: title }\r\n    }\r\n\r\n    return queryString.stringify(search, { arrayFormat: 'index' })\r\n  }\r\n\r\n  const submitData = (data: SearchForm) => {\r\n    const searchQueryString = getSeachString()\r\n    history.push(`/dataset/search?${searchQueryString}`)\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <form className='b-search-bar' onSubmit={handleSubmit(submitData)}>\r\n        <TextField\r\n          fullWidth\r\n          inputRef={register}\r\n          type='search'\r\n          name='title'\r\n          className='p-search-field h-mt-20'\r\n          placeholder='Tìm kiếm...'\r\n          InputProps={{\r\n            endAdornment: (\r\n              <InputAdornment position=\"end\">\r\n                <Button\r\n                  variant='outlined'\r\n                  type='button'\r\n                  onClick={openFilterPopover}\r\n                  startIcon={<FilterList />}\r\n                >\r\n                  Bộ lọc\r\n            </Button>\r\n              </InputAdornment>\r\n            )\r\n          }}\r\n          variant=\"outlined\"\r\n        />\r\n\r\n        <Button\r\n          variant='contained'\r\n          type='submit'\r\n          color='primary'\r\n          disabled={!getSeachString()}\r\n          className='p-button-search h-mt-20'\r\n          startIcon={<Search />}\r\n        />\r\n      </form>\r\n\r\n      <FilterPopover\r\n        anchorEl={anchorEl}\r\n        onClose={onCloseFilterPopover}\r\n        applyFilter={setFilter}\r\n      />\r\n    </>\r\n  )\r\n}","import { Button, CardMedia, Container, Grid, Typography } from '@material-ui/core';\r\nimport { Add, FiberNewOutlined, StarsOutlined, TrendingUp } from '@material-ui/icons';\r\nimport { Skeleton } from '@material-ui/lab';\r\nimport DatasetPost from 'app/modules/dataset/dataset-list/components/dataset-post.component';\r\nimport 'app/modules/dataset/dataset-list/css/dataset-list.scss';\r\nimport clsx from 'clsx';\r\nimport Footer from 'dataworld/blocks/footer/footer.component';\r\nimport SearchBar from 'dataworld/blocks/search-bar/search-bar.component';\r\nimport React from 'react';\r\nimport DatasetList from './dataset-list.component';\r\n\r\nexport interface DatasetListProps {\r\n  self: DatasetList\r\n}\r\n\r\nexport default function DatasetListTemplate({ self }: DatasetListProps) {\r\n  const { state, handleSearchAlls, handleCreateDataset } = self\r\n\r\n  return (\r\n    <>\r\n      <Container style={{ maxWidth: '100%' }} className='h-mt-100 h-mb-100'>\r\n        <div className='t-dataset-list'>\r\n          <div className='h-d_flex -justify-space-between'>\r\n            <div>\r\n              <Typography variant='h4' className='f-weight-700'>Datasets</Typography>\r\n\r\n              <Typography className='h-mt-16' style={{ width: '400px' }}>\r\n                Tìm kiếm, chia sẻ và quản lý datasets của bạn tốt hơn cùng DataWorld.\r\n              </Typography>\r\n\r\n              <Button\r\n                variant='contained'\r\n                color='primary'\r\n                className='p-round-button h-mt-16'\r\n                onClick={handleCreateDataset}\r\n                startIcon={<Add />}\r\n              >\r\n                Tạo Dataset\r\n              </Button>\r\n            </div>\r\n\r\n            <p />\r\n\r\n            <CardMedia\r\n              image={`${process.env.PUBLIC_URL}/images/list-background.png`}\r\n              style={{ height: '300px', width: '400px' }}\r\n            />\r\n          </div>\r\n\r\n          <div className='b-header h-mt-32'>\r\n            <SearchBar />\r\n\r\n            <div className='popular-tags h-mt-10'>\r\n              {state.datasetValuesList.tagsDatasets.map((tags, index) =>\r\n                <div key={index}>\r\n                  {\r\n                    state.isLoading ?\r\n                      <Skeleton width={100} height={50} className='h-ml-8' /> :\r\n                      <Button\r\n                        key={index}\r\n                        variant='outlined'\r\n                        onClick={() => handleSearchAlls({ tags: [tags.name] })}\r\n                        className={clsx({\r\n                          'h-ml-8': index !== 0\r\n                        })}\r\n                      >\r\n                        <span className='f-weight-700'>{tags.name}</span>\r\n                        <span className='h-ml-6 p-gray-color-typography'>{tags.datasetsLength}</span>\r\n                      </Button>\r\n                  }\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          <div className='b-list h-mt-100'>\r\n            <div className='b-list-by-tags h-mt-32'>\r\n              <div className='p-title'>\r\n                <div>\r\n                  {!state.isLoading && <TrendingUp className='h-mr-20' />}\r\n\r\n                  {state.isLoading ?\r\n                    <Skeleton width={200} height={30} /> :\r\n                    <Typography variant='h5' className='f-weight-700'>\r\n                      Top lượt thích\r\n                  </Typography>}\r\n                </div>\r\n\r\n                {!state.isLoading &&\r\n                  <Button className='p-round-button' onClick={() => handleSearchAlls({ like: 'desc' })}>\r\n                    <Typography className='f-weight-700'>Tất cả</Typography>\r\n                  </Button>\r\n                }\r\n              </div>\r\n\r\n              <div className='h-mt-32'>\r\n                <Grid container spacing={3}>\r\n                  {state.datasetValuesList.topDatasets.map((dataset, index) =>\r\n                    <Grid item xs={3} key={index}>\r\n                      <DatasetPost\r\n                        datasetValues={dataset}\r\n                        self={self}\r\n                      />\r\n                    </Grid>\r\n                  )}\r\n                </Grid>\r\n              </div>\r\n            </div>\r\n\r\n            <div className='b-list-by-tags h-mt-32'>\r\n              <div className='p-title'>\r\n                <div>\r\n                  {!state.isLoading && <FiberNewOutlined className='h-mr-20' />}\r\n\r\n                  {state.isLoading ?\r\n                    <Skeleton width={200} height={30} /> :\r\n                    <Typography variant='h5' className='f-weight-700'>Mới cập nhật</Typography>\r\n                  }\r\n                </div>\r\n\r\n                {!state.isLoading &&\r\n                  <Button className='p-round-button' onClick={() => handleSearchAlls({ like: 'desc' })}>\r\n                    <Typography className='f-weight-700'>Tất cả</Typography>\r\n                  </Button>\r\n                }\r\n              </div>\r\n\r\n              <div className='h-mt-32'>\r\n                <Grid container spacing={3}>\r\n                  {state.datasetValuesList.topDatasets.map((dataset, index) =>\r\n                    <Grid item xs={3} key={index}>\r\n                      <DatasetPost\r\n                        datasetValues={dataset}\r\n                        self={self}\r\n                      />\r\n                    </Grid>\r\n                  )}\r\n                </Grid>\r\n              </div>\r\n            </div>\r\n\r\n            <div className='b-list-by-tags h-mt-32'>\r\n              <div className='p-title'>\r\n                <div>\r\n                  {!state.isLoading && <StarsOutlined className='h-mr-20' />}\r\n                  {state.isLoading ?\r\n                    <Skeleton width={200} height={30} /> :\r\n                    <Typography variant='h5' className='f-weight-700'>Gợi ý của bạn</Typography>\r\n                  }\r\n                </div>\r\n\r\n                {!state.isLoading &&\r\n                  <Button className='p-round-button' onClick={() => handleSearchAlls({ like: 'desc' })}>\r\n                    <Typography className='f-weight-700'>Tất cả</Typography>\r\n                  </Button>\r\n                }\r\n              </div>\r\n\r\n              <div className='h-mt-32'>\r\n                <Grid container spacing={3}>\r\n                  {state.datasetValuesList.topDatasets.map((dataset, index) =>\r\n                    <Grid item xs={3} key={index}>\r\n                      <DatasetPost\r\n                        datasetValues={dataset}\r\n                        self={self}\r\n                      />\r\n                    </Grid>\r\n                  )}\r\n                </Grid>\r\n              </div>\r\n            </div>\r\n\r\n            <div className='h-mt-32'>\r\n              {state.isLoading ?\r\n                <Skeleton width={300} height={30} /> :\r\n                <Typography variant='h5' className='f-weight-700'>Top tags sử dụng nhiều</Typography>\r\n              }\r\n            </div>\r\n\r\n            {state.datasetValuesList.tagsDatasets.map((tags, tagsIndex) =>\r\n              <div className='b-list-by-tags h-mt-32' key={tagsIndex}>\r\n                <div className='p-title'>\r\n                  <div className='h-ml-8'>\r\n                    {!state.isLoading && <TrendingUp />}\r\n                    {state.isLoading ?\r\n                      <Skeleton width=\"20%\" height={20} /> :\r\n                      <Typography variant='h5' className='f-weight-700 h-ml-20'>{tags.name}</Typography>\r\n                    }\r\n                  </div>\r\n                  {!state.isLoading &&\r\n                    <Button className='p-round-button' onClick={() => handleSearchAlls({ tags: [tags.name] })}>\r\n                      <Typography className='f-weight-700'>Tất cả</Typography>\r\n                    </Button>\r\n                  }\r\n                </div>\r\n\r\n                <div className='h-mt-32'>\r\n                  <Grid container spacing={3}>\r\n                    {tags.datasets?.map((dataset, datasetsIndex) =>\r\n                      <Grid item xs={3} key={datasetsIndex}>\r\n                        <DatasetPost\r\n                          datasetValues={dataset}\r\n                          self={self}\r\n                        />\r\n                      </Grid>\r\n                    )}\r\n                  </Grid>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          <Footer />\r\n        </div>\r\n      </Container>\r\n    </>\r\n  )\r\n}\r\n\r\n","import CommonAPI from 'api/common-api'\r\nimport {\r\n  Dataset,\r\n  datasetDefaultValues,\r\n  DatasetValues, DatasetValuesList,\r\n  QueryString, tagsDefaultValues\r\n} from 'api/dataset-api'\r\nimport queryString from 'query-string'\r\nimport React from 'react'\r\nimport { RouteComponentProps } from 'react-router'\r\nimport DataSetListTemplate from './dataset-list.template'\r\ninterface DatasetListState {\r\n  isLoading: boolean,\r\n  datasetValuesList: DatasetValuesList,\r\n}\r\n\r\nexport default class DatasetList extends React.Component<RouteComponentProps<any>, DatasetListState> {\r\n  state: DatasetListState = {\r\n    isLoading: true,\r\n    datasetValuesList: {\r\n      topDatasets: Array(4).fill(datasetDefaultValues),\r\n      newDatasets: Array(4).fill(datasetDefaultValues),\r\n      recommend: Array(4).fill(datasetDefaultValues),\r\n      tagsDatasets: Array(5).fill(tagsDefaultValues)\r\n    }\r\n  }\r\n\r\n  componentDidMount = async () => {\r\n    document.title = 'Danh sách dataset'\r\n    const result = await CommonAPI.getTrending()\r\n    this.setState({\r\n      ...this.state,\r\n      isLoading: false,\r\n      datasetValuesList: result.data,\r\n    })\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <DataSetListTemplate self={this} />\r\n    )\r\n  }\r\n\r\n  handleSearchAlls = (search: QueryString) => {\r\n    const stringified = queryString.stringify(search, { arrayFormat: 'index' })\r\n    this.props.history.push(`/dataset/search?${stringified}`)\r\n  }\r\n\r\n  handleChangeLike = async (datasetId: string, isLike: boolean, userId: string) => {\r\n    const tempTagsDatasets = [...this.state.datasetValuesList.tagsDatasets]\r\n    const tempTopDatasets = this.setArrayLikeOrUnlike(this.state.datasetValuesList.topDatasets, datasetId, isLike, userId)\r\n    const tempNewDatasets = this.setArrayLikeOrUnlike(this.state.datasetValuesList.newDatasets, datasetId, isLike, userId)\r\n    const tempRecommend = this.setArrayLikeOrUnlike(this.state.datasetValuesList.recommend, datasetId, isLike, userId)\r\n    tempTagsDatasets.forEach(item =>\r\n      item.datasets = this.setArrayLikeOrUnlike(item.datasets || [], datasetId, isLike, userId\r\n      ))\r\n\r\n    this.setState((prev) => ({\r\n      ...this.state,\r\n      datasetValuesList: {\r\n        topDatasets: tempTopDatasets,\r\n        newDatasets: tempNewDatasets,\r\n        recommend: tempRecommend,\r\n        tagsDatasets: tempTagsDatasets\r\n      }\r\n    }))\r\n  }\r\n\r\n  handleCreateDataset = () => {\r\n    this.props.history.push('dataset/create')\r\n  }\r\n\r\n  private setArrayLikeOrUnlike = (targetArray: Array<DatasetValues>, datasetId: string, isLike: boolean, userId: string)\r\n    : Array<DatasetValues> => {\r\n    return targetArray.map(item => {\r\n      const isDataset = item.dataset._id === datasetId\r\n      if (!isDataset) {\r\n        return item\r\n      }\r\n\r\n      const newDataset: Dataset = {\r\n        ...item.dataset,\r\n        countLike: isLike ? item.dataset.countLike + 1 : item.dataset.countLike - 1,\r\n        like: !isLike ? item.dataset.like.filter(item => item !== userId) : [],\r\n      }\r\n\r\n      if (isLike) newDataset.like.push(userId)\r\n\r\n      return {\r\n        ...item,\r\n        dataset: newDataset,\r\n      }\r\n    })\r\n  }\r\n}\r\n","import React from 'react';\r\nimport { Editor } from '@tinymce/tinymce-react';\r\n\r\ninterface TinyMCEEditorProps {\r\n  setValues: (change: string) => void,\r\n  values: string,\r\n  height: number\r\n}\r\n\r\nexport default function TinyMCEEditor(props: TinyMCEEditorProps) {\r\n  const { setValues, height, values } = props\r\n\r\n  const handleEditorChange = (currentContent: string, editor: any) => {\r\n    setValues(currentContent)\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Editor\r\n        apiKey=\"nk9oepw03pa30b9xtpvicomyk4o56i71w4ge601a0f6sc835\"\r\n        value={values}\r\n        init={{\r\n          height: height,\r\n          menubar: false,\r\n          plugins: [\r\n            ' spellchecker,insertdatetime,directionality,fullscreen,noneditable,visualchars,nonbreaking,template, hr',\r\n            'advlist autolink lists link image charmap print preview anchor pagebreak codesample ',\r\n            'searchreplace visualblocks  fullscreen ',\r\n            'insertdatetime media table paste  help wordcount save emoticons ',\r\n          ],\r\n          toolbar:\r\n            `undo redo | hr |fontselect fontsizeselect formatselect | bold italic backcolor| \r\n            alignleft aligncenter alignright alignjustify | bullist numlist outdent indent |  \r\n            link anchor | print preview  fullscreen  | \r\n            forecolor backcolor charmap emoticons| checklist pagebreak  | help`,\r\n        }}\r\n        onEditorChange={handleEditorChange}\r\n      />\r\n    </>\r\n  )\r\n}","import React from 'react';\r\nimport {\r\n  FormControlLabel,\r\n  Radio,\r\n  RadioGroup,\r\n  Typography\r\n} from '@material-ui/core';\r\nimport { LockOutlined, PublicOutlined } from '@material-ui/icons';\r\nimport { Controller } from 'react-hook-form';\r\nimport 'app/modules/dataset/dataset-create/css/dataset-select-visibility.scss';\r\nimport { DatasetVisibility } from '../../_common/common.const';\r\n\r\n\r\ninterface DatasetSelectVisibilityProps {\r\n  control: any,\r\n}\r\n\r\nexport default function DatasetSelectVisibility(props: DatasetSelectVisibilityProps) {\r\n  const { control } = props\r\n\r\n  return (\r\n    <div className='h-mt-12 p-bottom-border h-mb-32'>\r\n      <Controller\r\n        control={control}\r\n        name=\"visibility\"\r\n        as={\r\n          <RadioGroup\r\n            aria-label=\"dataset-visibility\"\r\n          >\r\n            <FormControlLabel\r\n              value={DatasetVisibility.PUBLIC_DATASET.toString()}\r\n              control={<Radio />}\r\n              label={\r\n                <div className='p-select-visibility '>\r\n                  <PublicOutlined color='primary' fontSize='large' className='h-mt-6' />\r\n                  <div className='h-ml-6'>\r\n                    <Typography>Cộng đồng</Typography>\r\n                    <Typography className='p-explain-visibility p-gray-color-typography'>\r\n                      Bất kỳ ai đều có quyền truy cập và xem dataset\r\n                    </Typography>\r\n                  </div>\r\n                </div>\r\n              } />\r\n            <FormControlLabel\r\n              className='h-mt-16'\r\n              value={DatasetVisibility.PRIVATE_DATASET.toString()}\r\n              defaultChecked\r\n              control={<Radio />}\r\n              label={\r\n                <div className='p-select-visibility'>\r\n                  <LockOutlined color='action' fontSize='large' className='h-mt-6' />\r\n                  <div className='h-ml-6'>\r\n                    <Typography>Cá nhân</Typography>\r\n                    <Typography className='p-explain-visibility p-gray-color-typography'>\r\n                      Chỉ người tạo có quyền truy cập và xem dataset\r\n                    </Typography>\r\n                  </div>\r\n                </div>\r\n              } />\r\n          </RadioGroup>}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\n","\r\nimport React from 'react';\r\nimport Dropzone, { IFileWithMeta, StatusValue, IDropzoneProps } from 'react-dropzone-uploader';\r\nimport 'react-dropzone-uploader/dist/styles.css';\r\nimport { Controller } from 'react-hook-form';\r\nimport './dataset-upload.scss';\r\n\r\nexport interface DatasetUploadProps {\r\n  control: any,\r\n  setCreatable: Function,\r\n  creatable: boolean\r\n}\r\n\r\nexport default function DatasetUpload(props: DatasetUploadProps) {\r\n  const { control, setCreatable, creatable } = props\r\n\r\n  const getUploadParams: IDropzoneProps['getUploadParams'] = () => ({\r\n    url: 'https://httpbin.org/post'\r\n  })\r\n\r\n  const handleControlledDropzonChangeStatus = (status: StatusValue, allFiles: IFileWithMeta[], setFiles: Function) => {\r\n    setTimeout(() => {\r\n      if (['done', 'removed', 'headers_received'].includes(status)) {\r\n        if (allFiles.length === 0) {\r\n          setCreatable(false)\r\n        } else {\r\n          !creatable && setCreatable(true)\r\n        }\r\n        setFiles([...allFiles]);\r\n      } else {\r\n        creatable && setCreatable(false)\r\n      }\r\n    }, 0)\r\n  };\r\n\r\n  return (\r\n    <Controller\r\n      name='files'\r\n      control={control}\r\n      render={({ onChange }) => (\r\n        <Dropzone\r\n          getUploadParams={getUploadParams}\r\n          inputWithFilesContent=\"+\"\r\n          onChangeStatus={\r\n            (file, status, allFiles) => handleControlledDropzonChangeStatus(status, allFiles, onChange)\r\n          }\r\n          accept=\".csv, .json, .zip\"\r\n          inputContent='Kéo thả file hoặc click vào đây để upload file'\r\n          styles={{\r\n            dropzone: { minHeight: 250, maxHeight: 300, marginBottom: 24 },\r\n            inputLabelWithFiles: { fontSize: \"xx-large\", marginTop: 5, marginLeft: 5, fontWeight: 500 }\r\n          }}\r\n        />)}>\r\n    </Controller>\r\n  )\r\n}","import {\r\n  Button,\r\n  Container,\r\n  IconButton,\r\n\r\n  TextField,\r\n  Typography\r\n} from '@material-ui/core';\r\nimport { Link } from '@material-ui/icons';\r\nimport UploadFileAPI from 'api/dataset-api';\r\nimport { STATUS_OK } from 'services/axios/common-services.const';\r\nimport { DatasetVisibility } from 'app/modules/dataset/_common/common.const';\r\nimport TinyMCEEditor from 'dataworld/blocks/tinymce-editor/tinymce-editor.component';\r\nimport addToast from 'dataworld/parts/toast/add-toast.component';\r\nimport React, { useEffect, useRef, useState } from 'react';\r\nimport { IFileWithMeta } from 'react-dropzone-uploader';\r\nimport { useForm } from 'react-hook-form';\r\nimport { useSelector } from 'react-redux';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { RootState } from 'store';\r\nimport DatasetSelectVisibility from '../components/dataset-select-visibility.component';\r\nimport DatasetUpload from '../../_common/dataset-upload/dataset-upload.component';\r\nimport '../css/dataset-create.scss';\r\nimport Footer from 'dataworld/blocks/footer/footer.component';\r\n\r\ninterface IUploads {\r\n  files: IFileWithMeta[],\r\n  title: string,\r\n  url: string,\r\n  visibility: string,\r\n}\r\n\r\nexport default function DatasetCreate() {\r\n  const [creatable, setCreatable] = useState<boolean>(false)\r\n  const user = useSelector((state: RootState) => state.auth.user)\r\n  const [description, setDescription] = useState('')\r\n  const apiResult = useRef<HTMLElement>(null)\r\n  const history = useHistory()\r\n\r\n  const { register, handleSubmit, control, errors, watch } = useForm<IUploads>({\r\n    defaultValues: {\r\n      files: [],\r\n      title: '',\r\n      url: '',\r\n      visibility: DatasetVisibility.PRIVATE_DATASET.toString()\r\n    }\r\n  })\r\n  const handleCopyLink = () => {\r\n    const el = document.createElement('textarea');\r\n    el.value = `http://localhost:5500/${user.username}/${watch('url')}`;\r\n    el.setAttribute('readonly', '');\r\n    el.style.position = 'absolute';\r\n    el.style.left = '-9999px';\r\n    document.body.appendChild(el);\r\n    el.select();\r\n    document.execCommand('copy');\r\n    document.body.removeChild(el);\r\n  }\r\n\r\n  const onSubmit = async (data: IUploads) => {\r\n    const { title, url, files, visibility } = data\r\n    const formData = new FormData()\r\n    formData.append('username', user.username)\r\n    formData.append('title', title.trim())\r\n    formData.append('url', url)\r\n    formData.append('description', description)\r\n    formData.append('visibility', visibility.toString())\r\n    formData.append('accountId', user.accountId)\r\n    files.forEach((file: any) =>\r\n      formData.append('files', file.file)\r\n    )\r\n\r\n    const result = await UploadFileAPI.uploadDataset(formData)\r\n    if (result.status === STATUS_OK) {\r\n      addToast({ message: result.message, type: \"success\" })\r\n      history.push(`/dataset/${user.username}/${url}`)\r\n    } else {\r\n      if (apiResult.current !== null) {\r\n        apiResult.current.innerHTML = result.message\r\n      }\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    document.title = 'Tạo mới Dataset'\r\n  }, [])\r\n\r\n  return (\r\n    <>\r\n      <Container component='main' className='h-mt-100 h-mb-100'>\r\n        <div className='t-dataset-create h-mb-40'>\r\n          <div className='-bottom-line'>\r\n            <Typography variant='h5' className='h-mb-4 f-weight-700'>\r\n              Tạo mới Dataset\r\n            </Typography>\r\n\r\n            <Typography className='h-mb-24 p-gray-color-typography -italic-style'>\r\n              Dataset bao gồm 1 hoặc nhiều file. Các file chỉ có thể có các định dạng: csv, json\r\n            </Typography>\r\n          </div>\r\n\r\n          <form className='h-mt-32' onSubmit={handleSubmit(onSubmit)}>\r\n            <div className='-bottom-line'>\r\n              <div className='b-header '>\r\n                <TextField\r\n                  variant=\"outlined\"\r\n                  InputLabelProps={{\r\n                    shrink: true,\r\n                    classes: {\r\n                      asterisk: \"labelAsterisk\",\r\n                    },\r\n                  }}\r\n                  id=\"title\"\r\n                  label=\"Tiêu đề\"\r\n                  size='small'\r\n                  name=\"title\"\r\n                  autoFocus\r\n                  required\r\n                  fullWidth\r\n                  inputRef={register({\r\n                    minLength: 5,\r\n                    maxLength: 50\r\n                  })}\r\n                />\r\n\r\n                <Typography className='p-validate-error h-mt-4'>\r\n                  {errors.title &&\r\n                    'Tiêu đề phải có 5-50 ký tự. Có thể sử dụng chữ và số và các ký tự đặc biệt'\r\n                  }\r\n                </Typography>\r\n\r\n                <div className='b-dataset-url h-mt-32 -align-center'>\r\n                  <IconButton className='h-mr-24' onClick={handleCopyLink}>\r\n                    <Link />\r\n                  </IconButton>\r\n\r\n                  <Typography>\r\n                    {`${process.env.REACT_APP_FRONT_END_URL}dataset/${user.username}/`}\r\n                  </Typography>\r\n\r\n                  <TextField\r\n                    variant=\"outlined\"\r\n                    InputLabelProps={{\r\n                      shrink: true,\r\n                      classes: {\r\n                        asterisk: \"labelAsterisk\",\r\n                      },\r\n                    }}\r\n                    id=\"url\"\r\n                    fullWidth\r\n                    label='URL'\r\n                    size='small'\r\n                    className='h-ml-4'\r\n                    name=\"url\"\r\n                    required\r\n                    inputRef={register({\r\n                      pattern: /^(?=.{5,}$)(?![-])(?!.*[-]{2})[a-zA-Z0-9-]+(?<![-])$/\r\n                    })}\r\n                  />\r\n\r\n                  <Typography className='p-validate-error h-mt-2'>\r\n                    {errors.url && 'Url có ít nhất 5 ký tự. Có thể sử dụng chữ, số và dấu gạch ngang'}\r\n                  </Typography>\r\n                </div>\r\n              </div>\r\n\r\n              <div className='h-mt-32 '>\r\n                <Typography className='f-weight-700 h-mb-10'>Mô tả dataset</Typography>\r\n\r\n                <TinyMCEEditor\r\n                  values={description}\r\n                  setValues={setDescription}\r\n                  height={250}\r\n                />\r\n              </div>\r\n\r\n              <div className='h-mt-32'>\r\n                <Typography className='f-weight-700 h-mb-10'>Tải lên files</Typography>\r\n                <DatasetUpload control={control} setCreatable={setCreatable} creatable={creatable} />\r\n              </div>\r\n            </div>\r\n\r\n            <DatasetSelectVisibility control={control} />\r\n\r\n            <div className='-top-line'>\r\n              <Typography ref={apiResult} className='resultAPI h-mt-10 h-ml-2 h-mb-10' />\r\n\r\n              <Button\r\n                className=' p-button-save-color p-round-button'\r\n                type='submit'\r\n                disabled={!creatable}\r\n                variant='outlined'>\r\n                Tạo dataset\r\n              </Button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n\r\n        <Footer />\r\n\r\n      </Container>\r\n    </>\r\n  )\r\n}\r\n\r\n","import React from 'react';\r\nimport { Container, Typography } from '@material-ui/core';\r\nimport { FormatListNumbered } from '@material-ui/icons';\r\nimport { Pagination } from '@material-ui/lab';\r\nimport SearchBar from 'dataworld/blocks/search-bar/search-bar.component';\r\nimport DatasetItem from 'dataworld/blocks/dataset-item/dataset-item.component';\r\nimport '../css/dataset-search.scss';\r\nimport DatasetSearch from './dataset-search.component';\r\n\r\nexport interface DatasetSearchProps {\r\n  self: DatasetSearch\r\n}\r\n\r\nexport default function DatasetSearchTemplate({ self }: DatasetSearchProps) {\r\n  const { state, handleChangeCurrentPage, handleChangeLike } = self\r\n\r\n  return (\r\n    <Container component='main' className='h-mt-100 h-mb-100'>\r\n      <div className='t-dataset-search'>\r\n        <div className='b-header'>\r\n          <Typography\r\n            variant='h4'\r\n            className='f-weight-700'\r\n          >\r\n            Tìm kiếm\r\n          </Typography>\r\n        </div>\r\n\r\n        <SearchBar />\r\n\r\n        <div className='b-dataset-list'>\r\n          <div className='p-title h-mt-32 -bottom-line'>\r\n            <FormatListNumbered />\r\n            <Typography variant='h5' className='h-ml-10 f-weight-700'>\r\n              {`${state.datasetValuesList.countDatasets} dataset được tìm thấy `}\r\n            </Typography>\r\n          </div>\r\n\r\n          <ul className='b-list'>\r\n            {state.datasetValuesList.datasets.map((item, index) => (\r\n              <li\r\n                className='b-item'\r\n                key={index}\r\n              >\r\n                <DatasetItem\r\n                  handleChangeLike={handleChangeLike}\r\n                  isLoading={state.isLoading}\r\n                  datasetValues={item}\r\n                  position={index}\r\n                />\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        </div>\r\n\r\n        {!state.isLoading &&\r\n          <Pagination\r\n            count={Math.ceil(state.datasetValuesList.countDatasets / state.limit)}\r\n            page={state.currentPage}\r\n            color='primary'\r\n            className='h-mt-32'\r\n            variant=\"outlined\"\r\n            onChange={handleChangeCurrentPage}\r\n          />\r\n        }\r\n      </div>\r\n    </Container>\r\n  )\r\n}","import DatasetAPI, { DatasetSearchList, searchListDefault } from 'api/dataset-api';\r\nimport queryString from 'query-string';\r\nimport React from 'react';\r\nimport { RouteComponentProps } from 'react-router';\r\nimport DatasetFilterTemplate from './dataset-search.template';\r\n\r\ninterface DatasetSearchState {\r\n  isLoading: boolean,\r\n  currentPage: number,\r\n  limit: number,\r\n  previousSearchString: string,\r\n  datasetValuesList: DatasetSearchList\r\n}\r\n\r\nexport default class DatasetSearch extends React.Component<RouteComponentProps, DatasetSearchState> {\r\n  state: DatasetSearchState = {\r\n    isLoading: true,\r\n    currentPage: 1,\r\n    limit: 10,\r\n    previousSearchString: '',\r\n    datasetValuesList: searchListDefault\r\n  }\r\n\r\n  componentDidMount = async () => {\r\n    const result = await this.getValueByQueryString(this.state.currentPage)\r\n    this.setState({\r\n      ...this.state,\r\n      isLoading: false,\r\n      previousSearchString: this.props.location.search,\r\n      datasetValuesList: result?.data\r\n    })\r\n  }\r\n\r\n  componentDidUpdate = async () => {\r\n    if (this.state.previousSearchString !== this.props.location.search) {\r\n      this.setState({\r\n        ...this.state,\r\n        isLoading: true,\r\n        previousSearchString: this.props.location.search,\r\n      })\r\n\r\n      const result = await this.getValueByQueryString(1)\r\n      this.setState({\r\n        ...this.state,\r\n        isLoading: false,\r\n        currentPage: 1,\r\n        datasetValuesList: result?.data\r\n      })\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <DatasetFilterTemplate self={this} />\r\n    )\r\n  }\r\n\r\n  getValueByQueryString = async (page: number) => {\r\n    const parseQuery = queryString.parse(this.props.location.search, { arrayFormat: 'index' })\r\n    if (Object.keys(parseQuery).length === 0) {\r\n      this.props.history.push('/dataset')\r\n    } else {\r\n      return await DatasetAPI.filterDataset(parseQuery, page, this.state.limit)\r\n    }\r\n  }\r\n\r\n  handleChangeLike = async (index: number, accountId: string, isLike: boolean) => {\r\n    const tempDatasets = [...this.state.datasetValuesList.datasets]\r\n    if (isLike) {\r\n      ++tempDatasets[index].dataset.countLike\r\n      tempDatasets[index].dataset.like = [...tempDatasets[index].dataset.like, accountId]\r\n    }\r\n    else {\r\n      --tempDatasets[index].dataset.countLike\r\n      tempDatasets[index].dataset.like = tempDatasets[index].dataset.like.filter(id => id !== accountId)\r\n    }\r\n    this.setState({\r\n      ...this.state,\r\n      datasetValuesList: {\r\n        ...this.state.datasetValuesList,\r\n        datasets: tempDatasets\r\n      }\r\n    })\r\n  }\r\n\r\n  handleChangeCurrentPage = async (event: React.ChangeEvent<unknown>, value: number) => {\r\n    if (value !== this.state.currentPage) {\r\n      this.setState({\r\n        ...this.state,\r\n        isLoading: true,\r\n      })\r\n      const result = await this.getValueByQueryString(value)\r\n      this.setState({\r\n        ...this.state,\r\n        isLoading: false,\r\n        currentPage: value,\r\n        datasetValuesList: result?.data\r\n      })\r\n    }\r\n  }\r\n}","import { ApiTemplate } from 'services/axios/common-services.const'\r\n\r\nconst GET_ALL_COMMENT_IN_DATASET: ApiTemplate = {\r\n  method: \"POST\",\r\n  URL: 'comment/all'\r\n}\r\n\r\nconst POST_COMMENT: ApiTemplate = {\r\n  method: \"POST\",\r\n  URL: 'comment/create'\r\n}\r\n\r\nconst COUNT_COMMENT_IN_DATASET: ApiTemplate = {\r\n  method: \"POST\",\r\n  URL: 'comment/count'\r\n}\r\n\r\nconst LIKE_OR_UNLIKE_COMMENT: ApiTemplate = {\r\n  method: \"POST\",\r\n  URL: \"comment/like\"\r\n}\r\n\r\nconst UPDATE_COMMENT: ApiTemplate = {\r\n  method: \"POST\",\r\n  URL: \"comment/update\"\r\n}\r\n\r\nconst DELETE_COMMENT: ApiTemplate = {\r\n  method: \"POST\",\r\n  URL: \"comment/delete\"\r\n}\r\n\r\n\r\nexport {\r\n  GET_ALL_COMMENT_IN_DATASET,\r\n  POST_COMMENT,\r\n  COUNT_COMMENT_IN_DATASET,\r\n  LIKE_OR_UNLIKE_COMMENT,\r\n  UPDATE_COMMENT,\r\n  DELETE_COMMENT,\r\n};","import {\r\n  COUNT_COMMENT_IN_DATASET,\r\n  DELETE_COMMENT, GET_ALL_COMMENT_IN_DATASET,\r\n  LIKE_OR_UNLIKE_COMMENT, POST_COMMENT,\r\n  UPDATE_COMMENT\r\n} from 'app/const/api-const/comment-url.const';\r\nimport { requestAPI } from 'services/axios/handle-api.const';\r\nimport { defaultProfileValues, ProfileValues } from './profile-api';\r\n\r\nexport interface Comment {\r\n  _id: string,\r\n  commentator: ProfileValues,\r\n  datasetId: string,\r\n  content: string,\r\n  like: Array<string>,\r\n  countLike: number,\r\n  parent?: Comment,\r\n  createdDate: Date | string | number,\r\n  lastUpdate: Date | string | number,\r\n}\r\n\r\nexport const commentDefault: Comment = {\r\n  _id: '',\r\n  commentator: { ...defaultProfileValues },\r\n  datasetId: '',\r\n  content: '',\r\n  like: [],\r\n  parent: undefined,\r\n  countLike: 0,\r\n  createdDate: '',\r\n  lastUpdate: '',\r\n}\r\n\r\nexport default class CommentAPI {\r\n  static getAllCommentInDataset = async (datasetId: string) => {\r\n    const data = {\r\n      datasetId: datasetId\r\n    }\r\n    return await requestAPI<Array<Comment>>(GET_ALL_COMMENT_IN_DATASET, data)\r\n\r\n  }\r\n\r\n  static postComment = async (datasetId: string, content: string, parent: string) => {\r\n    const data = {\r\n      datasetId: datasetId,\r\n      content: content,\r\n      parent: parent\r\n    }\r\n    return await requestAPI(POST_COMMENT, data)\r\n  }\r\n\r\n  static countCommentInDataset = async (datasetId: string) => {\r\n    const data = {\r\n      datasetId: datasetId\r\n    }\r\n    return await requestAPI(COUNT_COMMENT_IN_DATASET, data)\r\n  }\r\n\r\n  /* Like or unlike comment */\r\n  static likeOrUnLikeComment = async (commentId: string) => {\r\n    const data = {\r\n      commentId: commentId\r\n    }\r\n    return await requestAPI(LIKE_OR_UNLIKE_COMMENT, data)\r\n  }\r\n\r\n  /* Update comment */\r\n  static updateComment = async (commentId: string, content: string) => {\r\n    const data = {\r\n      commentId: commentId,\r\n      content: content\r\n    }\r\n    return await requestAPI(UPDATE_COMMENT, data)\r\n\r\n  }\r\n\r\n  /* Delete comment */\r\n  static deleteComment = async (commentId: string) => {\r\n    const data = {\r\n      commentId: commentId,\r\n    }\r\n    return await requestAPI(DELETE_COMMENT, data)\r\n  }\r\n}","import { ApiTemplate } from 'services/axios/common-services.const'\r\n\r\nconst GET_ALL_FILES_DATASET: ApiTemplate = {\r\n  method: \"POST\",\r\n  URL: \"file/all\"\r\n}\r\nconst GET_FILE_CONTENT: ApiTemplate = {\r\n  method: \"POST\",\r\n  URL: \"file/content\"\r\n}\r\nconst UPDATE_FILE_DESCRIPTION: ApiTemplate = {\r\n  method: \"POST\",\r\n  URL: \"file/update/description\"\r\n}\r\nconst UPDATE_FILE_COLUMNS: ApiTemplate = {\r\n  method: \"POST\",\r\n  URL: \"file/update/columns\"\r\n}\r\nconst DOWNLOAD_FILE: ApiTemplate = {\r\n  method: \"POST\",\r\n  URL: `${process.env.REACT_APP_BASE_URL_API}file/download`\r\n}\r\n\r\nexport {\r\n  UPDATE_FILE_DESCRIPTION,\r\n  UPDATE_FILE_COLUMNS,\r\n  GET_ALL_FILES_DATASET,\r\n  GET_FILE_CONTENT,\r\n  DOWNLOAD_FILE,\r\n};","import { requestAPI } from 'services/axios/handle-api.const';\r\nimport {\r\n  GET_ALL_FILES_DATASET,\r\n  GET_FILE_CONTENT,\r\n  UPDATE_FILE_COLUMNS, UPDATE_FILE_DESCRIPTION,\r\n  DOWNLOAD_FILE\r\n} from 'app/const/api-const/file-url.const';\r\nimport axios from 'axios';\r\n\r\nexport interface DatasetFiles {\r\n  files: Array<FileInfo>\r\n}\r\n\r\nexport interface ColumnInfo {\r\n  name: string,\r\n  type: number,\r\n  analysis: ColumnAnalysis,\r\n  description: string,\r\n}\r\n\r\nexport interface FileInfo {\r\n  _id: string,\r\n  name: string,\r\n  size: number,\r\n  summary: object,\r\n  path: string,\r\n  description: string,\r\n  columns: Array<ColumnInfo>,\r\n  createdDate: Date | string,\r\n  lastUpdate: Date | string,\r\n}\r\n\r\ninterface Quartile {\r\n  q1: number,\r\n  q2: number,\r\n  q3: number,\r\n}\r\n\r\nexport interface ColumnAnalysis {\r\n  valid: number,\r\n  wrongType: number,\r\n  missing: number,\r\n  unique: number,\r\n  timeValueAppearChunk: any,\r\n  mostFrequently: any,\r\n  percentageMostFrequently: number,\r\n  max: number,\r\n  variance: number,\r\n  standardDeviation: number,\r\n  mean: number,\r\n  quartile: Quartile,\r\n  range: number,\r\n  min: number\r\n}\r\n\r\nexport const fileDefaultValues: FileInfo = {\r\n  _id: '',\r\n  name: '',\r\n  size: 0,\r\n  summary: {},\r\n  path: '',\r\n  description: '',\r\n  columns: [],\r\n  createdDate: '',\r\n  lastUpdate: '',\r\n}\r\n\r\nexport const defaultAnalysis: ColumnAnalysis = {\r\n  valid: 0,\r\n  wrongType: 0,\r\n  missing: 0,\r\n  unique: 0,\r\n  timeValueAppearChunk: {},\r\n  mostFrequently: '',\r\n  percentageMostFrequently: 0,\r\n  max: 0,\r\n  variance: 0,\r\n  standardDeviation: 0,\r\n  mean: 0,\r\n  quartile: {\r\n    q1: 0,\r\n    q2: 0,\r\n    q3: 0\r\n  },\r\n  range: 0,\r\n  min: 0\r\n}\r\n\r\nexport const columnDefaultValues: ColumnInfo = {\r\n  name: '',\r\n  type: 0,\r\n  analysis: defaultAnalysis,\r\n  description: '',\r\n}\r\n\r\nexport default class FileAPI {\r\n  static getAllFilesInfoInDataset = async (datasetId: string | undefined) => {\r\n    const data = {\r\n      datasetId: datasetId\r\n    }\r\n    return await requestAPI<DatasetFiles>(GET_ALL_FILES_DATASET, data)\r\n  }\r\n\r\n  static getOneFileInDataset = async (path: string) => {\r\n    const data = {\r\n      path: path\r\n    }\r\n    return await requestAPI<Array<object>>(GET_FILE_CONTENT, data)\r\n  }\r\n\r\n  static updateFileDescription = async (datasetId: string, fileId: string, description: string) => {\r\n    const data = {\r\n      datasetId: datasetId,\r\n      fileId: fileId,\r\n      description: description,\r\n    }\r\n    return await requestAPI(UPDATE_FILE_DESCRIPTION, data)\r\n  }\r\n\r\n  static updateFileColumns = async (datasetId: string, fileId: string,\r\n    columns: Array<ColumnInfo>, filePath: string) => {\r\n    const data = {\r\n      fileId: fileId,\r\n      datasetId: datasetId,\r\n      columns: columns,\r\n      filePath: filePath\r\n    }\r\n    return await requestAPI<Array<ColumnInfo>>(UPDATE_FILE_COLUMNS, data)\r\n  }\r\n\r\n  static downloadFileByPath = async (path: string, datasetId: string) => {\r\n    const data = {\r\n      path: path,\r\n      datasetId: datasetId,\r\n    }\r\n    return await axios.request({\r\n      method: 'POST',\r\n      url: DOWNLOAD_FILE.URL,\r\n      headers: {\r\n        \"auth-token\": localStorage.getItem(\"auth-token\"),\r\n      },\r\n      data: data,\r\n      responseType: 'blob',\r\n    })\r\n  }\r\n}","import CommentAPI from \"api/comment-api\";\r\nimport DatasetAPI, { datasetDefaultValues, DatasetValues, Tags } from \"api/dataset-api\";\r\nimport FileAPI, { ColumnInfo, FileInfo } from 'api/file-api';\r\nimport { STATUS_OK } from \"services/axios/common-services.const\";\r\nimport { DatasetVisibility } from \"app/modules/dataset/_common/common.const\";\r\nimport addToast from \"dataworld/parts/toast/add-toast.component\";\r\nimport React, { createContext, useState } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { useHistory, useRouteMatch } from \"react-router\";\r\nimport { RootState } from 'store';\r\n\r\ninterface ContextProps {\r\n  datasetValues: DatasetValues,\r\n  countComment: number,\r\n  isLoadingData: boolean,\r\n  ownerDataset: boolean,\r\n  setDatasetDescription: (description: string) => void,\r\n  handleChangeComment: (comment: boolean) => void,\r\n  setDatasetTags: (tags: Array<Tags>) => void,\r\n  setFileInfo: (fileId: string, columns: Array<ColumnInfo>, fileDescription: string) => void,\r\n  setVisibilityDataset: (visibility: number) => void,\r\n  files: Array<FileInfo>,\r\n  setTitleAndSubtitle: (title: string, subtitle: string) => void,\r\n  setBannerDataset: (banner: string) => void,\r\n  setThumbnailDataset: (thumbnail: string) => void,\r\n  handleChangeLike: (isLike: boolean) => void\r\n}\r\n\r\ninterface RouteParams {\r\n  username: string,\r\n  datasetUrl: string,\r\n}\r\n\r\ninterface DatasetViewState {\r\n  isLoading: boolean,\r\n  ownerDataset: boolean,\r\n  countComment: number,\r\n  datasetValues: DatasetValues,\r\n  files: Array<FileInfo>\r\n}\r\n\r\n\r\nconst DatasetViewContext = createContext<ContextProps>({\r\n  datasetValues: { ...datasetDefaultValues },\r\n  files: [],\r\n  countComment: 0,\r\n  isLoadingData: true,\r\n  ownerDataset: false,\r\n  setDatasetDescription: (description: string) => { },\r\n  handleChangeComment: (comment: boolean) => { },\r\n  setFileInfo: (fileId: string, columns: Array<ColumnInfo>, fileDescription: string) => { },\r\n  setVisibilityDataset: (visibility: number) => { },\r\n  setTitleAndSubtitle: (title: string, subtitle: string) => { },\r\n  setBannerDataset: (banner: string) => { },\r\n  setThumbnailDataset: (thumbnail: string) => { },\r\n  setDatasetTags: (tags: Array<Tags>) => { },\r\n  handleChangeLike: (isLike: boolean) => { },\r\n});\r\n\r\nconst DatasetViewProvider = (props: any) => {\r\n  const match = useRouteMatch<RouteParams>()\r\n  const history = useHistory()\r\n  const user = useSelector((state: RootState) => state.auth.user)\r\n  const [state, setState] = useState<DatasetViewState>({\r\n    isLoading: true,\r\n    ownerDataset: false,\r\n    countComment: 0,\r\n    datasetValues: { ...datasetDefaultValues },\r\n    files: [],\r\n  });\r\n\r\n  React.useEffect(() => {\r\n    async function getDatasetValues() {\r\n      const { datasetUrl, username } = match.params\r\n      const dataset = await DatasetAPI.getDataset(username, datasetUrl)\r\n      if (dataset.status !== STATUS_OK) {\r\n        return history.push('/404')\r\n      }\r\n      if (user.accountId !== dataset.data.accountId\r\n        && dataset.data.dataset.visibility === DatasetVisibility.PRIVATE_DATASET) {\r\n        addToast({ message: \"Không thể truy cập dataset cá nhân\", type: \"error\" })\r\n        history.push('/dataset')\r\n      }\r\n      document.title = dataset.data.dataset.title\r\n      const result = await Promise.all([\r\n        FileAPI.getAllFilesInfoInDataset(dataset.data.dataset._id),\r\n        CommentAPI.countCommentInDataset(dataset.data.dataset._id)\r\n      ])\r\n\r\n      setState((state) => ({\r\n        ...state,\r\n        isLoading: false,\r\n        countComment: result[1].data,\r\n        ownerDataset: user.accountId === dataset.data?.accountId ? true : false,\r\n        datasetValues: dataset.data,\r\n        files: result[0].data.files\r\n      }))\r\n    }\r\n    getDatasetValues()\r\n  }, [history, match.params]) //eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n\r\n  const setDatasetDescription = (description: string) => {\r\n    setState({\r\n      ...state,\r\n      datasetValues: {\r\n        ...state.datasetValues,\r\n        dataset: {\r\n          ...state.datasetValues.dataset,\r\n          description: description\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  const setFileInfo = (fileId: string, columns: Array<ColumnInfo>, fileDescription: string) => {\r\n    const index = state.files.findIndex(file => file._id === fileId)\r\n    const newFiles = [...state.files]\r\n    newFiles[index].description = fileDescription ? fileDescription : ''\r\n    newFiles[index].columns = columns\r\n    setState({\r\n      ...state,\r\n      files: newFiles\r\n    })\r\n  }\r\n\r\n  const setVisibilityDataset = (visibility: number) => {\r\n    setState({\r\n      ...state,\r\n      datasetValues: {\r\n        ...state.datasetValues,\r\n        dataset: {\r\n          ...state.datasetValues.dataset,\r\n          visibility: visibility\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  const setTitleAndSubtitle = (title: string, subtitle: string) => {\r\n    setState({\r\n      ...state,\r\n      datasetValues: {\r\n        ...state.datasetValues,\r\n        dataset: {\r\n          ...state.datasetValues.dataset,\r\n          title: title,\r\n          subtitle: subtitle\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  const setDatasetTags = (tags: Array<Tags>) => {\r\n    setState({\r\n      ...state,\r\n      datasetValues: {\r\n        ...state.datasetValues,\r\n        dataset: {\r\n          ...state.datasetValues.dataset,\r\n          tags: tags\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  const setBannerDataset = (banner: string) => {\r\n    setState({\r\n      ...state,\r\n      datasetValues: {\r\n        ...state.datasetValues,\r\n        dataset: {\r\n          ...state.datasetValues.dataset,\r\n          banner: banner\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  const setThumbnailDataset = (thumbnail: string) => {\r\n    setState({\r\n      ...state,\r\n      datasetValues: {\r\n        ...state.datasetValues,\r\n        dataset: {\r\n          ...state.datasetValues.dataset,\r\n          thumbnail: thumbnail\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  const handleChangeLike = (isLike: boolean) => {\r\n    setState((prevState) => ({\r\n      ...state,\r\n      datasetValues: {\r\n        ...state.datasetValues,\r\n        dataset: {\r\n          ...state.datasetValues.dataset,\r\n          countLike: isLike ?\r\n            prevState.datasetValues.dataset.countLike + 1 :\r\n            prevState.datasetValues.dataset.countLike - 1,\r\n          like: isLike ? [...prevState.datasetValues.dataset.like, user.accountId] :\r\n            prevState.datasetValues.dataset.like.filter(id => id !== user.accountId)\r\n        }\r\n      }\r\n    }))\r\n  }\r\n\r\n  const handleChangeComment = (comment: boolean) => {\r\n    setState((prevState) => ({\r\n      ...state,\r\n      countComment: comment ? prevState.countComment + 1 : prevState.countComment - 1\r\n    }))\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <DatasetViewContext.Provider\r\n        value={{\r\n          datasetValues: state.datasetValues,\r\n          isLoadingData: state.isLoading,\r\n          countComment: state.countComment,\r\n          ownerDataset: state.ownerDataset,\r\n          setDatasetDescription: setDatasetDescription,\r\n          handleChangeComment: handleChangeComment,\r\n          setFileInfo: setFileInfo,\r\n          setVisibilityDataset: setVisibilityDataset,\r\n          setTitleAndSubtitle: setTitleAndSubtitle,\r\n          setBannerDataset: setBannerDataset,\r\n          setThumbnailDataset: setThumbnailDataset,\r\n          setDatasetTags: setDatasetTags,\r\n          handleChangeLike: handleChangeLike,\r\n          files: state.files\r\n        }}\r\n      >\r\n        {props.children}\r\n      </DatasetViewContext.Provider>\r\n    </>\r\n  );\r\n};\r\n\r\nexport { DatasetViewContext, DatasetViewProvider };\r\n\r\n","import { Avatar, IconButton, Tooltip, Typography } from '@material-ui/core';\r\nimport {\r\n  ThumbUp, ThumbUpOutlined,\r\n  VisibilityOffOutlined,\r\n  VisibilityOutlined, EventNoteOutlined,\r\n  CloudDownloadOutlined,\r\n} from '@material-ui/icons';\r\nimport { Skeleton } from '@material-ui/lab';\r\nimport DatasetAPI from 'api/dataset-api';\r\nimport { DatasetVisibility } from 'app/modules/dataset/_common/common.const';\r\nimport 'app/modules/dataset/dataset-view/css/dataset-header.scss';\r\nimport { DatasetViewContext } from 'app/modules/dataset/dataset-view/pages/context.component';\r\nimport React, { useContext, useEffect, useState } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { useHistory } from 'react-router';\r\nimport { RootState } from 'store';\r\nimport moment from 'moment';\r\n\r\ninterface DescriptionUpdateProps {\r\n  createdDate: Date | string,\r\n  lastUpdate: Date | string\r\n}\r\n\r\nconst DescriptionUpdate = ({ createdDate, lastUpdate }: DescriptionUpdateProps) => {\r\n  return (\r\n    <>\r\n      <Typography variant='body2'>\r\n        Ngày tạo: {moment(createdDate).locale('vi').format('MMMM Do YYYY, hh:mm a')}\r\n      </Typography>\r\n\r\n      <Typography variant='body2'>\r\n        Cập nhật gần nhất: {moment(lastUpdate).locale('vi').format('MMMM Do YYYY, hh:mm a')}\r\n      </Typography>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default function DatasetHeader() {\r\n  const { datasetValues, isLoadingData, handleChangeLike } = useContext(DatasetViewContext)\r\n  const history = useHistory()\r\n  const [like, setLike] = useState<boolean>(false)\r\n  const user = useSelector((state: RootState) => (state.auth.user))\r\n\r\n  const changeLike = async (isLike: boolean) => {\r\n    await DatasetAPI.likeOrUnLikeDataset(datasetValues.dataset._id)\r\n    handleChangeLike(isLike)\r\n  }\r\n\r\n  const gotoProfileOwner = () => {\r\n    history.push(`/profile/${datasetValues.username}`)\r\n  }\r\n\r\n\r\n  useEffect(() => {\r\n    const index = datasetValues.dataset.like.findIndex(item => item === user.accountId)\r\n    setLike(index >= 0 ? true : false)\r\n  }, [datasetValues.dataset.like, user.accountId])\r\n\r\n  return (\r\n    <div\r\n      className='b-dataset-header'\r\n      style={{\r\n        backgroundImage: `url(\"${datasetValues.dataset.banner}\")`,\r\n      }}>\r\n\r\n      <div className='p-visibility h-mt-16 h-ml-24'>\r\n        {isLoadingData ?\r\n          <Skeleton width={100} /> :\r\n          <>\r\n            {datasetValues.dataset.visibility === DatasetVisibility.PRIVATE_DATASET ?\r\n              <>\r\n                <VisibilityOffOutlined />\r\n                <Typography className='h-ml-4'>Dataset cá nhân</Typography>\r\n              </> :\r\n              <>\r\n                <VisibilityOutlined />\r\n                <Typography className='h-ml-4'>Dataset cộng đồng</Typography>\r\n              </>\r\n            }\r\n          </>\r\n        }\r\n      </div>\r\n\r\n      <div className='p-title h-mt-24 h-ml-24'>\r\n        {isLoadingData ?\r\n          <Skeleton width=\"60%\" /> :\r\n          <Typography variant='h6' >{datasetValues.dataset.title}</Typography>\r\n        }\r\n\r\n        {isLoadingData ?\r\n          <Skeleton width=\"70%\" /> :\r\n          <Typography variant='h6' >{datasetValues.dataset.subtitle}</Typography>\r\n        }\r\n      </div>\r\n\r\n      <div className='p-owner-dataset h-ml-24'>\r\n        {isLoadingData ?\r\n          <Skeleton variant=\"rect\" width={40} height={40} /> :\r\n          <IconButton onClick={gotoProfileOwner}>\r\n            <Avatar\r\n              variant='square'\r\n              src={datasetValues.avatar}\r\n            />\r\n          </IconButton>\r\n        }\r\n\r\n        {isLoadingData ?\r\n          <Skeleton width={150} className='h-ml-10' /> :\r\n          <div className='h-d_flex '>\r\n            <Typography className='h-ml-10 h-mr-20' >\r\n              <a href={`/profile/${datasetValues.username}`}>{datasetValues.name}</a>\r\n            </Typography>\r\n\r\n            <Tooltip\r\n              title={\r\n                <DescriptionUpdate\r\n                  createdDate={datasetValues.dataset.createdDate}\r\n                  lastUpdate={datasetValues.dataset.lastUpdate}\r\n                />\r\n              }\r\n              arrow>\r\n              <EventNoteOutlined />\r\n            </Tooltip>\r\n          </div>\r\n        }\r\n      </div>\r\n\r\n      <div className='b-action'>\r\n        {isLoadingData ?\r\n          <Skeleton width={40} /> :\r\n          <>\r\n            <div className='p-item h-d_flex -align-content'>\r\n              <div className='h-d_flex p-info-item'>\r\n                <VisibilityOffOutlined fontSize='small' />\r\n                <Typography variant='body2' className='h-ml-4 h-mr-2'>Lượt xem</Typography>\r\n              </div>\r\n\r\n              <div className='p-number-item'>\r\n                <Typography variant='body2' className='h-ml-2 h-mr-2'>{datasetValues.dataset.views}</Typography>\r\n              </div>\r\n            </div>\r\n\r\n            <div className='p-item h-d_flex -align-content h-ml-10'>\r\n              <div className='h-d_flex p-info-item'>\r\n                <CloudDownloadOutlined fontSize='small' />\r\n                <Typography variant='body2' className='h-ml-4 h-mr-2'>Tải về</Typography>\r\n              </div>\r\n\r\n              <div className='p-number-item'>\r\n                <Typography variant='body2' className='h-ml-2 h-mr-2'>{datasetValues.dataset.downloads}</Typography>\r\n              </div>\r\n            </div>\r\n\r\n            <div className='p-item h-d_flex -align-content h-ml-10'>\r\n              <div\r\n                onClick={like ? () => changeLike(false) : () => changeLike(true)}\r\n                className='h-d_flex p-info-item -cursor-pointer'>\r\n                {like ?\r\n                  <ThumbUp fontSize='small' color='primary' /> :\r\n                  <ThumbUpOutlined fontSize='small' />\r\n                }\r\n                <Typography variant='body2' className='h-ml-4 h-mr-2'>Lượt thích</Typography>\r\n              </div>\r\n\r\n              <div className='p-number-item'>\r\n                <Typography variant='body2' className='h-ml-2 h-mr-2'>{datasetValues.dataset.countLike}</Typography>\r\n              </div>\r\n            </div>\r\n          </>\r\n        }\r\n      </div>\r\n    </div >\r\n  )\r\n}","export enum COLUMN_TYPE {\r\n  ID = 0,\r\n  STRING = 1,\r\n  NUMBER = 2,\r\n  BOOLEAN = 3,\r\n  DATE_TIME = 4,\r\n  EMAIL = 5,\r\n  URL = 6,\r\n};\r\n\r\ninterface Option {\r\n  label: string,\r\n  value: number,\r\n}\r\nexport const options: Array<Option> = [\r\n  { label: 'ID', value: COLUMN_TYPE.ID },\r\n  { label: 'String', value: COLUMN_TYPE.STRING },\r\n  { label: 'Number', value: COLUMN_TYPE.NUMBER },\r\n  { label: 'Boolean', value: COLUMN_TYPE.BOOLEAN },\r\n  { label: 'Date/Time', value: COLUMN_TYPE.DATE_TIME },\r\n  { label: 'Email', value: COLUMN_TYPE.EMAIL },\r\n  { label: 'Url', value: COLUMN_TYPE.URL },\r\n];\r\n","import {\r\n  CalendarToday,\r\n  Check,\r\n  Filter1,\r\n  Link, MailOutline,\r\n  TextFormat,\r\n  VpnKey\r\n} from '@material-ui/icons'\r\n\r\nexport const icons = [\r\n  <VpnKey fontSize='small' className='h-mr-8' />,\r\n  <TextFormat fontSize='small' className='h-mr-8' />,\r\n  <Filter1 fontSize='small' className='h-mr-8' />,\r\n  <Check fontSize='small' className='h-mr-8' />,\r\n  <CalendarToday fontSize='small' className='h-mr-8' />,\r\n  <MailOutline fontSize='small' className='h-mr-8' />,\r\n  <Link fontSize='small' className='h-mr-8' />,\r\n]","import React from 'react'\r\nimport {\r\n  IconButton,\r\n  Menu,\r\n  MenuItem,\r\n  Typography\r\n} from '@material-ui/core'\r\nimport {\r\n  ArrowDropDown\r\n} from '@material-ui/icons'\r\nimport { ColumnInfo } from 'api/file-api';\r\nimport { options } from 'app/modules/dataset/_common/column-type.const'\r\nimport 'app/modules/dataset/dataset-view/css/menu-type-column.scss'\r\nimport { icons } from 'app/modules/dataset/_common/column-icons.const'\r\n\r\nexport interface MenuTypeColumnProps {\r\n  columnInfo: ColumnInfo,\r\n  register: any,\r\n  indexColumn: number,\r\n  columnsType: Array<number>,\r\n  setColumnsType: (columnsType: Array<number>) => void,\r\n}\r\n\r\nconst ITEM_HEIGHT = 48;\r\n\r\nexport default function MenuTypeColumn(props: MenuTypeColumnProps) {\r\n  const { columnInfo, register, setColumnsType, columnsType, indexColumn } = props\r\n  const [anchorEl, setAnchorEl] = React.useState<null | HTMLElement>(null);\r\n  const [selectedIndex, setSelectedIndex] = React.useState<number>\r\n    (options.findIndex(option => (option.value === columnInfo.type)));\r\n\r\n  const handleClickListItem = (event: React.MouseEvent<HTMLElement> | null) => {\r\n    setAnchorEl(event ? event.currentTarget : null);\r\n  };\r\n\r\n  const handleMenuItemClick = (event: React.MouseEvent<HTMLElement>, index: number) => {\r\n    const newArrayType = [...columnsType]\r\n    newArrayType[indexColumn] = options[index].value\r\n    setColumnsType(newArrayType)\r\n    setSelectedIndex(index);\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  return (\r\n    <div className='b-column'>\r\n      <div className='b-column-title'>\r\n        <div className='p-column-name'>\r\n          {icons[selectedIndex]}\r\n          <Typography>{columnInfo.name}</Typography>\r\n        </div>\r\n\r\n        <IconButton\r\n          className=''\r\n          onClick={(event) => handleClickListItem(event)}\r\n        >\r\n          <ArrowDropDown />\r\n        </IconButton>\r\n\r\n        <Menu\r\n          anchorEl={anchorEl}\r\n          open={Boolean(anchorEl)}\r\n          onClose={() => handleClickListItem(null)}\r\n          PaperProps={{\r\n            style: {\r\n              maxHeight: ITEM_HEIGHT * 4.5,\r\n              width: '20ch',\r\n            },\r\n          }}\r\n        >\r\n          {options.map((option, index) => (\r\n            <MenuItem\r\n              key={option.value}\r\n              selected={index === selectedIndex}\r\n              onClick={(event) => handleMenuItemClick(event, index)}>\r\n              {icons[index]}\r\n              {option.label}\r\n            </MenuItem>\r\n          ))}\r\n        </Menu>\r\n      </div>\r\n\r\n      <textarea\r\n        defaultValue={columnInfo.description}\r\n        className='p-text-area h-mt-12'\r\n        name={columnInfo.name}\r\n        ref={register}\r\n      />\r\n    </div>\r\n  )\r\n}","import React, { useContext, useEffect, useState } from 'react'\r\nimport {\r\n  Button,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogTitle,\r\n  IconButton,\r\n  Typography\r\n} from '@material-ui/core'\r\nimport {\r\n  Close\r\n} from '@material-ui/icons'\r\nimport FileAPI, { ColumnInfo, FileInfo } from 'api/file-api'\r\nimport TinyMCEEditor from 'dataworld/blocks/tinymce-editor/tinymce-editor.component'\r\nimport { useForm } from 'react-hook-form'\r\nimport MenuTypeColumn from '../menu-type-column/menu-type-column.component'\r\nimport { DatasetViewContext } from '../../pages/context.component'\r\nimport addToast from 'dataworld/parts/toast/add-toast.component'\r\nimport { STATUS_OK } from 'services/axios/common-services.const'\r\nimport 'app/modules/dataset/dataset-view/css/edit-file-description.scss'\r\n\r\ninterface EditFileDescriptionProps {\r\n  fileInfo: FileInfo,\r\n  open: boolean,\r\n  onClose: () => void,\r\n}\r\n\r\nexport default function EditFileDescription(props: EditFileDescriptionProps) {\r\n  const { open, onClose, fileInfo } = props\r\n  const { handleSubmit, register } = useForm()\r\n  const { setFileInfo, datasetValues } = useContext(DatasetViewContext)\r\n  const [columnsType, setColumnsType] = useState<Array<number>>([])\r\n  const [fileDescription, setFileDescription] = useState(fileInfo.description)\r\n\r\n  const onSubmit = async (data: any) => {\r\n    const newColumns = fileInfo.columns.map((column, index): ColumnInfo => ({\r\n      name: column.name,\r\n      analysis: column.analysis,\r\n      description: data[column.name],\r\n      type: columnsType[index],\r\n    }))\r\n    const result = await Promise.all([\r\n      fileDescription !== fileInfo.description ?\r\n        FileAPI.updateFileDescription(datasetValues.dataset._id, fileInfo._id, fileDescription) :\r\n        null,\r\n      FileAPI.updateFileColumns(datasetValues.dataset._id, fileInfo._id,\r\n        newColumns, `${datasetValues.dataset.path}/files/${fileInfo.name}`)\r\n    ])\r\n\r\n    if (result[1].status === STATUS_OK) {\r\n      addToast({ message: result[1].message, type: \"success\" })\r\n      setFileInfo(fileInfo._id, result[1].data, fileInfo.description)\r\n      onClose()\r\n    } else {\r\n      addToast({ message: result[1].message, type: \"error\" })\r\n    }\r\n  }\r\n\r\n  const handleClose = () => {\r\n    setColumnsType(fileInfo.columns.map(column => column.type))\r\n    onClose()\r\n  }\r\n\r\n  useEffect(() => {\r\n    setColumnsType(fileInfo.columns.map(column => column.type))\r\n  }, [fileInfo.columns])\r\n\r\n  return (\r\n    <Dialog\r\n      className='b-edit-file-description'\r\n      open={open}\r\n      fullWidth={true}\r\n      maxWidth='md'>\r\n      <DialogTitle id=\"add-tags-title\" className='b-title'>\r\n        <IconButton onClick={handleClose} className='p-icon-close'>\r\n          <Close />\r\n        </IconButton>\r\n        <Typography variant='h6' className='f-weight-700'>Chỉnh sửa file</Typography>\r\n      </DialogTitle>\r\n\r\n      <form className='b-form' onSubmit={handleSubmit(onSubmit)} >\r\n        <DialogContent>\r\n          <Typography className='f-weight-700 h-mb-10'>Mô tả file</Typography>\r\n          <TinyMCEEditor\r\n            values={fileDescription}\r\n            setValues={setFileDescription}\r\n            height={200}\r\n          />\r\n        </DialogContent>\r\n\r\n        <div className='b-columns-description h-mt-20'>\r\n          {fileInfo.columns.map((column, index) =>\r\n            <MenuTypeColumn\r\n              key={index}\r\n              columnInfo={column}\r\n              register={register}\r\n              columnsType={columnsType}\r\n              indexColumn={index}\r\n              setColumnsType={setColumnsType}\r\n            />)\r\n          }\r\n        </div>\r\n\r\n\r\n        <DialogActions className='b-actions'>\r\n          <Button\r\n            variant='outlined'\r\n            size='small'\r\n            className='p-round-button'\r\n            type='button'\r\n            onClick={handleClose}\r\n          >\r\n            Hủy\r\n          </Button>\r\n          <Button\r\n            size='small'\r\n            variant='contained'\r\n            className='p-round-button p-button-save-color'\r\n            type='submit'\r\n          >\r\n            Lưu\r\n          </Button>\r\n        </DialogActions>\r\n      </form>\r\n    </Dialog>\r\n  )\r\n}","import { IconButton, Typography } from '@material-ui/core';\r\nimport { DataGrid } from '@material-ui/data-grid';\r\nimport {\r\n  EditOutlined\r\n} from '@material-ui/icons';\r\nimport { FileInfo } from 'api/file-api';\r\nimport Parser from 'html-react-parser';\r\nimport React, { useContext, useMemo, useState } from 'react';\r\nimport { DatasetViewContext } from '../../pages/context.component';\r\nimport EditFileDescription from '../edit-file-description/edit-file-description.component';\r\nimport 'app/modules/dataset/dataset-view/css/file-info-tab.scss';\r\nimport { Skeleton } from '@material-ui/lab';\r\n\r\ninterface ColumnTabProps {\r\n  value: number,\r\n  index: number,\r\n  isLoadingFile: boolean,\r\n  rowsData: Array<object>,\r\n  fileInfo: FileInfo\r\n}\r\n\r\nexport default function FileInfoTab({ rowsData, value, index, fileInfo, isLoadingFile }: ColumnTabProps) {\r\n  const { ownerDataset } = useContext(DatasetViewContext)\r\n  const [openFileDescription, setOpenFileDescription] = useState<boolean>(false)\r\n\r\n  const handleOpenFileDescription = () => {\r\n    setOpenFileDescription(true)\r\n  }\r\n\r\n  const handleCloseFileDescription = () => {\r\n    setOpenFileDescription(false)\r\n  }\r\n\r\n  const rows = useMemo(\r\n    () => (rowsData.map(\r\n      (item, index) => ({ ...item, id: index }))\r\n    ),\r\n    [rowsData]\r\n  );\r\n\r\n  const columns = useMemo(\r\n    () => (fileInfo.columns.map(\r\n      item => ({ field: item.name, headerName: item.name, width: 130, description: item.description }))\r\n    ),\r\n    [fileInfo.columns]\r\n  );\r\n\r\n  return (\r\n    <div className='b-column-tab' hidden={value !== index}>\r\n      {isLoadingFile ?\r\n        <Skeleton width='100%' height={200} /> :\r\n        <div className='p-file-description'>\r\n          {ownerDataset &&\r\n            <>\r\n              <IconButton className='p-edit-button' onClick={handleOpenFileDescription}>\r\n                <EditOutlined />\r\n              </IconButton>\r\n              <EditFileDescription\r\n                open={openFileDescription}\r\n                key='edit-file'\r\n                onClose={handleCloseFileDescription}\r\n                fileInfo={fileInfo}\r\n              />\r\n            </>\r\n          }\r\n          <Typography className='h-mt-10 h-ml-20 f-weight-700'>Mô tả file</Typography>\r\n          <div className='h-ml-20 '>\r\n            {\r\n              Parser(fileInfo.description ?\r\n                fileInfo.description :\r\n                `<p class='p-gray-color-typography'>Chưa có mô tả file</p>`\r\n              )\r\n            }\r\n          </div>\r\n        </div>\r\n      }\r\n\r\n      {isLoadingFile ?\r\n        <Skeleton width='100%' height={700} /> :\r\n        <div className='p-data-grid' key='datagrid'>\r\n          <DataGrid rows={rows} columns={columns} hideFooterSelectedRowCount />\r\n        </div>\r\n      }\r\n    </div>\r\n  );\r\n}","import React, { useMemo, useState } from 'react';\r\nimport { MenuItem, Select, Typography } from '@material-ui/core';\r\nimport { ColumnInfo } from 'api/file-api';\r\nimport { icons } from 'app/modules/dataset/_common/column-icons.const';\r\nimport { COLUMN_TYPE } from 'app/modules/dataset/_common/column-type.const';\r\nimport 'app/modules/dataset/dataset-view/css/column-chart.scss';\r\nimport Parser from 'html-react-parser';\r\nimport _ from 'lodash';\r\nimport Chart from 'react-apexcharts';\r\n\r\ninterface ColumnChartProps {\r\n  columnInfo: ColumnInfo\r\n}\r\n\r\nexport default function ColumnChart({ columnInfo }: ColumnChartProps) {\r\n  const [numberOfColumn, setNumberOfColumn] = useState<number>(2)\r\n  const [typeChart, setTypeChart] = useState<any>('bar')\r\n\r\n  const isHidden = !columnInfo.analysis.timeValueAppearChunk || columnInfo.type === COLUMN_TYPE.ID\r\n\r\n  //replace all '\\\\u002e' to '.'\r\n  const replaceValue = (value: string) => {\r\n    return _.replace(value, /\\\\u002e/g, '.')\r\n  }\r\n\r\n  const chartConfig = useMemo(() => {\r\n    if (!isHidden) {\r\n      const categories: Array<any> = [];\r\n      const data: Array<any> = []\r\n      const timeValueAppearChunk = columnInfo.analysis.timeValueAppearChunk\r\n      const keys = Object.keys(columnInfo.analysis.timeValueAppearChunk)\r\n\r\n      if (columnInfo.type !== COLUMN_TYPE.NUMBER) {\r\n        keys.forEach(key => {\r\n          data.push(timeValueAppearChunk[key])\r\n          categories.push(replaceValue(key))\r\n        })\r\n      } else {\r\n        const columnData = timeValueAppearChunk[numberOfColumn]\r\n        if (columnData.values[numberOfColumn - 1] === 0) return\r\n        columnData.labels.forEach((label: any, index: number) => {\r\n          data.push(columnData.values[index])\r\n          categories.push(replaceValue(label))\r\n        })\r\n      }\r\n\r\n      if (typeChart !== 'donut') {\r\n        return {\r\n          options: {\r\n            chart: {\r\n              id: \"basic-chart\",\r\n              toolbar: {\r\n                show: false,\r\n              }\r\n            },\r\n            xaxis: {\r\n              categories: categories,\r\n              labels: {\r\n                show: false,\r\n              }\r\n            }\r\n          },\r\n          series: [\r\n            {\r\n              name: \"Số lượng\",\r\n              data: data,\r\n            }\r\n          ]\r\n        }\r\n      }\r\n\r\n      return {\r\n        options: { labels: categories },\r\n        series: data,\r\n      }\r\n    }\r\n\r\n  }, [columnInfo, numberOfColumn, typeChart, isHidden])\r\n\r\n  const validChartConfig = useMemo(() => {\r\n    const data = []\r\n    data.push(columnInfo.analysis.valid)\r\n    data.push(columnInfo.analysis.missing)\r\n    data.push(columnInfo.analysis.wrongType)\r\n    const labels = ['Hợp lệ', 'Bỏ trống', 'Sai kiểu giá trị']\r\n    return {\r\n      options: {\r\n        labels: labels,\r\n        colors: ['#4caf50', '#fd0000', '#feb019'],\r\n      },\r\n      series: data,\r\n    }\r\n  }, [columnInfo])\r\n\r\n  const changeNumberOfColumn = (event: React.ChangeEvent<{ value: unknown }>) => {\r\n    setNumberOfColumn(event.target.value as number)\r\n  }\r\n\r\n  const changeTypeChart = (event: React.ChangeEvent<{ value: unknown }>) => {\r\n    setTypeChart(event.target.value as any)\r\n  }\r\n\r\n  const convertFloatToPercentage = (number: number) => {\r\n    return `${number * 100}%`\r\n  }\r\n\r\n  return (\r\n    <div className='b-column-chart h-d_flex'>\r\n      <div className='b-chart'>\r\n        <div className='h-d_flex -justify-space-between h-mt-20'>\r\n          <div className='h-d_flex -align-center h-ml-16 '>\r\n            {icons[columnInfo.type]}\r\n            <Typography className='f-weight-700'>{columnInfo.name}</Typography>\r\n          </div>\r\n\r\n          {columnInfo.type === COLUMN_TYPE.NUMBER &&\r\n            <Select\r\n              id=\"select-number-of-column\"\r\n              variant='outlined'\r\n              className='h-mr-8'\r\n              value={numberOfColumn}\r\n              onChange={changeNumberOfColumn}\r\n            >\r\n              <MenuItem value={2}>2</MenuItem>\r\n              <MenuItem value={3}>3</MenuItem>\r\n              <MenuItem value={4}>4</MenuItem>\r\n              <MenuItem value={5}>5</MenuItem>\r\n              <MenuItem value={6}>6</MenuItem>\r\n              <MenuItem value={7}>7</MenuItem>\r\n              <MenuItem value={8}>8</MenuItem>\r\n              <MenuItem value={9}>9</MenuItem>\r\n              <MenuItem value={10}>10</MenuItem>\r\n            </Select>\r\n          }\r\n        </div>\r\n\r\n        <div className='h-d_flex -justify-space-between -align-center'>\r\n          <div className='p-column-description h-ml-16'>\r\n            {\r\n              Parser(columnInfo.description ?\r\n                columnInfo.description :\r\n                `<p class='p-gray-color-typography'>Chưa có mô tả cột</p>`)\r\n            }\r\n          </div>\r\n\r\n          {!isHidden &&\r\n            <Select\r\n              id=\"select-number-of-column\"\r\n              variant='outlined'\r\n              className='h-mr-8 p-select-chart'\r\n              value={typeChart}\r\n              onChange={changeTypeChart}\r\n            >\r\n              <MenuItem value='donut'>Biểu đồ tròn</MenuItem>\r\n              <MenuItem value='bar'>Biểu đồ cột</MenuItem>\r\n            </Select>\r\n          }\r\n        </div>\r\n\r\n        {isHidden ?\r\n          <div className='h-ml-16 h-mr-16 h-mt-38'>\r\n            <Typography className='f-weight-700 -blue-color'>{columnInfo.analysis.unique} giá trị khác nhau</Typography>\r\n\r\n            <div className='h-d_flex -justify-space-between h-mt-20'>\r\n              <Typography variant='body2'>{columnInfo.analysis.mostFrequently}</Typography>\r\n              <Typography variant='body2' className='-blue-color'>\r\n                {convertFloatToPercentage(columnInfo.analysis.percentageMostFrequently)}\r\n              </Typography>\r\n            </div>\r\n\r\n            <div className='h-d_flex -justify-space-between h-mt-20'>\r\n              <Typography variant='body2'>Giá trị khác</Typography>\r\n              <Typography variant='body2' className='-blue-color'>\r\n                {convertFloatToPercentage(1 - columnInfo.analysis.percentageMostFrequently)}\r\n              </Typography>\r\n            </div>\r\n          </div> :\r\n          <div className='h-mt-74'>\r\n            {typeChart === 'donut' ?\r\n              <Chart\r\n                options={chartConfig?.options}\r\n                series={chartConfig?.series}\r\n                type='donut'\r\n                width=\"85%\"\r\n              /> :\r\n              <Chart\r\n                options={chartConfig?.options}\r\n                series={chartConfig?.series}\r\n                type='bar'\r\n                width=\"97%\"\r\n              />\r\n            }\r\n          </div>\r\n        }\r\n      </div>\r\n\r\n      <div className='b-chart-info h-mb-20'>\r\n        <Chart\r\n          options={validChartConfig.options}\r\n          series={validChartConfig.series}\r\n          type='donut'\r\n          width='300'\r\n          height='300'\r\n        />\r\n\r\n        <div className='h-ml-20 h-mr-20'>\r\n          <div className='h-d_flex -justify-space-between h-mt-2'>\r\n            <Typography variant='body2'>Hợp lệ</Typography>\r\n\r\n            <Typography variant='body2'>{columnInfo.analysis.valid}</Typography>\r\n          </div>\r\n\r\n          <div className='h-d_flex -justify-space-between h-mt-2'>\r\n            <Typography variant='body2'>Bỏ trống</Typography>\r\n\r\n            <Typography variant='body2'>{columnInfo.analysis.missing}</Typography>\r\n          </div>\r\n\r\n          {columnInfo.type !== COLUMN_TYPE.NUMBER &&\r\n            <>\r\n              <div className='h-d_flex -justify-space-between h-mt-2'>\r\n                <Typography variant='body2'>Sai kiểu giá trị</Typography>\r\n\r\n                <Typography variant='body2'>{columnInfo.analysis.wrongType}</Typography>\r\n              </div>\r\n\r\n              <div className='h-d_flex -justify-space-between h-mt-2'>\r\n                <Typography variant='body2'>Duy nhất</Typography>\r\n\r\n                <Typography variant='body2'>{columnInfo.analysis.unique}</Typography>\r\n              </div>\r\n            </>\r\n          }\r\n\r\n          <div className='h-d_flex -justify-space-between h-mt-2'>\r\n            <Typography variant='body2'>Xuất hiện nhiều nhất</Typography>\r\n            <Typography variant='body2'>{columnInfo.analysis.mostFrequently}</Typography>\r\n          </div>\r\n\r\n          {columnInfo.type === COLUMN_TYPE.NUMBER &&\r\n            <>\r\n              <div className='h-d_flex -justify-space-between h-mt-10'>\r\n                <Typography variant='body2'>Phương sai</Typography>\r\n                <Typography variant='body2'>{columnInfo.analysis.variance}</Typography>\r\n              </div>\r\n\r\n              <div className='h-d_flex -justify-space-between h-mt-2'>\r\n                <Typography variant='body2'>Độ lệch chuẩn</Typography>\r\n                <Typography variant='body2'>{columnInfo.analysis.standardDeviation}</Typography>\r\n              </div>\r\n\r\n              <div className='h-d_flex -justify-space-between h-mt-10'>\r\n                <Typography variant='body2'>Giá trị lớn nhất</Typography>\r\n                <Typography variant='body2'>{columnInfo.analysis.max}</Typography>\r\n              </div>\r\n\r\n              <div className='h-d_flex -justify-space-between h-mt-2'>\r\n                <Typography variant='body2'>Giá trị trung bình</Typography>\r\n                <Typography variant='body2'>{columnInfo.analysis.mean}</Typography>\r\n              </div>\r\n\r\n              <div className='h-d_flex -justify-space-between h-mt-2'>\r\n                <Typography variant='body2'>Giá trị nhỏ nhất</Typography>\r\n                <Typography variant='body2'>{columnInfo.analysis.min}</Typography>\r\n              </div>\r\n\r\n              <div className='h-d_flex -justify-space-between h-mt-10'>\r\n                <Typography variant='body2'>Tứ phân vị</Typography>\r\n              </div>\r\n\r\n              <div className='h-d_flex -justify-space-between h-mt-2 h-ml-10'>\r\n                <Typography variant='body2' className='p-gray-color-typography h-ml-32'>25%</Typography>\r\n                <Typography variant='body2'>{columnInfo.analysis.quartile.q1}</Typography>\r\n              </div>\r\n\r\n              <div className='h-d_flex -justify-space-between h-mt-2 h-ml-10'>\r\n                <Typography variant='body2' className='p-gray-color-typography h-ml-32'>50%</Typography>\r\n                <Typography variant='body2'>{columnInfo.analysis.quartile.q2}</Typography>\r\n              </div>\r\n\r\n              <div className='h-d_flex -justify-space-between h-mt-2 h-ml-10'>\r\n                <Typography variant='body2' className='p-gray-color-typography h-ml-32'>75%</Typography>\r\n                <Typography variant='body2'>{columnInfo.analysis.quartile.q3}</Typography>\r\n              </div>\r\n            </>\r\n          }\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}","import React from 'react'\r\nimport { ColumnInfo } from 'api/file-api';\r\nimport 'app/modules/dataset/dataset-view/css/statistic-tab.scss'\r\nimport ColumnChart from './column-chart.component';\r\n\r\ninterface AnalysisTabProps {\r\n  value: number,\r\n  index: number,\r\n  columns: Array<ColumnInfo>\r\n}\r\n\r\nexport default function AnalysisTab(props: AnalysisTabProps) {\r\n  const { value, index, columns } = props\r\n\r\n  return (\r\n    <div hidden={value !== index} className='b-statistic-tab'>\r\n      {columns.map((column, index) =>\r\n        <ColumnChart\r\n          key={index}\r\n          columnInfo={column}\r\n        />\r\n      )}\r\n    </div>\r\n  )\r\n}","import {\r\n  Grid,\r\n  IconButton, Tab,\r\n  Tabs,\r\n\r\n  Tooltip,\r\n  Typography\r\n} from '@material-ui/core'\r\nimport {\r\n  GetApp,\r\n  GridOn\r\n} from '@material-ui/icons'\r\nimport { Skeleton } from '@material-ui/lab'\r\nimport FileAPI, { FileInfo } from 'api/file-api'\r\nimport 'app/modules/dataset/dataset-view/css/preview-files.scss'\r\nimport { DatasetViewContext } from 'app/modules/dataset/dataset-view/pages/context.component'\r\nimport clsx from 'clsx'\r\nimport SearchField from 'dataworld/parts/search-field/search-field.component'\r\nimport React, { useContext, useEffect, useState } from 'react'\r\nimport HandleCommon from 'utils/handle-common'\r\nimport { DataTabState } from '../data-tab/data-tab.component'\r\nimport FileInfoTab from '../file-info-tab/file-info-tab.component'\r\nimport AnalysisTab from '../statistic-tab/statistic-tab.component'\r\n\r\ninterface PreviewFileProps {\r\n  state: DataTabState,\r\n  setCurrentFileAndContent: (fileName: string) => void\r\n}\r\n\r\nexport default function PreviewFile(props: PreviewFileProps) {\r\n  const { setCurrentFileAndContent, state } = props\r\n  const { files, datasetValues, isLoadingData } = useContext(DatasetViewContext)\r\n  const [value, setValue] = useState<number>(0);\r\n  const [filesFilter, setFilesFilter] = useState<Array<FileInfo>>(files)\r\n\r\n  const handleChange = (event: React.ChangeEvent<{}>, newValue: number) => {\r\n    setValue(newValue);\r\n  };\r\n\r\n  const selectFile = (fileName: string) => {\r\n    setCurrentFileAndContent(fileName)\r\n  }\r\n\r\n  const downloadFile = async () => {\r\n    const { path } = state.currentFile.info\r\n    const { _id } = datasetValues.dataset\r\n    const result = await FileAPI.downloadFileByPath(path, _id)\r\n    let url = window.URL.createObjectURL(result.data);\r\n    let link = document.createElement('a');\r\n    link.href = url;\r\n    link.download = state.currentFile.info.name;\r\n    link.click();\r\n  }\r\n\r\n  const handleSearch = (event: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\r\n    setFilesFilter(files?.filter(file =>\r\n      file.name.trim().toLowerCase().includes(event.target.value.trim())\r\n    ))\r\n  }\r\n\r\n  useEffect(() => {\r\n    setFilesFilter(files)\r\n  }, [files])\r\n\r\n  return (\r\n    <div className='b-preview-files h-mt-32'>\r\n      <Grid container spacing={0}>\r\n        <Grid item xs={3} className='b-select-file'>\r\n          <div className='b-files'>\r\n            {!isLoadingData && <Typography variant='h6'>Thông tin files</Typography>}\r\n\r\n            {isLoadingData ?\r\n              <Skeleton width={70} /> :\r\n              <Typography className='p-gray-color-typography'>\r\n                {HandleCommon.formatBytes(datasetValues.dataset.size)}\r\n              </Typography>\r\n            }\r\n\r\n            {isLoadingData ?\r\n              <Skeleton width={200} height={50} /> :\r\n              <SearchField\r\n                placeHolder='Tìm kiếm files...'\r\n                className='h-mt-6 h-mb-6'\r\n                onChange={handleSearch}\r\n              />\r\n            }\r\n\r\n            {isLoadingData ?\r\n              <Skeleton width={120} /> :\r\n              <div className=''>\r\n                {filesFilter?.map((file, index) => (\r\n                  <div className='p-file-info h-mt-10' key={index}>\r\n                    <GridOn fontSize='small' color='action' />\r\n\r\n                    <Tooltip title={file.name}>\r\n                      <button\r\n                        className={clsx({ 'p-file-name': file.name === state.currentFileName },\r\n                          { 'p-button-span h-ml-4': true })}\r\n                        onClick={() => selectFile(file.name)}\r\n                      >\r\n                        {file.name}\r\n                      </button>\r\n                    </Tooltip>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            }\r\n\r\n          </div>\r\n        </Grid>\r\n\r\n        <Grid item xs={9}>\r\n          <div className='b-preview h-ml-20 h-mr-20'>\r\n            <div className='p-title-file h-ml-30 h-mt-12'>\r\n              {state.isLoadingFile ?\r\n                <Skeleton width={500} /> :\r\n                <>\r\n                  <Typography variant='h6'>{state.currentFile?.info.name}</Typography>\r\n\r\n                  <Typography variant='h6' className='h-ml-4 p-gray-color-typography'>\r\n                    ({HandleCommon.formatBytes(state.currentFile.info.size)})\r\n                  </Typography>\r\n                </>\r\n              }\r\n\r\n              {!state.isLoadingFile &&\r\n                <div className='p-option h-mt-4'>\r\n                  <IconButton onClick={downloadFile}>\r\n                    <GetApp color='action' />\r\n                  </IconButton>\r\n                </div>\r\n              }\r\n            </div>\r\n\r\n            {!state.isLoadingFile &&\r\n              <div className='p-preview-tab h-mt-12'>\r\n                <Tabs value={value} onChange={handleChange}>\r\n                  <Tab label=\"Thông tin\" id='column' />\r\n\r\n                  <Tab label=\"Thống kê\" id='statistic' />\r\n                </Tabs>\r\n              </div>\r\n            }\r\n\r\n            <FileInfoTab\r\n              value={value}\r\n              index={0}\r\n              rowsData={state.currentFile.content.content}\r\n              fileInfo={state.currentFile.info}\r\n              isLoadingFile={state.isLoadingFile}\r\n            />\r\n\r\n            <AnalysisTab\r\n              value={value}\r\n              index={1}\r\n              columns={state.currentFile.info.columns}\r\n            />\r\n          </div>\r\n        </Grid>\r\n      </Grid>\r\n    </div>\r\n  )\r\n}","import { yupResolver } from '@hookform/resolvers/yup'\r\nimport {\r\n  Button,\r\n  Checkbox,\r\n  Chip,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogTitle,\r\n  FormControl,\r\n  FormControlLabel,\r\n  FormGroup,\r\n  Grid,\r\n  IconButton,\r\n  TextField,\r\n  Typography\r\n} from '@material-ui/core'\r\nimport {\r\n  AddCircle, Close\r\n} from '@material-ui/icons'\r\nimport DatasetAPI, { Tags } from 'api/dataset-api'\r\nimport CommonAPI from 'api/common-api'\r\nimport 'app/modules/dataset/dataset-view/css/tags-dialog.scss'\r\nimport SearchField from 'dataworld/parts/search-field/search-field.component'\r\nimport addToast from 'dataworld/parts/toast/add-toast.component'\r\nimport React, { useContext, useEffect, useState } from 'react'\r\nimport { useForm } from 'react-hook-form'\r\nimport { STATUS_OK } from 'services/axios/common-services.const'\r\nimport * as yup from 'yup'\r\nimport { DatasetViewContext } from '../../pages/context.component'\r\n\r\nexport interface TagsDialogProps {\r\n  open: boolean;\r\n  onClose: () => void,\r\n}\r\n\r\ninterface FormValues {\r\n  tagsName: string\r\n}\r\n\r\ninterface LabelTagsProps {\r\n  tags: Tags\r\n}\r\n\r\nconst LabelTags = ({ tags }: LabelTagsProps) => {\r\n  return (\r\n    <div className='h-d_flex -align-center'>\r\n      <Typography>{tags.name}</Typography>\r\n\r\n      <Typography\r\n        style={{ fontStyle: 'italic' }}\r\n        variant='body2'\r\n        className='p-gray-color-typography h-ml-4'\r\n      >\r\n        ({tags.followersLength} người theo dõi • {tags.datasetsLength} datasets )\r\n      </Typography>\r\n    </div>\r\n\r\n  )\r\n}\r\n\r\nexport default function TagsDialog(props: TagsDialogProps) {\r\n  const { open, onClose } = props\r\n  const { datasetValues, setDatasetTags } = useContext(DatasetViewContext)\r\n  const [allTags, setAllTags] = useState<Array<Tags> | undefined>(undefined)\r\n  const [checkedTags, setCheckedTags] = useState<Array<Tags>>(datasetValues.dataset.tags)\r\n  const [searchTags, setSearchTags] = useState<Array<Tags>>([])\r\n\r\n  const validationSchema = yup.object().shape({\r\n    tagsName: yup.string().trim()\r\n      .matches(/^(?=.{1,20}$)[a-zA-Z0-9]+$/, \"Tags phải có 1-20 ký tự. Không sử dụng các ký tự đặc biệt\")\r\n  })\r\n\r\n  const { register, errors, handleSubmit, watch, setError } = useForm<FormValues>({\r\n    defaultValues: {\r\n      tagsName: ''\r\n    },\r\n    resolver: yupResolver(validationSchema)\r\n  })\r\n\r\n\r\n  const handleSelect = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    const { name } = event.target\r\n    let newState: Array<Tags> = [];\r\n    if (isCheckedTag(name)) {\r\n      newState = [...checkedTags, { name: name }];\r\n    } else {\r\n      newState = checkedTags.filter(tags => tags.name !== name);\r\n    }\r\n    setCheckedTags(newState)\r\n  }\r\n\r\n  const isCheckedTag = (newTags: string) => {\r\n    return checkedTags.findIndex(tags => tags.name === newTags) < 0\r\n  }\r\n\r\n  const handleSearch = (event: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\r\n    if (allTags) {\r\n      setSearchTags(allTags.filter(tags => tags.name.includes(event.target.value)))\r\n    }\r\n  }\r\n\r\n  const handleAddTag = (data: FormValues) => {\r\n    const name = data.tagsName.trim().toLowerCase()\r\n    if (isCheckedTag(data.tagsName.toLowerCase())) {\r\n      const newState = [...checkedTags, { name: name }];\r\n      setCheckedTags(newState)\r\n    } else {\r\n      setError('tagsName', { message: 'Tags đã được sử dụng' })\r\n    }\r\n  }\r\n\r\n  const handleClose = () => {\r\n    setSearchTags(allTags ? allTags : searchTags)\r\n    onClose()\r\n  }\r\n\r\n  const handleDelete = (tagsDelete: Tags) => () => {\r\n    setCheckedTags(checkedTags.filter((tags) => tags.name !== tagsDelete.name));\r\n  };\r\n\r\n  const saveTags = async () => {\r\n    const result = await DatasetAPI.updateTags(datasetValues.dataset._id, datasetValues.dataset.tags, checkedTags)\r\n    if (result.status === STATUS_OK) {\r\n      addToast({ message: result.message, type: \"success\" })\r\n      setDatasetTags(checkedTags)\r\n      onClose()\r\n    } else {\r\n      addToast({ message: result.message, type: \"error\" })\r\n    }\r\n  }\r\n\r\n  const disableButton = () => {\r\n    const oldTags = datasetValues.dataset.tags\r\n    const differentTags = checkedTags.filter(({ name: id1 }) => !oldTags.some(({ name: id2 }) => id2 === id1));\r\n    if (differentTags.length > 0 || (differentTags.length === 0 && checkedTags.length < oldTags.length)) {\r\n      return false\r\n    }\r\n    return true\r\n  }\r\n\r\n  useEffect(() => {\r\n    const getTags = async () => {\r\n      if (open) {\r\n        const result = await CommonAPI.getAllTags()\r\n        setAllTags(result.data)\r\n        setSearchTags(result.data)\r\n      }\r\n    }\r\n    getTags()\r\n  }, [open])\r\n\r\n  return (\r\n    <Dialog\r\n      className='b-dialog-tags'\r\n      open={open}\r\n      fullWidth={true}\r\n      maxWidth='md'\r\n    >\r\n      <DialogTitle id=\"add-tags-title\" className='b-title'>\r\n        <IconButton onClick={handleClose} className='p-icon-close'>\r\n          <Close />\r\n        </IconButton>\r\n\r\n        <Typography variant='h6' className='f-weight-700'>Cập nhật tags</Typography>\r\n      </DialogTitle>\r\n\r\n      <DialogContent className='b-content'>\r\n        <Grid container spacing={0}>\r\n          <Grid item xs={5} className='b-select-tags'>\r\n            <div className='p-search-bar'>\r\n              <SearchField\r\n                placeHolder='Tìm kiếm tags...'\r\n                onChange={handleSearch}\r\n              />\r\n            </div>\r\n\r\n            <FormControl component=\"fieldset\" className='p-select'>\r\n              <Typography className='h-mb-8 f-weight-700'>Tags hay dùng</Typography>\r\n\r\n              <FormGroup className='h-ml-10'>\r\n                {searchTags.map((tags, index) => (\r\n                  <FormControlLabel\r\n                    key={index}\r\n                    control={\r\n                      <Checkbox\r\n                        className='h-mr-8 h-mt-2'\r\n                        checked={!isCheckedTag(tags.name)}\r\n                        onChange={(event) => handleSelect(event)}\r\n                        color='primary'\r\n                        name={tags.name}\r\n                      />\r\n                    }\r\n                    label={<LabelTags tags={tags} />}\r\n                  />\r\n                ))}\r\n              </FormGroup>\r\n            </FormControl>\r\n          </Grid>\r\n\r\n          <Grid item xs={7} className='b-input-tags'>\r\n            <form className='p-input h-mb-16' onSubmit={handleSubmit(handleAddTag)}>\r\n              <TextField\r\n                placeholder='Nhập tags...'\r\n                name='tagsName'\r\n                required\r\n                inputRef={register}\r\n                fullWidth\r\n                variant=\"outlined\"\r\n                size=\"small\"\r\n              />\r\n\r\n              <IconButton\r\n                className='h-ml-10 p-button-add-tag'\r\n                type='submit'\r\n                disabled={watch('tagsName').trim() === ''}\r\n              >\r\n                <AddCircle color='primary' fontSize='large' />\r\n              </IconButton>\r\n            </form>\r\n\r\n            {errors.tagsName && watch('tagsName') !== '' &&\r\n              <Typography className='p-validate-error h-mb-6'>\r\n                {errors.tagsName.message}\r\n              </Typography>\r\n            }\r\n\r\n            <ul className='p-display-list-tags'>\r\n              {checkedTags.map((tags, index) => (\r\n                <li key={index} className='h-mb-4'>\r\n                  <Chip\r\n                    label={tags.name}\r\n                    variant='outlined'\r\n                    color='primary'\r\n                    onDelete={handleDelete(tags)} />\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          </Grid>\r\n        </Grid>\r\n\r\n      </DialogContent>\r\n      <DialogActions className='b-actions'>\r\n        <Button\r\n          className='p-round-button p-button-save-color'\r\n          onClick={saveTags}\r\n          disabled={disableButton()}\r\n        >\r\n          Lưu\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  )\r\n}","import {\r\n  Accordion,\r\n  AccordionDetails,\r\n  AccordionSummary,\r\n  Button,\r\n  FormControlLabel,\r\n  Grid,\r\n  IconButton,\r\n  Typography\r\n} from '@material-ui/core'\r\nimport {\r\n  Check,\r\n  Close,\r\n  DescriptionOutlined, EditOutlined,\r\n  ExpandMore,\r\n  LocalOfferOutlined\r\n} from '@material-ui/icons'\r\nimport { Skeleton } from '@material-ui/lab'\r\nimport 'app/modules/dataset/dataset-view/css/data-tab.scss'\r\nimport { DatasetViewContext } from 'app/modules/dataset/dataset-view/pages/context.component'\r\nimport { DatasetVisibility } from 'app/modules/dataset/_common/common.const'\r\nimport clsx from 'clsx'\r\nimport ConfirmDialog from 'dataworld/blocks/confirm-dialog/confirm-dialog.component'\r\nimport TinyMCEEditor from 'dataworld/blocks/tinymce-editor/tinymce-editor.component'\r\nimport Parser from 'html-react-parser'\r\nimport React, { useContext } from 'react'\r\nimport PreviewFile from '../preview-files/preview-files.component'\r\nimport TagsDialog from '../tags-dialog/tags-dialog.component'\r\nimport { DataTabState } from './data-tab.component'\r\n\r\n\r\ninterface DataTabTemplateProps {\r\n  state: DataTabState,\r\n  value: number,\r\n  index: number,\r\n  handleOpenTags: () => void,\r\n  handleCloseTags: () => void,\r\n  handleCloseConfirmVisibility: () => void,\r\n  handleAcceptChangeVisibility: () => void,\r\n  handleEdit: (event: React.MouseEvent<HTMLLabelElement, MouseEvent>) => void,\r\n  handleSave: (event: React.MouseEvent<HTMLLabelElement, MouseEvent>) => void,\r\n  changeVisibility: (event: React.MouseEvent<HTMLLabelElement, MouseEvent>) => void,\r\n  setChangeDescription: (change: string) => void,\r\n  setCurrentFileAndContent: (fileName: string) => void,\r\n  handleClickTags: (tags: object) => void\r\n}\r\n\r\nexport default function DataTabTemplate(props: DataTabTemplateProps) {\r\n  const { state, value, index, changeVisibility, handleCloseConfirmVisibility,\r\n    handleOpenTags, handleCloseTags, handleSave, handleEdit, handleClickTags,\r\n    setChangeDescription, setCurrentFileAndContent, handleAcceptChangeVisibility } = props\r\n  const { datasetValues, ownerDataset, isLoadingData } = useContext(DatasetViewContext)\r\n\r\n  const isPrivate = datasetValues.dataset.visibility === DatasetVisibility.PRIVATE_DATASET\r\n  const privateDialogTitle = isPrivate ? 'Chuyển sang Dataset công khai?' : 'Chuyển sang Dataset cá nhân?'\r\n  const privateDialogContent = isPrivate ?\r\n    'Dataset ở chế độ công khai, tất cả người dùng trong cộng đồng Data World đều có thể truy cập.' :\r\n    'Dataset ở chế độ cá nhân, chỉ mình bạn có quyền truy cập.'\r\n\r\n  return (\r\n    <>\r\n      <div\r\n        id='data-tab'\r\n        hidden={value !== index}\r\n        className='t-data-tab h-mt-32 h-mb-20'>\r\n\r\n        <div className='b-info'>\r\n          <div className='p-icon-text h-ml-20'>\r\n            {!isLoadingData &&\r\n              <>\r\n                <LocalOfferOutlined />\r\n                <Typography className='h-ml-4'>Tags: </Typography>\r\n              </>\r\n            }\r\n\r\n            {isLoadingData ?\r\n              <Skeleton width={500} height={50} /> :\r\n              <div className='h-ml-10 h-d_flex'>\r\n                {datasetValues.dataset.tags.map((item, index) => (\r\n                  < Typography\r\n                    className='h-ml-2 p-text'\r\n                    onClick={() => handleClickTags({ tags: [item.name] })}\r\n                    key={index}\r\n                  >\r\n                    {index !== datasetValues.dataset.tags.length - 1 ? `${item.name}, ` : item.name}\r\n                  </Typography>\r\n                ))}\r\n              </div>\r\n            }\r\n          </div>\r\n\r\n          {ownerDataset &&\r\n            <div className='p-icon-text h-mr-10'>\r\n              {isLoadingData ?\r\n                <Skeleton width={120} height={50} /> :\r\n                <>\r\n                  <Button\r\n                    variant=\"outlined\"\r\n                    startIcon={<EditOutlined />}\r\n                    onClick={handleOpenTags}>\r\n                    Chỉnh sửa\r\n                  </Button>\r\n\r\n                  <TagsDialog\r\n                    open={state.openTags}\r\n                    onClose={handleCloseTags}\r\n                  />\r\n                </>\r\n              }\r\n            </div>\r\n          }\r\n        </div>\r\n\r\n        {ownerDataset &&\r\n          <div className='b-dataset-info h-mt-32'>\r\n            {isLoadingData ?\r\n              <Skeleton width='100%' height={90} /> :\r\n              <Accordion>\r\n                <AccordionSummary\r\n                  className='p-summary'\r\n                  id='make-easy'\r\n                >\r\n                  <ExpandMore className='h-mr-10' />\r\n                  <Typography>Thông tin về dataset</Typography>\r\n                  <FormControlLabel\r\n                    label=''\r\n                    className='h-ml-20'\r\n                    onClick={(event) => changeVisibility(event)}\r\n                    control={\r\n                      <Button\r\n                        type='button'\r\n                        variant='outlined'\r\n                        color='primary'\r\n                        className='p-button-visibility'\r\n                      >\r\n                        {isPrivate ? 'Công khai' : 'Cá nhân'}\r\n                      </Button>\r\n                    }\r\n                  />\r\n                  <ConfirmDialog\r\n                    open={state.openConfirmVisibility}\r\n                    onClose={handleCloseConfirmVisibility}\r\n                    onAccept={handleAcceptChangeVisibility}\r\n                    title={privateDialogTitle}\r\n                    content={privateDialogContent}\r\n                  />\r\n\r\n                </AccordionSummary>\r\n                <AccordionDetails className='p-detail-info h-ml-4'>\r\n                  <Grid container spacing={3}>\r\n                    <Grid item xs={6}>\r\n                      <Typography variant='h6'>Thêm thông tin về dataset</Typography>\r\n                      <div className='p-info'>\r\n                        {state.easyUse.subtitle ? <Check fontSize='small' /> : <Close fontSize='small' />}\r\n                        <Typography\r\n                          className={clsx({ 'p-gray-color-typography': state.easyUse.subtitle },\r\n                            { 'h-ml-4': true }, { 'p-blue-color': !state.easyUse.subtitle })}\r\n                        >\r\n                          Thêm subtitle\r\n                        </Typography>\r\n                      </div>\r\n\r\n                      <div className='p-info'>\r\n                        {state.easyUse.tags ? <Check fontSize='small' /> : <Close fontSize='small' />}\r\n                        <Typography\r\n                          className={clsx({ 'p-gray-color-typography': state.easyUse.tags },\r\n                            { 'h-ml-4': true }, { 'p-blue-color': !state.easyUse.tags })}\r\n                        >\r\n                          Thêm tags\r\n                        </Typography>\r\n                      </div>\r\n\r\n                      <div className='p-info'>\r\n                        {state.easyUse.description ? <Check fontSize='small' /> : <Close fontSize='small' />}\r\n                        <Typography\r\n                          className={clsx({ 'p-gray-color-typography': state.easyUse.description },\r\n                            { 'h-ml-4': true }, { 'p-blue-color': !state.easyUse.description })}\r\n                        >\r\n                          Thêm mô tả về dataset\r\n                        </Typography>\r\n                      </div>\r\n\r\n                      <div className='p-info'>\r\n                        {state.easyUse.thumbnail ? <Check fontSize='small' /> : <Close fontSize='small' />}\r\n                        <Typography\r\n                          className={clsx({ 'p-gray-color-typography': state.easyUse.thumbnail },\r\n                            { 'h-ml-4': true }, { 'p-blue-color': !state.easyUse.thumbnail })}\r\n                        >\r\n                          Thêm thumnail\r\n                        </Typography>\r\n                      </div>\r\n                    </Grid>\r\n\r\n                    <Grid item xs={6}>\r\n                      <Typography variant='h6'>Thêm thông tin về file trong dataset</Typography>\r\n                      <div className='p-info'>\r\n                        {state.easyUse.fileInfo ? <Check fontSize='small' /> : <Close fontSize='small' />}\r\n                        <Typography\r\n                          className={clsx({ 'p-gray-color-typography': state.easyUse.fileInfo },\r\n                            { 'h-ml-4': true }, { 'p-blue-color': !state.easyUse.fileInfo })}\r\n                        >\r\n                          Thêm mô tả ít nhất 1 file\r\n                        </Typography>\r\n                      </div>\r\n                    </Grid>\r\n                  </Grid>\r\n\r\n                </AccordionDetails>\r\n              </Accordion>\r\n            }\r\n          </div>\r\n        }\r\n\r\n        {isLoadingData ?\r\n          <Skeleton width='100%' height={90} /> :\r\n          <div className='b-description h-mt-32'>\r\n            <Accordion>\r\n              <AccordionSummary\r\n                className='p-summary'\r\n                expandIcon={<ExpandMore />}\r\n                id='description'\r\n              >\r\n\r\n                <Typography className='h-d_flex'>\r\n                  <DescriptionOutlined />\r\n                  <span className='h-ml-4'>Mô tả Dataset</span>\r\n                </Typography>\r\n\r\n                {ownerDataset &&\r\n                  <>\r\n                    {state.isEdit ?\r\n                      <>\r\n                        <FormControlLabel\r\n                          label=''\r\n                          className='h-ml-20'\r\n                          onClick={(event) => handleSave(event)}\r\n                          control={\r\n                            <button\r\n                              className='p-button-edit p-btn-save'\r\n                              disabled={state.changeDescription === datasetValues.dataset.description}\r\n                            >\r\n                              Lưu\r\n                            </button>\r\n                          }\r\n                        />\r\n                        <FormControlLabel\r\n                          label=''\r\n                          onClick={(event) => handleEdit(event)}\r\n                          control={\r\n                            <button className='p-button-edit p-btn-cancel'>Hủy</button>\r\n                          }\r\n                        />\r\n                      </>\r\n                      :\r\n                      <FormControlLabel\r\n                        label=''\r\n                        className='h-ml-20'\r\n                        onClick={(event) => handleEdit(event)}\r\n                        control={\r\n                          <IconButton >\r\n                            <EditOutlined />\r\n                          </IconButton>\r\n                        }\r\n                      />\r\n                    }\r\n                  </>\r\n                }\r\n              </AccordionSummary>\r\n\r\n              <AccordionDetails className='b-details' style={{ display: 'block' }}>\r\n                {\r\n                  Parser(datasetValues.dataset.description ?\r\n                    datasetValues.dataset.description :\r\n                    `<p class='p-gray-color-typography'>Chưa có mô tả file</p>`)\r\n                }\r\n              </AccordionDetails>\r\n            </Accordion>\r\n          </div>\r\n        }\r\n\r\n        {state.isEdit && ownerDataset &&\r\n          <div className='h-mt-32'>\r\n            <TinyMCEEditor\r\n              values={state.changeDescription}\r\n              setValues={setChangeDescription}\r\n              height={300} />\r\n          </div>\r\n        }\r\n\r\n        <PreviewFile setCurrentFileAndContent={setCurrentFileAndContent} state={state} />\r\n      </div>\r\n    </>\r\n\r\n  )\r\n}","import DatasetAPI from 'api/dataset-api'\r\nimport FileAPI, { fileDefaultValues, FileInfo } from 'api/file-api'\r\nimport { STATUS_OK } from 'services/axios/common-services.const'\r\nimport { DatasetVisibility } from 'app/modules/dataset/_common/common.const'\r\nimport { DatasetViewContext } from 'app/modules/dataset/dataset-view/pages/context.component'\r\nimport addToast from 'dataworld/parts/toast/add-toast.component'\r\nimport React, { useContext, useEffect, useState } from 'react'\r\nimport { useHistory } from 'react-router'\r\nimport queryString from 'query-string'\r\nimport { TabProps } from '../dataset-tab/dataset-tab.component'\r\nimport DataTabTemplate from './data-tab.template'\r\n\r\n\r\ninterface EasyUse {\r\n  subtitle: boolean,\r\n  tags: boolean,\r\n  description: boolean,\r\n  thumbnail: boolean,\r\n  fileInfo: boolean,\r\n}\r\n\r\nexport interface FileContentWithName {\r\n  name: string,\r\n  content: Array<object>\r\n}\r\n\r\nexport interface DataTabState {\r\n  isLoadingFile: boolean,\r\n  isEdit: boolean,\r\n  changeDescription: string,\r\n  openTags: boolean,\r\n  openConfirmVisibility: boolean,\r\n  easyUse: EasyUse\r\n  currentFileName: string,\r\n  contents: Array<FileContentWithName>\r\n  currentFile: CurrentFile\r\n}\r\n\r\ninterface CurrentFile {\r\n  info: FileInfo,\r\n  content: FileContentWithName\r\n}\r\n\r\nconst currentFile: CurrentFile = {\r\n  info: { ...fileDefaultValues },\r\n  content: {\r\n    name: '',\r\n    content: []\r\n  }\r\n}\r\n\r\nexport default function DataTab(props: TabProps) {\r\n  const { value, index } = props\r\n  const history = useHistory()\r\n  const { datasetValues, setDatasetDescription, files,\r\n    setVisibilityDataset } = useContext(DatasetViewContext)\r\n\r\n  const [state, setState] = useState<DataTabState>({\r\n    isLoadingFile: true,\r\n    isEdit: false,\r\n    changeDescription: '',\r\n    openTags: false,\r\n    openConfirmVisibility: false,\r\n    easyUse: {\r\n      subtitle: false,\r\n      tags: false,\r\n      description: false,\r\n      thumbnail: false,\r\n      fileInfo: false,\r\n    },\r\n    currentFileName: '',\r\n    contents: [],\r\n    currentFile: currentFile,\r\n  })\r\n\r\n  const handleOpenTags = async () => {\r\n    setState({\r\n      ...state,\r\n      openTags: true,\r\n    })\r\n  };\r\n\r\n  const handleCloseTags = () => {\r\n    setState({\r\n      ...state,\r\n      openTags: false,\r\n    })\r\n  };\r\n\r\n\r\n  const handleCloseConfirmVisibility = () => {\r\n    setState({\r\n      ...state,\r\n      openConfirmVisibility: false\r\n    })\r\n  };\r\n\r\n  const handleAcceptChangeVisibility = async () => {\r\n    const visibility = datasetValues.dataset.visibility === DatasetVisibility.PRIVATE_DATASET ?\r\n      DatasetVisibility.PUBLIC_DATASET : DatasetVisibility.PRIVATE_DATASET\r\n    const result = await DatasetAPI.updateVisibility(datasetValues.dataset._id, visibility)\r\n    if (result.status === STATUS_OK) {\r\n      addToast({ message: result.message, type: \"success\" })\r\n      setVisibilityDataset(visibility)\r\n    } else {\r\n      addToast({ message: result.message, type: \"error\" })\r\n    }\r\n  }\r\n\r\n  const handleEdit = (event: React.MouseEvent<HTMLLabelElement, MouseEvent>) => {\r\n    event.preventDefault()\r\n    event.stopPropagation()\r\n    setState({\r\n      ...state,\r\n      isEdit: !state.isEdit,\r\n      changeDescription: datasetValues.dataset.description\r\n    })\r\n  }\r\n\r\n  const handleSave = async (event: React.MouseEvent<HTMLLabelElement, MouseEvent>) => {\r\n    event.preventDefault()\r\n    event.stopPropagation()\r\n    const result = await DatasetAPI.updateDescription(datasetValues.dataset._id, state.changeDescription)\r\n    if (result.status === STATUS_OK) {\r\n      addToast({ message: result.message, type: \"success\" })\r\n      setDatasetDescription(state.changeDescription)\r\n      setState({\r\n        ...state,\r\n        isEdit: false,\r\n      })\r\n    } else {\r\n      addToast({ message: result.message, type: \"error\" })\r\n    }\r\n  }\r\n\r\n  const changeVisibility = (event: React.MouseEvent<HTMLLabelElement, MouseEvent>) => {\r\n    event.stopPropagation()\r\n    setState({\r\n      ...state,\r\n      openConfirmVisibility: true\r\n    })\r\n  }\r\n\r\n  const setChangeDescription = (change: string) => {\r\n    setState({\r\n      ...state,\r\n      changeDescription: change\r\n    })\r\n  }\r\n\r\n  const setCurrentFileAndContent = async (fileName: string) => {\r\n    const info = files.filter(file => (file.name === fileName))[0]\r\n    const index = state.contents.findIndex((file) => file.name === fileName)\r\n    if (index === -1) {\r\n      setState({\r\n        ...state,\r\n        isLoadingFile: true\r\n      })\r\n      const { path } = datasetValues.dataset\r\n      const filePath = `${path}/files/${fileName}`\r\n      const fileContent = await FileAPI.getOneFileInDataset(filePath)\r\n\r\n      setState({\r\n        ...state,\r\n        isLoadingFile: false,\r\n        currentFileName: fileName,\r\n        contents: [\r\n          ...state.contents,\r\n          {\r\n            name: fileName,\r\n            content: fileContent.data\r\n          }\r\n        ],\r\n        currentFile: {\r\n          info: info,\r\n          content: {\r\n            name: fileName,\r\n            content: fileContent.data\r\n          }\r\n        }\r\n      })\r\n    } else {\r\n      const content = state.contents.filter(content => (content.name === fileName))[0]\r\n      setState({\r\n        ...state,\r\n        currentFileName: fileName,\r\n        currentFile: {\r\n          info: info,\r\n          content: content\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  const handleClickTags = (tags: object) => {\r\n    const searchString = queryString.stringify(tags, { arrayFormat: \"index\" })\r\n    history.push(`/dataset/search?${searchString}`)\r\n  }\r\n\r\n  useEffect(() => {\r\n    const getFileContent = async () => {\r\n      const { path, description } = datasetValues.dataset\r\n      const filePath = `${path}/files/${files[0].name}`\r\n      const firstFileContent = await FileAPI.getOneFileInDataset(filePath)\r\n      setState((state) => ({\r\n        ...state,\r\n        isLoading: false,\r\n        changeDescription: description,\r\n        currentFileName: files[0].name,\r\n        isLoadingFile: false,\r\n        contents: [{\r\n          name: files[0].name,\r\n          content: firstFileContent.data\r\n        }],\r\n        currentFile: {\r\n          info: files[0],\r\n          content: {\r\n            name: files[0].name,\r\n            content: firstFileContent.data\r\n          }\r\n        }\r\n      }))\r\n    }\r\n    if (files.length !== 0) {\r\n      getFileContent()\r\n    }\r\n  }, [files]) //eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n  useEffect(() => {\r\n    const { description, subtitle, tags, thumbnail } = datasetValues.dataset\r\n    let fileDescription: boolean = false\r\n    for (let i = 0; i < files.length; ++i) {\r\n      if (files[i].description !== '') {\r\n        fileDescription = true\r\n        break;\r\n      }\r\n    }\r\n    setState((state) => ({\r\n      ...state,\r\n      easyUse: {\r\n        description: description !== '',\r\n        subtitle: subtitle !== '',\r\n        fileInfo: fileDescription,\r\n        tags: tags.length !== 0,\r\n        thumbnail: thumbnail !== '',\r\n      },\r\n    }))\r\n  }, [datasetValues.dataset, datasetValues.dataset.description, datasetValues.dataset.tags,\r\n  datasetValues.dataset.subtitle, datasetValues.dataset.thumbnail, files])\r\n\r\n  return (\r\n    <DataTabTemplate\r\n      state={state}\r\n      value={value}\r\n      index={index}\r\n      handleCloseConfirmVisibility={handleCloseConfirmVisibility}\r\n      handleAcceptChangeVisibility={handleAcceptChangeVisibility}\r\n      changeVisibility={changeVisibility}\r\n      handleEdit={handleEdit}\r\n      handleCloseTags={handleCloseTags}\r\n      handleClickTags={handleClickTags}\r\n      handleOpenTags={handleOpenTags}\r\n      handleSave={handleSave}\r\n      setChangeDescription={setChangeDescription}\r\n      setCurrentFileAndContent={setCurrentFileAndContent}\r\n    />\r\n  )\r\n}","import { Button, Grid, IconButton, TextField, Typography } from '@material-ui/core'\r\nimport { AddAPhoto, Delete } from '@material-ui/icons'\r\nimport DatasetAPI from 'api/dataset-api'\r\nimport { STATUS_OK } from 'services/axios/common-services.const'\r\nimport 'app/modules/dataset/dataset-view/css/settings-tab.scss'\r\nimport clsx from 'clsx'\r\nimport \"cropperjs/dist/cropper.css\"\r\nimport ConfirmDialog from 'dataworld/blocks/confirm-dialog/confirm-dialog.component'\r\nimport CropImage from 'dataworld/blocks/crop-image/crop-image.component'\r\nimport addToast from 'dataworld/parts/toast/add-toast.component'\r\nimport React, { useContext, useEffect, useMemo, useRef, useState } from 'react'\r\nimport { useForm } from 'react-hook-form'\r\nimport { DatasetViewContext } from 'app/modules/dataset/dataset-view/pages/context.component'\r\nimport { IMAGE_TYPE } from 'app/modules/dataset/_common/common.const'\r\nimport { useHistory } from 'react-router'\r\n\r\ninterface SettingsTabsProps {\r\n  index: number,\r\n  value: number,\r\n}\r\n\r\nconst options = [\r\n  { title: 'Tổng quát' },\r\n  { title: 'Ảnh nền' },\r\n  { title: 'Thumbnail' },\r\n]\r\ninterface DefaultValuesForm {\r\n  title: string,\r\n  subtitle: string,\r\n}\r\n\r\n\r\nexport default function SettingsTab(props: SettingsTabsProps) {\r\n  const { index, value } = props\r\n  const { datasetValues, setTitleAndSubtitle, setThumbnailDataset, setBannerDataset } = useContext(DatasetViewContext)\r\n\r\n  const [banner, setBanner] = useState<any>('')\r\n  const [thumbnail, setThumbnail] = useState<any>('')\r\n  const [cropperThumbnail, setCropperThumbnail] = useState<Cropper>()\r\n  const [cropperBanner, setCropperBanner] = useState<Cropper>();\r\n  const [deleteConfirm, setDeleteConfirm] = useState<boolean>(false)\r\n  const [currentOption, setCurrentOption] = useState<string>(options[0].title)\r\n  const inputFileRef = useRef<HTMLInputElement>(null)\r\n  const history = useHistory()\r\n\r\n  const changeDefaultValues = useMemo(() => {\r\n    const defaultValues: DefaultValuesForm = {\r\n      title: datasetValues.dataset.title,\r\n      subtitle: datasetValues.dataset.subtitle\r\n    }\r\n    return defaultValues\r\n  }, [datasetValues.dataset.title, datasetValues.dataset.subtitle])\r\n  const { register, handleSubmit, errors, watch, reset } = useForm({ defaultValues: changeDefaultValues })\r\n\r\n\r\n  const onSubmit = async (data: DefaultValuesForm) => {\r\n    const result = await DatasetAPI.updateTitleAndSubtitle(datasetValues.dataset._id, data.title, data.subtitle)\r\n    if (result.status === STATUS_OK) {\r\n      addToast({ message: result.message, type: \"success\" })\r\n      setTitleAndSubtitle(data.title, data.subtitle)\r\n    } else {\r\n      addToast({ message: result.message, type: \"error\" })\r\n    }\r\n  }\r\n\r\n  const openDeleteConfirm = (isOpen: boolean) => {\r\n    setDeleteConfirm(isOpen)\r\n  }\r\n\r\n  const acceptDelete = async () => {\r\n    const result = await DatasetAPI.deleteDataset(datasetValues.dataset._id)\r\n    if (result.status === STATUS_OK) {\r\n      addToast({ message: result.message, type: 'success' })\r\n      history.push('/dataset')\r\n    }\r\n  }\r\n\r\n  const uploadImage = async (imageType: number) => {\r\n    const banner = imageType === IMAGE_TYPE.BANNER\r\n    const cropperImage = banner ? cropperBanner : cropperThumbnail\r\n\r\n    cropperImage?.getCroppedCanvas().toBlob(async (blob) => {\r\n      if (blob) {\r\n        const formData = new FormData()\r\n        formData.append('datasetId', datasetValues.dataset._id)\r\n        formData.append('url', datasetValues.dataset.url)\r\n        formData.append('username', datasetValues.username)\r\n        formData.append('imageType', imageType.toString())\r\n        formData.append('image', blob, banner ? 'banner.png' : 'thumbnail.png')\r\n\r\n        const result = await DatasetAPI.uploadImage(formData)\r\n\r\n        if (result.status === STATUS_OK) {\r\n          addToast({ message: result.message, type: \"success\" })\r\n          banner ? setBannerDataset(result.data) : setThumbnailDataset(result.data)\r\n          banner ? setBanner('') : setThumbnail('')\r\n        } else {\r\n          addToast({ message: result.message, type: \"error\" })\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  const onFilechange = (event: React.ChangeEvent<HTMLInputElement>, mode: number) => {\r\n    /*Selected files data can be collected here.*/\r\n    event.preventDefault()\r\n    if (event.target.files && event.target.files.length > 0) {\r\n      const files = event.target.files\r\n      const reader = new FileReader()\r\n      reader.readAsDataURL(files[0])\r\n      reader.onload = () => {\r\n        mode === IMAGE_TYPE.BANNER ?\r\n          setBanner(reader.result as any) :\r\n          setThumbnail(reader.result as any)\r\n      }\r\n    }\r\n    event.target.value = ''\r\n  }\r\n\r\n  const handleClickInputFile = () => {\r\n    if (inputFileRef.current !== null) {\r\n      inputFileRef.current.click()\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    reset(changeDefaultValues)\r\n\r\n  }, [reset, changeDefaultValues])\r\n\r\n  return (\r\n    <div\r\n      hidden={index !== value}\r\n      className=\"t-settings-tab h-mt-32\"\r\n    >\r\n      <div className='p-title'>\r\n        <Typography variant='h6' className='h-ml-20'>Cài đặt</Typography>\r\n      </div>\r\n\r\n      <Grid container spacing={0} className='b-settings'>\r\n        <Grid item xs={3} className='p-options'>\r\n          {options.map((option, index) => (\r\n            <div className='h-mt-10' key={index}>\r\n              <button\r\n                className={clsx({ 'p-option-current': option.title === currentOption },\r\n                  { 'p-button-span h-ml-4 p-option-name': true })}\r\n                onClick={() => setCurrentOption(option.title)}\r\n              >\r\n                {option.title}\r\n              </button>\r\n            </div>\r\n\r\n          ))}\r\n        </Grid>\r\n\r\n        <Grid item xs={9}>\r\n          {currentOption === options[0].title &&\r\n            <div className='b-general'>\r\n              <form onSubmit={handleSubmit(onSubmit)}>\r\n                <div className='p-input-field'>\r\n                  <Typography className='h-mr-20 p-gray-color-typography'>Tiêu đề</Typography>\r\n                  <TextField\r\n                    variant='outlined'\r\n                    size='small'\r\n                    name='title'\r\n                    fullWidth\r\n                    required\r\n                    inputRef={register({\r\n                      minLength: 5,\r\n                      maxLength: 50\r\n                    })}\r\n                  />\r\n                </div>\r\n                {errors.title &&\r\n                  <Typography className='h-ml-100 p-validate-error h-mt-4 '>\r\n                    Tiêu đề phải có 5-50 ký tự. Có thể sử dụng chữ và số và các ký tự đặc biệt\r\n                  </Typography>\r\n                }\r\n\r\n                <div className='p-input-field h-mt-12'>\r\n                  <Typography className='h-mr-20 p-gray-color-typography'>Subtitle</Typography>\r\n                  <TextField\r\n                    variant='outlined'\r\n                    size='small'\r\n                    fullWidth\r\n                    name='subtitle'\r\n                    required\r\n                    inputRef={register({\r\n                      minLength: 5,\r\n                      maxLength: 80\r\n                    })}\r\n                  />\r\n                </div>\r\n\r\n                {errors.subtitle &&\r\n                  <Typography className='h-ml-100 p-validate-error h-mt-4'>\r\n                    Subtitle phải có 5-80 ký tự. Có thể sử dụng chữ và số và các ký tự đặc biệt\r\n                  </Typography>\r\n                }\r\n\r\n\r\n                <div className='p-action h-mt-32'>\r\n                  <Button\r\n                    className='h-ml-4 p-round-button'\r\n                    color='secondary'\r\n                    startIcon={<Delete />}\r\n                    onClick={() => openDeleteConfirm(true)}\r\n                    type=\"button\"\r\n                  >\r\n                    Xóa dataset\r\n                  </Button>\r\n\r\n                  <ConfirmDialog\r\n                    open={deleteConfirm}\r\n                    onClose={() => openDeleteConfirm(false)}\r\n                    onAccept={acceptDelete}\r\n                    acceptTheme='secondary'\r\n                    dialogTheme='warning'\r\n                    title='Xóa dataset'\r\n                    content='Toàn bộ dữ liệu của dataset và các dữ liệu liên quan sẽ bị xóa. \r\n                    Bạn có muốn tiếp tục?'\r\n                  />\r\n\r\n                  <Button\r\n                    variant='contained'\r\n                    className='p-round-button p-button-save-color'\r\n                    type=\"submit\"\r\n                    disabled={watch('title') === datasetValues?.dataset.title &&\r\n                      watch('subtitle') === datasetValues?.dataset.subtitle}\r\n                    size='small'>\r\n                    Lưu thay đổi\r\n                  </Button>\r\n                </div>\r\n\r\n              </form>\r\n            </div>\r\n          }\r\n\r\n          {\r\n            currentOption !== options[0].title &&\r\n            <div className='b-upload-banner-thumbnail'>\r\n              <div>\r\n                <input\r\n                  style={{ display: 'none' }}\r\n                  ref={inputFileRef}\r\n                  type='file'\r\n                  onChange={currentOption === options[1].title ?\r\n                    (event) => onFilechange(event, IMAGE_TYPE.BANNER) :\r\n                    (event) => onFilechange(event, IMAGE_TYPE.THUMBNAIL)}\r\n                  accept=\"image/*\"\r\n                />\r\n\r\n                <div onClick={handleClickInputFile} className='p-button-click'>\r\n                  <IconButton>\r\n                    <AddAPhoto color='primary' />\r\n                  </IconButton>\r\n                  <div>\r\n                    <button className='p-button-span'>\r\n                      {currentOption === options[1].title ? 'Upload ảnh nền' : 'Upload thumbnail'}\r\n                    </button>\r\n                  </div>\r\n                  <Typography className='p-gray-color-typography'>\r\n                    ({currentOption === options[1].title ? '1100x200' : '200x200'})\r\n                  </Typography>\r\n                </div>\r\n\r\n                <Button\r\n                  variant='contained'\r\n                  className='p-round-button p-button-save-color h-mt-20'\r\n                  type=\"submit\"\r\n                  disabled={currentOption === options[1].title ? banner === '' : thumbnail === ''}\r\n                  onClick={currentOption === options[1].title ?\r\n                    () => uploadImage(IMAGE_TYPE.BANNER) :\r\n                    () => uploadImage(IMAGE_TYPE.THUMBNAIL)}\r\n                  size='small'>\r\n                  Upload ảnh\r\n                </Button>\r\n              </div>\r\n\r\n              {currentOption === options[1].title ?\r\n                <div>\r\n                  {banner === '' ?\r\n                    <img\r\n                      alt='banner'\r\n                      src={datasetValues.dataset.banner}\r\n                      className='p-current-banner-thumbnail'\r\n                    />\r\n                    :\r\n                    <CropImage src={banner} setCropper={setCropperBanner} />\r\n                  }\r\n                </div> :\r\n                <div>\r\n                  {thumbnail === '' ?\r\n                    <img\r\n                      alt='thumbnail'\r\n                      src={datasetValues.dataset.thumbnail}\r\n                      className='p-current-banner-thumbnail'\r\n                    />\r\n                    :\r\n                    <CropImage src={thumbnail} setCropper={setCropperThumbnail} />\r\n                  }\r\n                </div>}\r\n            </div>\r\n          }\r\n        </Grid>\r\n      </Grid>\r\n    </div>\r\n\r\n  )\r\n}","import React, { useEffect, useState } from 'react'\r\nimport { Avatar, Button, ButtonGroup, IconButton, Popover, Typography } from '@material-ui/core'\r\nimport {\r\n  ThumbUp,\r\n  ThumbUpOutlined,\r\n  MoreHoriz, Reply,\r\n  DeleteOutline, Edit\r\n} from '@material-ui/icons';\r\nimport moment from 'moment'\r\nimport 'moment/locale/vi'\r\nimport Parser from 'html-react-parser'\r\nimport CommentAPI, { Comment } from 'api/comment-api';\r\nimport { Skeleton } from '@material-ui/lab';\r\nimport './comment-post.scss'\r\nimport { useHistory } from 'react-router';\r\nimport TinyMCEEditor from '../tinymce-editor/tinymce-editor.component';\r\nimport clsx from 'clsx';\r\nimport ConfirmDialog from '../confirm-dialog/confirm-dialog.component';\r\n\r\ninterface CommentProps {\r\n  accountId: string,\r\n  authorId: string,\r\n  index: number,\r\n  comment: Comment,\r\n  isLoading: boolean,\r\n  handleUpdateComment: (index: number) => void,\r\n  handleDeleteComment: (index: number) => void,\r\n  handleChangeLike: (index: number, isLike: boolean) => void,\r\n  setReply: (reply: number) => void\r\n}\r\n\r\nexport default function CommentPost(props: CommentProps) {\r\n  const { comment, isLoading, accountId, index, handleChangeLike,\r\n    authorId, handleUpdateComment, setReply, handleDeleteComment } = props\r\n  const history = useHistory()\r\n  const [anchorEl, setAnchorEl] = useState<HTMLElement | null>(null)\r\n  const [like, setLike] = useState<boolean>(false)\r\n  const [isEdit, setIsEdit] = useState<boolean>(false)\r\n  const [deleteComment, setDeleteComment] = useState<boolean>(false)\r\n  const [currentCommentContent, setCurrentCommentContent] = useState<string>(comment.content)\r\n\r\n  const changeLike = async (isLike: boolean) => {\r\n    await CommentAPI.likeOrUnLikeComment(comment._id)\r\n    handleChangeLike(index, isLike)\r\n  }\r\n\r\n  const gotoProfile = (username: string) => {\r\n    history.push(`/profile/${username}`)\r\n  }\r\n\r\n  const handleOptions = (event: React.MouseEvent<HTMLElement> | null) => {\r\n    setAnchorEl(event ? event.currentTarget : null)\r\n  }\r\n\r\n  const handleEditComment = (isEdit: boolean) => {\r\n    if (anchorEl) setAnchorEl(null)\r\n    if (currentCommentContent !== comment.content) setCurrentCommentContent(comment.content)\r\n    setIsEdit(isEdit)\r\n  }\r\n\r\n  const updateComment = async () => {\r\n    await CommentAPI.updateComment(comment._id, currentCommentContent)\r\n    handleUpdateComment(index)\r\n    setIsEdit(false)\r\n  }\r\n\r\n  const replyComment = () => {\r\n    const input = document.querySelector(\"#tiny-editor\")\r\n    setReply(index)\r\n    const timeout = setTimeout(() => {\r\n      input?.scrollIntoView()\r\n      clearTimeout(timeout)\r\n    }, 100)\r\n    setAnchorEl(null)\r\n  }\r\n\r\n  const handleDeleteDialog = (isOpen: boolean) => {\r\n    if (anchorEl) setAnchorEl(null)\r\n    setDeleteComment(isOpen)\r\n  }\r\n\r\n  const acceptDeleteComment = async () => {\r\n    await CommentAPI.deleteComment(comment._id)\r\n    handleDeleteComment(index)\r\n    setAnchorEl(null)\r\n  }\r\n\r\n  useEffect(() => {\r\n    const index = comment.like.findIndex(item => item === accountId)\r\n    setLike(index >= 0 ? true : false)\r\n    setCurrentCommentContent(comment.content)\r\n\r\n  }, [comment.like, accountId, comment.content])\r\n\r\n  return (\r\n    <div className='b-comment-post h-d_flex'>\r\n      <div className='-cursor-pointer'>\r\n        {isLoading ?\r\n          <Skeleton animation=\"wave\" variant=\"circle\" width={40} height={40} /> :\r\n          <Avatar\r\n            onClick={() => gotoProfile(comment.commentator.username)}\r\n            aria-label=\"avatar\"\r\n            src={comment.commentator.avatar}\r\n          />\r\n        }\r\n      </div>\r\n\r\n      <div className='b-comment h-ml-12'>\r\n        <div className='p-title'>\r\n          {isLoading ?\r\n            <div className='h-d_flex'>\r\n              <Skeleton width={50} height={10} className='h-ml-20' />\r\n              <Skeleton width={100} height={10} className='h-ml-20' />\r\n            </div> :\r\n            <div className='h-d_flex -justify-space-between'>\r\n              <div className='h-d_flex -align-center'>\r\n                <Typography\r\n                  variant='body2'\r\n                  className='h-ml-20 f-weight-700 -cursor-pointer'\r\n                  onClick={() => gotoProfile(comment.commentator.username)}\r\n                >\r\n                  {comment.commentator.name}\r\n                </Typography>\r\n                <Typography variant=\"body2\" className='h-ml-6 p-gray-color-typography'>\r\n                  Bình luận {moment(comment.lastUpdate).locale('vi').format('MMMM Do YYYY, hh:mm a')}\r\n                </Typography>\r\n              </div>\r\n\r\n              <div className='h-d_flex -align-center'>\r\n                {authorId === comment.commentator._id &&\r\n                  <Typography\r\n                    variant='body2'\r\n                    className='p-gray-color-typography p-author'\r\n                  >\r\n                    Tác giả\r\n                  </Typography>\r\n                }\r\n\r\n                <IconButton className='h-ml-20 h-mr-20' onClick={(event) => handleOptions(event)}>\r\n                  <MoreHoriz />\r\n                </IconButton>\r\n\r\n                <Popover\r\n                  open={Boolean(anchorEl)}\r\n                  disableScrollLock\r\n                  onClose={() => handleOptions(null)}\r\n                  anchorEl={anchorEl}\r\n                  anchorOrigin={{\r\n                    vertical: 'bottom',\r\n                    horizontal: 'right',\r\n                  }}\r\n                  transformOrigin={{\r\n                    vertical: 'top',\r\n                    horizontal: 'right',\r\n                  }}\r\n                >\r\n                  <ButtonGroup\r\n                    variant='outlined'\r\n                    orientation='vertical'\r\n                  >\r\n                    <Button\r\n                      startIcon={<Reply />}\r\n                      color='primary'\r\n                      onClick={replyComment}\r\n                    >\r\n                      Trả lời\r\n                    </Button>\r\n\r\n                    {accountId === comment.commentator._id &&\r\n                      <Button\r\n                        startIcon={<Edit />}\r\n                        color='primary'\r\n                        onClick={() => handleEditComment(true)}\r\n                      >\r\n                        Chỉnh sửa\r\n                      </Button>\r\n                    }\r\n\r\n                    {accountId === comment.commentator._id &&\r\n                      <Button\r\n                        startIcon={<DeleteOutline />}\r\n                        color='secondary'\r\n                        onClick={() => handleDeleteDialog(true)}\r\n                      >\r\n                        Xóa bình luận\r\n                      </Button>\r\n                    }\r\n                  </ButtonGroup>\r\n                </Popover>\r\n              </div>\r\n            </div>\r\n          }\r\n        </div>\r\n\r\n        <ConfirmDialog\r\n          open={deleteComment}\r\n          title='Xóa bình luận'\r\n          dialogTheme='warning'\r\n          acceptTheme='secondary'\r\n          content='Bạn có chắc chắn muốn xóa bình luận này không?'\r\n          onClose={() => handleDeleteDialog(false)}\r\n          onAccept={acceptDeleteComment}\r\n        />\r\n\r\n        <div className='p-comment-content'>\r\n          {comment.parent &&\r\n            <div className='p-reply p-gray-color-typography h-mb-10'>\r\n              <Typography\r\n                className='f-weight-700 -cursor-pointer'\r\n                variant='body2'\r\n                onClick={() => gotoProfile(comment.parent?.commentator.username)}\r\n              >\r\n                @{comment.parent.commentator.name}\r\n              </Typography>\r\n              {Parser(comment.parent.content)}\r\n            </div>\r\n          }\r\n\r\n          {isLoading ?\r\n            <>\r\n              <Skeleton width='100%' height={10} />\r\n              <Skeleton width='100%' height={10} />\r\n            </>\r\n            :\r\n            <>\r\n              {isEdit ?\r\n                <TinyMCEEditor\r\n                  values={currentCommentContent}\r\n                  setValues={setCurrentCommentContent}\r\n                  height={200}\r\n                />\r\n                :\r\n                <>\r\n                  {Parser(currentCommentContent)}\r\n                </>\r\n              }\r\n            </>\r\n          }\r\n        </div>\r\n\r\n        <div className={clsx({ 'h-d_flex p-actions': true, '-justify-flex-end': isEdit })}>\r\n          {isLoading ?\r\n            <Skeleton width={50} height={30} /> :\r\n            <>\r\n              {isEdit ?\r\n                <div>\r\n                  <Button\r\n                    variant='outlined'\r\n                    size='small'\r\n                    onClick={() => handleEditComment(false)}\r\n                    className='p-round-button'\r\n                  >\r\n                    Hủy\r\n                    </Button>\r\n                  <Button\r\n                    variant='contained'\r\n                    size='small'\r\n                    disabled={currentCommentContent === comment.content}\r\n                    className='p-round-button p-button-save-color h-ml-8'\r\n                    onClick={updateComment}\r\n                  >\r\n                    Cập nhật\r\n                    </Button>\r\n                </div>\r\n                :\r\n                <>\r\n                  {like ?\r\n                    <IconButton onClick={() => changeLike(false)}>\r\n                      < ThumbUp color='primary' />\r\n                    </IconButton> :\r\n                    <IconButton onClick={() => changeLike(true)}>\r\n                      <ThumbUpOutlined />\r\n                    </IconButton>\r\n                  }\r\n                  <Typography variant=\"body1\" className='h-ml-4'>{comment.countLike}</Typography>\r\n                </>\r\n              }\r\n            </>\r\n          }\r\n        </div>\r\n      </div>\r\n    </div >\r\n  )\r\n\r\n}","import { Avatar, Button, Typography } from '@material-ui/core'\r\nimport CommentAPI, { Comment, commentDefault } from 'api/comment-api'\r\nimport 'app/modules/dataset/dataset-view/css/comment-tab.scss'\r\nimport CommentPost from 'dataworld/blocks/comment-post/comment-post.component'\r\nimport TinyMCEEditor from 'dataworld/blocks/tinymce-editor/tinymce-editor.component'\r\nimport React, { useContext, useEffect, useState } from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport { STATUS_OK } from 'services/axios/common-services.const'\r\nimport { RootState } from 'store'\r\nimport { DatasetViewContext } from '../../pages/context.component'\r\nimport { TabProps } from '../dataset-tab/dataset-tab.component'\r\n\r\nexport default function CommentTabTemplate({ index, value }: TabProps) {\r\n  const { datasetValues, handleChangeComment } = useContext(DatasetViewContext)\r\n  const [comment, setComment] = useState<string>('')\r\n  const user = useSelector((state: RootState) => state.auth.user)\r\n  const [isLoading, setIsLoading] = useState<boolean>(true)\r\n  const [reply, setReply] = useState<number | null>(null)\r\n  const [listComment, setListComment] = useState<Array<Comment>>(Array(4).fill(commentDefault))\r\n\r\n  const postComment = async () => {\r\n    const result = await CommentAPI.postComment(datasetValues.dataset._id, comment, reply !== null ? listComment[reply]._id : '')\r\n    if (result.status === STATUS_OK) {\r\n      setListComment([\r\n        ...listComment,\r\n        result.data\r\n      ])\r\n      setComment('')\r\n      handleChangeComment(true)\r\n    }\r\n  }\r\n\r\n  const handleChangeLike = (index: number, isLike: boolean) => {\r\n    let tempComment = [...listComment]\r\n    isLike ? tempComment[index].countLike++ : tempComment[index].countLike--\r\n    tempComment[index].like = isLike ? [...tempComment[index].like, user.accountId] :\r\n      tempComment[index].like.filter(id => id !== user.accountId)\r\n    setListComment(tempComment)\r\n  }\r\n\r\n  const handeUpdateComment = (index: number) => {\r\n    let tempContent = [...listComment]\r\n    tempContent[index].lastUpdate = Date.now()\r\n    setListComment(tempContent)\r\n  }\r\n\r\n  const handleDeleteComment = (index: number) => {\r\n    setListComment((prevState) => (prevState.filter((item, indexItem) => index !== indexItem)))\r\n    handleChangeComment(false)\r\n  }\r\n\r\n  useEffect(() => {\r\n    async function getComments() {\r\n      const result = await CommentAPI.getAllCommentInDataset(datasetValues.dataset._id)\r\n      setListComment(result.data)\r\n      setIsLoading(false)\r\n    }\r\n\r\n    if (datasetValues.dataset._id !== '' && value === index) getComments()\r\n  }, [datasetValues.dataset._id, value, index])\r\n\r\n  return (\r\n    <div\r\n      id='t-comment-tab'\r\n      className='t-comment-tab h-mt-32 h-mb-20'\r\n      hidden={index !== value}\r\n    >\r\n      <div className='b-list-comment'>\r\n        {listComment.map((comment, index) =>\r\n          <CommentPost\r\n            accountId={user.accountId}\r\n            authorId={datasetValues.accountId}\r\n            key={index}\r\n            index={index}\r\n            comment={comment}\r\n            isLoading={isLoading}\r\n            setReply={setReply}\r\n            handleDeleteComment={handleDeleteComment}\r\n            handleChangeLike={handleChangeLike}\r\n            handleUpdateComment={handeUpdateComment}\r\n          />\r\n        )}\r\n      </div>\r\n\r\n      {!isLoading &&\r\n        <div className='b-post-comment h-d_flex'>\r\n          <div className='-cursor-pointer'>\r\n            <Avatar\r\n              aria-label=\"avatar\"\r\n              src={user.avatar}\r\n            />\r\n          </div>\r\n\r\n          <div className='p-input-comment h-ml-10' id='tiny-editor'>\r\n            <div className='p-title' >\r\n              <Typography variant='body2' className='p-gray-color-typography h-ml-20' >\r\n                {reply !== null && `>> trả lời @${listComment[reply].commentator.name}`}\r\n              </Typography>\r\n            </div>\r\n\r\n            <div className='p-input-area'>\r\n              <TinyMCEEditor\r\n                values={comment}\r\n                height={200}\r\n                setValues={setComment}\r\n              />\r\n\r\n              <div className='h-d_flex -justify-flex-end h-mt-10 '>\r\n                <Button\r\n                  variant='contained'\r\n                  size='small'\r\n                  onClick={postComment}\r\n                  disabled={comment === ''}\r\n                  className='p-round-button p-button-save-color '\r\n                >\r\n                  Bình luận\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      }\r\n    </div>\r\n  )\r\n}","import {\r\n  Accordion,\r\n  AccordionDetails,\r\n  AccordionSummary,\r\n  Button,\r\n  Grid,\r\n  IconButton,\r\n  TextField,\r\n  Typography\r\n} from '@material-ui/core';\r\nimport {\r\n  Add, AddBox,\r\n  Delete, ExpandMore, History,\r\n  InsertDriveFileOutlined,\r\n  Remove, TrackChanges\r\n} from '@material-ui/icons';\r\nimport DatasetAPI, { Version } from 'api/dataset-api';\r\nimport { FileInfo } from 'api/file-api';\r\nimport 'app/modules/dataset/dataset-view/css/history-tab.scss';\r\nimport { DatasetViewContext } from 'app/modules/dataset/dataset-view/pages/context.component';\r\nimport DatasetUpload from 'app/modules/dataset/_common/dataset-upload/dataset-upload.component';\r\nimport clsx from 'clsx';\r\nimport addToast from 'dataworld/parts/toast/add-toast.component';\r\nimport moment from 'moment';\r\nimport React, { useContext, useEffect, useMemo, useState } from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport { useAppSelector } from 'redux/hooks';\r\nimport { STATUS_OK } from 'services/axios/common-services.const';\r\n\r\ninterface HistoryTabProps {\r\n  index: number,\r\n  value: number,\r\n}\r\n\r\ninterface FormValues {\r\n  version: string,\r\n  files: Array<any>,\r\n}\r\n\r\nconst iconStatus = [\r\n  <AddBox style={{ color: '#4caf50' }} />,\r\n  <TrackChanges style={{ color: '#ff9901' }} />,\r\n  <Remove style={{ color: '#fa0101' }} />\r\n]\r\n\r\nexport default function HistoryTab(props: HistoryTabProps) {\r\n  const { index, value } = props\r\n  const [currentVersion, setCurrentVersion] = useState<Version | null>(null)\r\n  const { datasetValues, files } = useContext(DatasetViewContext)\r\n  const [updatable, setUpdatable] = useState<boolean>(false)\r\n  const [previousFiles, setPreviousFiles] = useState<Array<FileInfo>>([])\r\n  const lengthVersions = datasetValues.dataset.versions.length\r\n  const user = useAppSelector(state => state.auth.user)\r\n\r\n  const defaultValues = {\r\n    version: '',\r\n    files: [],\r\n  }\r\n\r\n  const { register, control, errors, handleSubmit } = useForm<FormValues>({ defaultValues })\r\n\r\n  const addVersion = () => {\r\n    setCurrentVersion(null)\r\n  }\r\n\r\n  const handleDeleteFile = (deleteIndex: number) => {\r\n    setPreviousFiles((prev) => (\r\n      prev.filter((file, index) => index !== deleteIndex)\r\n    ))\r\n  }\r\n\r\n  const onSubmit = async (data: FormValues) => {\r\n    const formData = new FormData()\r\n    formData.append('datasetId', datasetValues.dataset._id)\r\n    formData.append('version', data.version)\r\n    formData.append('username', datasetValues.username)\r\n    formData.append('url', datasetValues.dataset.url)\r\n    formData.append('previousFiles', JSON.stringify(previousFiles))\r\n    data.files.forEach((file: any) =>\r\n      formData.append('files', file.file)\r\n    )\r\n    const result = await DatasetAPI.createNewVersion(formData)\r\n    if (result.status === STATUS_OK) {\r\n      addToast({ message: 'Cập nhật thành công', type: 'success' })\r\n      window.location.reload()\r\n    }\r\n  }\r\n\r\n  const countChanges = useMemo(() => {\r\n    let add = 0, remove = 0;\r\n    currentVersion?.fileChanges.forEach(file => {\r\n      add += file.changeDetails.add\r\n      remove += file.changeDetails.remove\r\n    })\r\n    return {\r\n      totalAdd: add,\r\n      totalRemove: remove\r\n    }\r\n  }, [currentVersion])\r\n\r\n  useEffect(() => {\r\n    if (datasetValues.dataset.versions.length > 0) {\r\n      setCurrentVersion(datasetValues.dataset.versions[0])\r\n      setPreviousFiles(files)\r\n    }\r\n  }, [datasetValues.dataset.versions, files])\r\n\r\n  return (\r\n    <div\r\n      hidden={index !== value}\r\n      className=\"t-history-tab h-mt-32\"\r\n    >\r\n      <div className='p-title'>\r\n        <Typography variant='h6' className='h-ml-20'>Lịch sử sửa đổi</Typography>\r\n      </div>\r\n      <Grid container spacing={0} className='b-history'>\r\n        <Grid item xs={3} className='b-options'>\r\n          <div className='p-version'>\r\n            {datasetValues.dataset.versions.map((version, index) => (\r\n              <div className='h-mt-10' key={index}>\r\n                <button\r\n                  className={clsx({ 'p-option-current': version.version === currentVersion?.version },\r\n                    { 'p-button-span h-ml-4 p-option-name': true })}\r\n                  onClick={() => setCurrentVersion(version)}\r\n                >\r\n                  {version.version}\r\n                </button>\r\n              </div>\r\n            ))}\r\n          </div>\r\n\r\n          {datasetValues.accountId === user.accountId &&\r\n            <div className='h-mt-32 p-new-version'>\r\n              <Button\r\n                className='p-round-button'\r\n                variant='contained'\r\n                color='primary'\r\n                onClick={addVersion}\r\n                startIcon={<Add />}\r\n              >\r\n                Tạo mới\r\n            </Button>\r\n            </div>\r\n          }\r\n\r\n        </Grid>\r\n\r\n        <Grid item xs={9}>\r\n          {currentVersion === null ?\r\n            <div className='b-add-new-version'>\r\n              <div className='-bottom-line'>\r\n                <Typography variant='h6' className='f-weight-700'>Tạo phiên bản mới</Typography>\r\n                <Typography variant='body1' className='p-gray-color-typography -italic-style h-mb-24'>\r\n                  Để cập nhật nội dung, hãy tải lên file có tên giống với file hiện tại\r\n              </Typography>\r\n              </div>\r\n\r\n              <form className='h-mt-32' onSubmit={handleSubmit(onSubmit)} >\r\n                <TextField\r\n                  variant=\"outlined\"\r\n                  InputLabelProps={{\r\n                    shrink: true,\r\n                    classes: {\r\n                      asterisk: \"labelAsterisk\",\r\n                    },\r\n                  }}\r\n                  id=\"version\"\r\n                  label=\"Tên phiên bản\"\r\n                  size='small'\r\n                  name=\"version\"\r\n                  style={{ width: '75%' }}\r\n                  autoFocus\r\n                  className='p-version'\r\n                  required\r\n                  inputRef={register({\r\n                    minLength: 5,\r\n                    maxLength: 50\r\n                  })}\r\n                />\r\n\r\n                <Typography className='p-validate-error h-mt-4'>\r\n                  {errors.version &&\r\n                    'Tên phiên bản phải có 5-50 ký tự. Có thể sử dụng chữ và số và các ký tự đặc biệt'\r\n                  }\r\n                </Typography>\r\n\r\n                <Typography\r\n                  variant='body2'\r\n                  className='h-mt-4 p-gray-color-typography '\r\n                >\r\n                  {window.location.href}\r\n                </Typography>\r\n\r\n                <div className='-top-line h-mt-20'>\r\n                  <Typography className='h-mt-20 f-weight-700'>\r\n                    Phiên bản trước ({lengthVersions > 0\r\n                      && datasetValues.dataset.versions[0].version})\r\n                  </Typography>\r\n\r\n                  <ul className='b-list h-mt-10'>\r\n                    {previousFiles.map((file, index) =>\r\n                      <li className='h-d_flex -justify-space-between h-mt-6' key={index}>\r\n                        <div className='h-d_flex'>\r\n                          <InsertDriveFileOutlined />\r\n                          <Typography className='h-ml-10'>{file.name} ({file.size})</Typography>\r\n                        </div>\r\n\r\n                        <IconButton onClick={() => handleDeleteFile(index)}>\r\n                          <Delete />\r\n                        </IconButton>\r\n                      </li>)\r\n                    }\r\n                  </ul>\r\n\r\n                  <Typography className='h-mt-20 f-weight-700 h-mb-10'>\r\n                    Tải lên files\r\n                  </Typography>\r\n\r\n                  <DatasetUpload\r\n                    control={control}\r\n                    setCreatable={setUpdatable}\r\n                    creatable={updatable}\r\n                  />\r\n                </div>\r\n\r\n                <div className='-top-line'>\r\n                  <Button\r\n                    className='p-button-save-color p-round-button h-mt-20'\r\n                    type='submit'\r\n                    disabled={!updatable}\r\n                    variant='outlined'>\r\n                    Cập nhật\r\n                  </Button>\r\n                </div>\r\n\r\n              </form>\r\n\r\n            </div>\r\n\r\n            :\r\n\r\n            <div className='b-version-info'>\r\n              <div className='h-d_flex p-header-version'>\r\n                <History />\r\n                <Typography className='f-weight-700 h-ml-10'>{currentVersion?.version}</Typography>\r\n                <Typography className='p-gray-color-typography h-ml-32'>\r\n                  Cập nhật {moment(currentVersion?.createdDate).fromNow()}\r\n                </Typography>\r\n              </div>\r\n\r\n              <div\r\n                className='p-change'\r\n              >\r\n                <Accordion>\r\n                  <AccordionSummary\r\n                    className='p-summary-custom'\r\n                    expandIcon={<ExpandMore />}\r\n                  >\r\n                    <div className='h-d_flex'>\r\n                      <Typography>Có {currentVersion?.fileChanges.length} files thay đổi với </Typography>\r\n                      <Typography className='h-ml-10'>\r\n                        <span style={{ color: '#4caf50' }} >\r\n                          +{countChanges.totalAdd}\r\n                        </span>\r\n                        <span style={{ color: 'red' }} className='h-ml-10'>\r\n                          -{countChanges.totalRemove}\r\n                        </span>\r\n                      </Typography>\r\n                    </div>\r\n\r\n                  </AccordionSummary>\r\n\r\n                  <AccordionDetails>\r\n                    <ul className='b-list'>\r\n                      {currentVersion?.fileChanges.map((file, index) =>\r\n                        <li className='h-d_flex -justify-space-between p-item' key={index}>\r\n                          <div className='h-d_flex'>\r\n                            {iconStatus[file.status]}\r\n                            <Typography className='h-ml-10'>{file.fileName}</Typography>\r\n                          </div>\r\n\r\n                          <div className='h-d_flex'>\r\n                            <span style={{ color: '#4caf50' }}>\r\n                              +{file.changeDetails.add}\r\n                            </span>\r\n                            <span style={{ color: 'red' }} className='h-ml-10'>\r\n                              -{file.changeDetails.remove}\r\n                            </span>\r\n                          </div>\r\n                        </li>\r\n                      )}\r\n                    </ul>\r\n                  </AccordionDetails>\r\n                </Accordion>\r\n              </div>\r\n            </div>\r\n          }\r\n        </Grid>\r\n      </Grid>\r\n    </div>\r\n\r\n  )\r\n}","import {\r\n  AppBar,\r\n  Button,\r\n  IconButton,\r\n  Tab,\r\n  Tabs,\r\n  Typography,\r\n} from '@material-ui/core';\r\nimport {\r\n  MoreVert, SettingsOutlined,\r\n  InsertCommentOutlined,\r\n  Timeline, StorageRounded,\r\n} from '@material-ui/icons';\r\nimport 'app/modules/dataset/dataset-view/css/dataset-tab.scss';\r\nimport { DatasetViewContext } from 'app/modules/dataset/dataset-view/pages/context.component';\r\nimport React, { useContext, useState } from 'react';\r\nimport HandleCommon from 'utils/handle-common';\r\nimport DataTab from '../data-tab/data-tab.component';\r\nimport SettingsTab from '../settings-tab/settings-tab.component';\r\nimport CommentTab from '../comment-tab/comment-tab.component'\r\nimport HistoryTab from '../history-tab/history-tab.component'\r\nimport DatasetAPI from 'api/dataset-api';\r\n\r\nexport interface TabProps {\r\n  index: number;\r\n  value: number;\r\n}\r\n\r\nexport default function DatasetTab() {\r\n  const { datasetValues, isLoadingData, countComment, ownerDataset } = useContext(DatasetViewContext)\r\n  const [value, setValue] = useState<number>(0);\r\n\r\n  const handleChange = (event: React.ChangeEvent<{}>, newValue: number) => {\r\n    setValue(newValue);\r\n  };\r\n\r\n  const downloadDataset = async () => {\r\n    const { path, _id } = datasetValues.dataset\r\n    const result = await DatasetAPI.downloadDatasetByPath(path, _id)\r\n    let url = window.URL.createObjectURL(new Blob([result.data]));\r\n    let link = document.createElement('a');\r\n    link.href = url;\r\n    link.download = `${datasetValues.dataset.title}.zip`;\r\n    link.click();\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      {!isLoadingData &&\r\n        <>\r\n          <AppBar position=\"static\" className='b-dataset-tab'>\r\n            <div className='b-tab'>\r\n              <Tabs value={value} onChange={handleChange}>\r\n                <Tab label={\r\n                  <Typography variant='body2' className='h-d_flex -align-center'>\r\n                    <StorageRounded />\r\n                    <span className='h-ml-4'>\r\n                      Dữ liệu\r\n                    </span>\r\n                  </Typography>} />\r\n\r\n                <Tab label={\r\n                  <Typography variant='body2' className='h-d_flex -align-center'>\r\n                    <InsertCommentOutlined />\r\n                    <span className='h-ml-4'>\r\n                      Bình luận\r\n                      (<span className='p-gray-color-typography'>\r\n                        {countComment}\r\n                      </span>)\r\n                    </span>\r\n                  </Typography>}\r\n                />\r\n\r\n                <Tab label={\r\n                  <Typography variant='body2' className='h-d_flex -align-center'>\r\n                    <Timeline />\r\n                    <span className='h-ml-4'>\r\n                      Lịch sử phiên bản\r\n                    </span>\r\n                  </Typography>}\r\n                />\r\n\r\n                {ownerDataset &&\r\n                  <Tab label={\r\n                    <Typography variant='body2' className='h-d_flex -align-center'>\r\n                      <SettingsOutlined />\r\n                      <span className='h-ml-4'>Cài đặt</span>\r\n                    </Typography>}\r\n                  />\r\n                }\r\n              </Tabs>\r\n\r\n              <div>\r\n                <Button\r\n                  variant='contained'\r\n                  className='p-button-download h-mt-8 h-mb-8 h-mr-20'\r\n                  onClick={downloadDataset}\r\n                >\r\n                  Tải về ({HandleCommon.formatBytes(datasetValues.dataset.size)})\r\n                </Button>\r\n\r\n                <IconButton className='h-mr-10' >\r\n                  <MoreVert />\r\n                </IconButton>\r\n              </div>\r\n            </div>\r\n          </AppBar>\r\n        </>\r\n      }\r\n      <DataTab value={value} index={0} />\r\n\r\n      <CommentTab value={value} index={1} />\r\n\r\n      <HistoryTab value={value} index={2} />\r\n\r\n      {ownerDataset && <SettingsTab value={value} index={3} />}\r\n    </div>\r\n  )\r\n}","import { Tooltip, Typography } from '@material-ui/core';\r\nimport { CheckCircle } from '@material-ui/icons';\r\nimport { Skeleton } from '@material-ui/lab';\r\nimport { DatasetValues } from 'api/dataset-api';\r\nimport moment from 'moment';\r\nimport React from 'react';\r\nimport { useHistory } from 'react-router';\r\nimport HandleCommon from 'utils/handle-common';\r\nimport './recommend-post.scss';\r\n\r\ninterface RecommendPostProps {\r\n  isLoading: boolean,\r\n  dataset: DatasetValues,\r\n}\r\n\r\nexport default function RecommendPost({ isLoading, dataset }: RecommendPostProps) {\r\n  const history = useHistory()\r\n\r\n  const gotoDataset = () => {\r\n    history.push(`/dataset/${dataset.username}/${dataset.dataset.url}`)\r\n  }\r\n\r\n  const gotoProfile = () => {\r\n    history.push(`/profile/${dataset.username}`)\r\n  }\r\n\r\n  return (\r\n    <div className='b-recommend-post h-mt-6'>\r\n      {isLoading ?\r\n        <Skeleton animation=\"wave\" variant=\"rect\" className='p-avatar' /> :\r\n\r\n        <img\r\n          alt=''\r\n          className='p-thumbnail -cursor-pointer'\r\n          src={dataset.dataset.banner}\r\n          onClick={gotoDataset}\r\n        />\r\n      }\r\n\r\n      <div className='b-info h-ml-14'>\r\n        <div className=''>\r\n          {isLoading ?\r\n            <>\r\n              <Skeleton height={20} width={150} />\r\n              <Skeleton height={20} width={150} />\r\n              <Skeleton height={20} width={150} />\r\n            </>\r\n            :\r\n            <>\r\n              <Tooltip title={dataset.dataset.title}>\r\n                <Typography\r\n                  onClick={gotoDataset}\r\n                  variant=\"body1\"\r\n                  className='f-weight-700 -cursor-pointer p-title'\r\n                >\r\n                  {dataset.dataset.title}\r\n                </Typography>\r\n              </Tooltip>\r\n\r\n              <div className='-cursor-pointer h-d_flex -align-center h-mt-4'>\r\n                <Typography\r\n                  variant=\"body2\"\r\n                  className='f-weight-700 h-mr-4 p-gray-color-typography'\r\n                  onClick={gotoProfile}\r\n                >\r\n                  {dataset.name}\r\n                </Typography>\r\n\r\n                <CheckCircle color='action' style={{ fontSize: '14px' }} />\r\n              </div>\r\n\r\n              <Typography variant=\"body2\" className='p-gray-color-typography'>\r\n                Dung lượng: {HandleCommon.formatBytes(dataset.dataset.size)}\r\n              </Typography>\r\n\r\n              <Typography variant=\"body2\" className='p-gray-color-typography'>\r\n                {dataset.dataset.countLike} lượt thích • {dataset.dataset.downloads} lượt tải về\r\n              </Typography>\r\n\r\n              <Typography variant=\"body2\" className='p-gray-color-typography'>\r\n                {`Cập nhật ${moment(dataset.dataset.lastUpdate).fromNow()}`}\r\n              </Typography>\r\n            </>\r\n          }\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}","import {\r\n  Accordion,\r\n  AccordionDetails,\r\n  AccordionSummary,\r\n\r\n  Typography\r\n} from '@material-ui/core'\r\nimport { StarsOutlined } from '@material-ui/icons'\r\nimport { Skeleton } from '@material-ui/lab'\r\nimport CommonAPI from 'api/common-api'\r\nimport { DatasetValues } from 'api/dataset-api'\r\nimport React, { useEffect, useState } from 'react'\r\nimport RecommendPost from '../recommend-post/recommend-post.component'\r\nimport './recommend-list.scss'\r\nimport queryString from 'query-string'\r\nimport { useHistory } from 'react-router'\r\n\r\nexport default function RecommendList() {\r\n  const [isLoading, setIsLoading] = useState<boolean>(true)\r\n  const [recommendList, setRecommendList] = useState<Array<DatasetValues>>([])\r\n  const history = useHistory()\r\n\r\n  const handleViewAllRecommend = async () => {\r\n    const result = await CommonAPI.getRecommendArray()\r\n    const recommendArray = result.data.map((item: any) => item.name)\r\n    const search = queryString.stringify(recommendArray, { arrayFormat: 'index' })\r\n    history.push(`/dataset/search?${search}`)\r\n  }\r\n\r\n  useEffect(() => {\r\n    async function getRecommendList() {\r\n      const result = await CommonAPI.getRecommendList()\r\n      setRecommendList(result.data || [])\r\n      setIsLoading(false)\r\n    }\r\n    getRecommendList()\r\n  }, [])\r\n\r\n  return (\r\n    <Accordion expanded={true} className='b-recommend-list'>\r\n      <AccordionSummary\r\n        className='p-summary'\r\n        style={{ cursor: 'default' }}\r\n        id='description'\r\n      >\r\n        {isLoading ?\r\n          <Skeleton width={150} height={20} /> :\r\n          <Typography className='-align-center h-d_flex' >\r\n            <StarsOutlined />\r\n\r\n            <span className='h-ml-4 f-weight-700'>Gợi ý của bạn</span>\r\n          </Typography>\r\n        }\r\n\r\n        {isLoading ?\r\n          <Skeleton width={100} height={20} /> :\r\n          <Typography\r\n            className='f-weight-700 -cursor-pointer'\r\n            onClick={handleViewAllRecommend}\r\n          >\r\n            Xem tất cả\r\n          </Typography>\r\n        }\r\n      </AccordionSummary>\r\n\r\n      <AccordionDetails className='b-details' >\r\n        <ul className='b-list'>\r\n          {recommendList.map((item, index) =>\r\n            <li className='b-item' key={index}>\r\n              <RecommendPost dataset={item} isLoading={isLoading} />\r\n            </li>\r\n          )}\r\n        </ul>\r\n      </AccordionDetails>\r\n    </Accordion>\r\n  )\r\n}","import React from 'react';\r\nimport {\r\n  Container\r\n} from '@material-ui/core';\r\nimport DatasetHeader from '../components/dataset-header/dataset-header.component';\r\nimport 'app/modules/dataset/dataset-view/css/dataset-view.scss';\r\nimport DatasetTab from '../components/dataset-tab/dataset-tab.component';\r\nimport { DatasetViewProvider } from './context.component';\r\nimport Footer from 'dataworld/blocks/footer/footer.component';\r\nimport RecommendList from 'dataworld/blocks/recommend/recommend-list/recommend-list.component';\r\n\r\n\r\nexport default function DatasetViewTemplate() {\r\n  return (\r\n    <>\r\n      <DatasetViewProvider>\r\n        <Container\r\n          style={{ maxWidth: '100%', padding: '100px' }}\r\n        >\r\n          <div className='h-d_flex t-dataset-view h-mb-60'>\r\n            <div className='t-dataset-content'>\r\n              <DatasetHeader />\r\n\r\n              <DatasetTab />\r\n            </div>\r\n\r\n            <div className='t-dataset-recommend h-ml-20'>\r\n              <RecommendList />\r\n            </div>\r\n          </div>\r\n\r\n          <Footer />\r\n        </Container>\r\n      </DatasetViewProvider>\r\n    </>\r\n  )\r\n}","import React from \"react\";\r\nimport { Switch, useRouteMatch } from \"react-router-dom\";\r\nimport PrivateRoute from \"routes/private-route\";\r\nimport DatasetList from \"./dataset-list/pages/dataset-list.component\";\r\nimport DatasetCreate from \"./dataset-create/pages/dataset-create.component\"\r\nimport DatasetFilter from \"./dataset-search/pages/dataset-search.component\"\r\nimport DatasetView from \"./dataset-view/pages/dataset-view.template\"\r\nimport DefaultRoute from \"routes/default-router.component\";\r\nimport NotFoundPage from \"dataworld/blocks/not-found-page/not-found-page\";\r\n\r\nexport default function DataSetRouter() {\r\n  const match = useRouteMatch();\r\n\r\n  return (\r\n    <Switch>\r\n      <PrivateRoute path={match.url} component={DatasetList} exact />\r\n      <PrivateRoute path={`${match.url}/create`} component={DatasetCreate} />\r\n      <PrivateRoute path={`${match.url}/search`} component={DatasetFilter} />\r\n      <PrivateRoute path={`${match.url}/:username/:datasetUrl`} component={DatasetView} />\r\n      <DefaultRoute component={NotFoundPage} />\r\n    </Switch>\r\n  );\r\n}\r\n"],"sourceRoot":""}